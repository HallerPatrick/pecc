[{"id": 84, "euler_id": 84, "title": "Monopoly odds", "problem": "In the game, Monopoly, the standard board is set up in the following way:\n\n\nA player starts on the GO square and adds the scores on two 6-sided dice to determine the number of squares they advance in a clockwise direction. Without any further rules we would expect to visit each square with equal probability: 2.5%. However, landing on G2J (Go To Jail), CC (community chest), and CH (chance) changes this distribution.\nIn addition to G2J, and one card from each of CC and CH, that orders the player to go directly to jail, if a player rolls three consecutive doubles, they do not advance the result of their 3rd roll. Instead they proceed directly to jail.\nAt the beginning of the game, the CC and CH cards are shuffled. When a player lands on CC or CH they take a card from the top of the respective pile and, after following the instructions, it is returned to the bottom of the pile. There are sixteen cards in each pile, but for the purpose of this problem we are only concerned with cards that order a movement; any instruction not concerned with movement will be ignored and the player will remain on the CC/CH square.\nCommunity Chest (2/16 cards):\nAdvance to GO\nGo to JAIL\n\nChance (10/16 cards):\nAdvance to GO\nGo to JAIL\nGo to C1\nGo to E3\nGo to H2\nGo to R1\nGo to next R (railway company)\nGo to next R\nGo to next U (utility company)\nGo back 3 squares.\n\nThe heart of this problem concerns the likelihood of visiting a particular square. That is, the probability of finishing at that square after a roll. For this reason it should be clear that, with the exception of G2J for which the probability of finishing on it is zero, the CH squares will have the lowest probabilities, as 5/8 request a movement to another square, and it is the final square that the player finishes at on each roll that we are interested in. We shall make no distinction between \"Just Visiting\" and being sent to JAIL, and we shall also ignore the rule about requiring a double to \"get out of jail\", assuming that they pay to get out on their next turn.\nBy starting at GO and numbering the squares sequentially from 00 to 39 we can concatenate these two-digit numbers to produce strings that correspond with sets of squares.\nStatistically it can be shown that the three most popular squares, in order, are JAIL (6.24%) = Square 10, E3 (3.18%) = Square 24, and GO (3.09%) = Square 00. So these three most popular squares can be listed with the six-digit modal string: 102400.\nIf, instead of using two 6-sided dice, two 4-sided dice are used, find the six-digit modal string.", "solution": "101524", "difficulty": 35, "story": "Once upon a time, in a vibrant little town called Mathville, there lived a boy named Oliver. Oliver was an avid board game enthusiast and spent most of his days engrossed in strategic battles against his friends and family. His favorite game by far was Monopoly, where he could simulate the world of business and make his smart investments to become the wealthiest player.\n\nOne sunny afternoon, Oliver gathered his friends for a thrilling game of Monopoly. As they arranged the board, Oliver noticed a mathematical problem on one of the cards. It piqued his interest, and he couldn't help but wonder how it would affect the gameplay.\n\nThe game began, and Oliver found himself lucky to start on the GO square, just like usual. As he rolled the two 4-sided dice and landed on a property, his curiosity grew. He questioned if the probabilities would change with 4-sided dice rather than the traditional 6-sided ones.\n\nAs the game progressed, Oliver found himself landing on different squares, exploring the intricacies of the game. But his mind was still fixated on the mathematical problem. What if he could decipher the six-digit modal string? Could he find the most popular squares in Mathville?\n\nMeanwhile, his little brother, Henry, was happily socking away his imaginary money and investing shrewdly throughout the town. As his properties grew, so did his curiosity about the mathematical problem that had captured Oliver's attention.\n\nOliver's friend Lily was not far behind, also intrigued by the probability puzzle. She wondered whether the squares they were landing on were purely random or influenced by the mathematical problem. This uncertainty made her more vigilant, paying close attention to every move.\n\nDays turned into weeks, and the Monopoly games became a daily ritual for Oliver, Henry, and Lily. They explored different strategies, analyzed the outcomes of their rolls, and pondered the mysterious six-digit modal string.\n\nAs the friends' obsession with the mathematical problem grew, they decided it was time to investigate fully. They delved into the mathematical principles of probability, studying the intricacies of the game mechanics and analyzing dice rolls. The friends spent countless hours pouring over the rules and researching the intricacies of the mathematical problem.\n\nWith each new discovery, they assembled charts, graphs, and formulas that represented the game board. Their excitement grew exponentially as they began to unravel the statistical patterns that governed the popular squares.\n\nAs their knowledge deepened, Oliver, Henry, and Lily couldn't help but marvel at the interconnectedness of the game. They admired how the mathematical problem was integral to every decision they made, influencing their strategies and shaping their gameplay.\n\nOne night, as they gathered around the Monopoly board, they were filled with exhilaration and anticipation. They were the only ones who knew the secrets hidden within the six-digit modal string, the key to unlocking the most popular squares in Mathville.\n\nBut as their excitement peaked, a question lingered in their minds. What if the mathematical problem could be solved with different dice? How would the game board change, and what would the new six-digit modal string be?\n\nAnd so, with a twinkle in their eyes and determination in their hearts, Oliver, Henry, and Lily rolled the dice once again, ready to embark on a thrilling adventure in search of the solution, armed with their passion for math and the insatiable curiosity that sets them apart.\n\nHow would the town of Mathville change with the introduction of the new dice? Could the six-digit modal string be cracked once again, revealing a new set of popular squares? Will Oliver, Henry, and Lily uncover this mystery and revolutionize the way Monopoly was played in Mathville forever?\n\nOnly time and their unwavering dedication to solving the mathematical problem will tell."}, {"id": 86, "euler_id": 86, "title": "Cuboid route", "problem": "A spider, S, sits in one corner of a cuboid room, measuring 6 by 5 by 3, and a fly, F, sits in the opposite corner. By travelling on the surfaces of the room the shortest \"straight line\" distance from S to F is 10 and the path is shown on the diagram.\n\n\nHowever, there are up to three \"shortest\" path candidates for any given cuboid and the shortest route doesn't always have integer length.\nIt can be shown that there are exactly 2060 distinct cuboids, ignoring rotations, with integer dimensions, up to a maximum size of M by M by M, for which the shortest route has integer length when M = 100. This is the least value of M for which the number of solutions first exceeds two thousand; the number of solutions when M = 99 is 1975.\nFind the least value of M such that the number of solutions first exceeds one million.", "solution": "1818", "difficulty": 35, "story": "Once upon a time, in a small village at the edge of a dense forest, there lived a wise old spider named Sylvester. Sylvester was not an ordinary spider. He possessed knowledge that extended far beyond weaving intricate cobwebs. He understood the beauty and elegance of mathematics, and he often used his knowledge to solve complex problems.\n\nOne sunny morning, as Sylvester sat in his cozy corner of a cuboid-shaped room, he noticed a peculiar buzzing sound coming from the opposite corner. Curiosity piqued, he scurried across the room to investigate. There, he found a tiny fly trapped against the windowpane, its delicate wings fluttering in distress.\n\n\"You seem to be in quite a predicament,\" Sylvester remarked, observing the fly's struggle. \"Allow me to help, dear friend.\"\n\nWith his keen mathematical mind, Sylvester assessed the situation. He understood that the distance between the spider's corner and the fly's corner, when measured along the surfaces of the room, was 10 units. Yet, he knew there were multiple \"shortest\" path candidates. The solution he sought didn't always have an integer value.\n\nAfter some calculations and careful deliberation, Sylvester spun a web, creating a delicate bridge that spanned the length of the room. This ingenious solution allowed the fly to escape from its glass prison and find freedom again.\n\nAs the fly flew away, Sylvester pondered the mathematical problem at hand. He wondered how many other cuboids existed, similar to his own, where the shortest distance between two corners had an integer length. He had come across 2060 such cuboids, ignoring rotations, when the dimensions were restricted to a maximum of M by M by M, and M equaled 100. The number of solutions when M was 99 was 1975.\n\nDriven by intellectual curiosity, Sylvester pushed his mathematical boundaries further. He asked himself: What was the value of M when the number of solutions surpassed one million? How many distinct cuboids were yet to be discovered that met this criterion?\n\nSylvester's quest for knowledge kindled a fire within him. He scoured the realms of mathematics, delving deep into his studies, seeking the answer to his burning question. Days turned into weeks, and weeks turned into months, as Sylvester tirelessly pursued the solution. His dedication knew no bounds.\n\nAnd so, the question remains: What is the least value of M that will unlock the door to the countless cuboids awaiting discovery? How many more unseen worlds hide within their mathematical depths, where a spider's ingenious bridge can pave the way for newfound understanding?\n\nDear reader, will you be the one to solve this profound mathematical problem and illuminate the path to enlightenment?"}, {"id": 93, "euler_id": 93, "title": "Arithmetic expressions", "problem": "By using each of the digits from the set, {1, 2, 3, 4}, exactly once, and making use of the four arithmetic operations (+, \u2212, *, /) and brackets/parentheses, it is possible to form different positive integer targets.\nFor example,\n8 = (4 * (1 + 3)) / 2\n14 = 4 * (3 + 1 / 2)\n19 = 4 * (2 + 3) \u2212 1\n36 = 3 * 4 * (2 + 1)\nNote that concatenations of the digits, like 12 + 34, are not allowed.\nUsing the set, {1, 2, 3, 4}, it is possible to obtain thirty-one different target numbers of which 36 is the maximum, and each of the numbers 1 to 28 can be obtained before encountering the first non-expressible number.\nFind the set of four distinct digits, a < b < c < d, for which the longest set of consecutive positive integers, 1 to n, can be obtained, giving your answer as a string: abcd.", "solution": "1258", "difficulty": 35, "story": "Once upon a time in the small village of Numeria, there lived a brilliant mathematician named Professor Austin. Professor Austin's days were filled with excitement as he explored the world of numbers, always searching for new mathematical puzzles to solve. \n\nOne sunny morning, as Professor Austin sipped his tea at the local bakery, he overheard a conversation between two villagers. They were discussing an intriguing mathematical puzzle that had been circulating in the town. The puzzle involved using four distinct digits, a, b, c, and d, to create consecutive positive integers by applying different arithmetic operations. \n\nIntrigued, Professor Austin couldn't resist but join the conversation. The villagers shared what they knew about the puzzle, including some examples of target numbers that could be obtained using specific combinations of the digits. \n\nThe professor's mind started racing with excitement. He realized that this puzzle had the potential to unlock a wealth of mathematical knowledge. It wasn't just a game; it was a doorway to deeper understanding. \n\nProfessor Austin excused himself from the conversation, hurrying back to his cozy study in the village. Surrounded by shelves filled with dusty books and stacks of notes, he delved into the depths of his mind, determined to crack the puzzle. \n\nDays turned into weeks, and the professor worked tirelessly. He tried various combinations of the digits, manipulating them with the four arithmetic operations to form different target numbers. He scribbled formula after formula in search of the magical combination that would unlock the longest set of consecutive positive integers. \n\nHis mind whirled with numbers, equations, and possibilities. He took breaks only to eat a quick meal or catch a few hours of sleep. The village watched in wonder as the professor's windows became adorned with rainbow-colored equations. \n\nFinally, after weeks of intense concentration, Professor Austin discovered the answer. It was as if the universe had whispered the solution to him in a moment of pure inspiration. The answer lay in the combination of four distinct digits: a, b, c, and d. \n\nTriumphantly, the professor emerged from his study, clutching a piece of paper. He gathered the villagers in the town square, their eyes filled with anticipation. As the professor unveiled his findings, the crowd gasped in awe.\n\n\"Using the set of four distinct digits, a, b, c, and d, we can obtain thirty-one different target numbers,\" Professor Austin announced. \"And the longest set of consecutive positive integers we can form is from 1 to n, with 36 being the maximum. But now we must ask ourselves, which set of four distinct digits, a, b, c, and d, allows us to achieve this feat?\"\n\nThe villagers exchanged excited glances, eager to solve the puzzle themselves. Professor Austin smiled, knowing that he had sparked a newfound curiosity for mathematics in their hearts. The entire village would soon embark on a journey of exploration and discovery, using the power of numbers to uncover the secrets hidden within the mathematical puzzle.\n\nAnd so, dear reader, I ask you the same question Professor Austin asked the villagers of Numeria: \"Can you find the set of four distinct digits, a < b < c < d, for which the longest set of consecutive positive integers, 1 to n, can be obtained?\""}, {"id": 94, "euler_id": 94, "title": "Almost equilateral triangles", "problem": "It is easily proved that no equilateral triangle exists with integral length sides and integral area. However, the almost equilateral triangle 5-5-6 has an area of 12 square units.\nWe shall define an almost equilateral triangle to be a triangle for which two sides are equal and the third differs by no more than one unit.\nFind the sum of the perimeters of all almost equilateral triangles with integral side lengths and area and whose perimeters do not exceed one billion (1,000,000,000).", "solution": "518408346", "difficulty": 35, "story": "Once upon a time in a quiet village nestled in the hills, there lived a young girl named Elena. She was known for her deep curiosity and passion for puzzles and riddles. Each day, after helping her parents with their farm chores, Elena would venture to the village library to immerse herself in books and seek solace in the world of numbers.\n\nOne sunny afternoon, as usual, Elena sat at a small wooden desk surrounded by towering bookshelves, determined to find her next mathematical enigma. Her fingertips lightly traced the spines of the books, until her hand came to rest on an old, worn-out volume nestled between two vibrant encyclopedias.\n\nIntrigued by its dog-eared page, Elena carefully took the book off the shelf. The title on the cover read, \"Mathematical Marvels: Unravel the Mysteries.\" Eagerly flipping through its brittle pages, she stumbled upon a page with a fascinating problem.\n\nWith furrowed brows, Elena read aloud, \"It is easily proved that no equilateral triangle exists with integral length sides and integral area. However, the almost equilateral triangle 5-5-6 has an area of 12 square units. We shall define an almost equilateral triangle to be a triangle for which two sides are equal and the third differs by no more than one unit. Find the sum of the perimeters of all almost equilateral triangles with integral side lengths and area and whose perimeters do not exceed one billion.\"\n\nHer eyes sparkled with excitement as the complexity of the problem enticed her. Elena quickly realized the significance of this question. It was a unprecedented challenge - to uncover a hidden treasure trove of triangles that held answers within their symmetrical boundaries.\n\nDays turned into weeks, and weeks into months as Elena ventured deep into the mathematical realm. She scribbled fervently in her notebook, drawing shapes upon shapes, exploring every possibility, and calculating endlessly. The entire village marveled at her dedication and determination.\n\nElena's journey took her far beyond the confines of the village. She visited scholars, mathematicians, and even traveled to neighboring lands in search of answers. It was not an easy quest, filled with frustration and disappointment, but Elena refused to give up. She had a burning desire to solve the problem and uncover the secret that lay within.\n\nAs the years rolled by, Elena returned to her village with more questions than answers. The mathematical problem that had once consumed her every thought had become an enigma worthy of legends. And so, she pondered, what could be done with this newfound knowledge?\n\nThe villagers gathered around, their eyes filled with anticipation. They had witnessed Elena's remarkable journey and believed she held the key to unlocking the hidden secrets of the world. But Elena realized the true essence of her quest lay not in the answer, but in the journey itself.\n\nWith a smile on her face, she turned to her fellow villagers and asked, \"Can you unlock the mysteries of this mathematical problem? Can you find the sum of the perimeters of all almost equilateral triangles with integral side lengths and area, whose perimeters do not exceed one billion? The journey is yours to embark upon. Are you ready to find the solution?\"\n\nAnd so, as the villagers eagerly took up the challenge, Elena's legacy lived on. The quest to solve the mathematical problem became a source of inspiration and wonder. Generations came and went, each one adding to the collective wisdom of the village, inching closer to the answer.\n\nAnd as the villagers gazed upon the distant horizon, yearning for the answer to the mathematical problem, the question remained suspended in the air, awaiting the minds brave enough to take up the mantle and unveil the secrets hidden within the enigmatic almost equilateral triangles."}, {"id": 101, "euler_id": 101, "title": "Optimum polynomial", "problem": "If we are presented with the first k terms of a sequence it is impossible to say with certainty the value of the next term, as there are infinitely many polynomial functions that can model the sequence.\nAs an example, let us consider the sequence of cube numbers. This is defined by the generating function, un = n3: 1, 8, 27, 64, 125, 216, ...\nSuppose we were only given the first two terms of this sequence. Working on the principle that \"simple is best\" we should assume a linear relationship and predict the next term to be 15 (common difference 7). Even if we were presented with the first three terms, by the same principle of simplicity, a quadratic relationship should be assumed.\nWe shall define OP(k, n) to be the nth term of the optimum polynomial generating function for the first k terms of a sequence. It should be clear that OP(k, n) will accurately generate the terms of the sequence for n \u2264 k, and potentially the first incorrect term (FIT) will be OP(k, k+1); in which case we shall call it a bad OP (BOP).\nAs a basis, if we were only given the first term of sequence, it would be most sensible to assume constancy; that is, for n \u2265 2, OP(1, n) = u1.\nHence we obtain the following OPs for the cubic sequence:\n\nOP(1, n) = 1\n1, 1, 1, 1, ...\nOP(2, n) = 7n\u22126\n1, 8, 15, ...\nOP(3, n) = 6n2\u221211n+6\u00a0\u00a0\u00a0\u00a0\u00a0\n1, 8, 27, 58, ...\nOP(4, n) = n3\n1, 8, 27, 64, 125, ...\n\nClearly no BOPs exist for k \u2265 4.\nBy considering the sum of FITs generated by the BOPs (indicated in red above), we obtain 1 + 15 + 58 = 74.\nConsider the following tenth degree polynomial generating function:\nun = 1 \u2212 n + n2 \u2212 n3 + n4 \u2212 n5 + n6 \u2212 n7 + n8 \u2212 n9 + n10\nFind the sum of FITs for the BOPs.", "solution": "37076114526", "difficulty": 35, "story": "Once upon a time in the peaceful village of Numeralton, there lived a young boy named Ethan. Ethan had a curious mind and a passion for numbers. He spent most of his days tinkering with calculations and solving mathematical puzzles. His dream was to become the greatest mathematician in all the realm.\n\nOne sunny day, while Ethan was playing by the river, he stumbled upon a mysterious book. The book was ancient, with weathered pages and a dusty cover. Intrigued, Ethan blew away the dust and began to read the first page.\n\nTo his amazement, the book contained a mathematical problem that fascinated him. It was about sequences and polynomials, and how finding the next term in a sequence was not always straightforward. The problem discussed the concept of \"optimum polynomial generating functions\" and how they could accurately predict the terms of a sequence.\n\nAs Ethan delved deeper into the book, he discovered an example using the sequence of cube numbers. The example explained that if one was only given the first two terms of the sequence, it would be logical to assume a linear relationship and predict the next term accordingly. Even if three terms were given, a quadratic relationship would be assumed. The book referred to the first incorrect term as the \"bad OP\" or the FIT.\n\nEthan's mind was ablaze with excitement. He realized the implications of this problem. It meant that predicting the next term in a sequence was not always a straightforward task. There were infinitely many polynomial functions that could model a given sequence.\n\nIn his eager pursuit of answers, Ethan spent days and nights experimenting with sequences and polynomials. He created formulas, tested them extensively, and noted the patterns that emerged. His bedroom became a labyrinth of mathematical equations. His friends and family hardly saw him, as he was consumed by his quest to solve the problem.\n\nAs the years passed, Ethan's reputation as a prodigious mathematician grew. His understanding of sequences and polynomials surpassed that of many renowned scholars. However, there was one mathematical problem that eluded him\u2014the sum of FITs for the BOPs.\n\nOne evening, as the sun cast long shadows over the village of Numeralton, Ethan gathered his notes and gazed out at the starry sky. The book had mentioned a tenth-degree polynomial generating function but hadn't provided the solution to its FITs. Ethan pondered over the problem, searching for patterns and connections between the coefficients.\n\nThe answer seemed to dance on the tip of his tongue, but he couldn't grasp it. He knew the solution was within his reach, yet it remained tantalizingly out of his grasp. Determined, he resolved to continue his mathematical journey until he had conquered this final enigma.\n\nAnd so, dear reader, I ask you, can you solve the puzzle that eluded Ethan? What is the sum of FITs for the BOPs derived from the given tenth-degree polynomial generating function? Will you be the one to discover the answer and unveil the mysteries hidden within the book's ancient pages?"}, {"id": 114, "euler_id": 114, "title": "Counting block combinations I", "problem": "A row measuring seven units in length has red blocks with a minimum length of three units placed on it, such that any two red blocks (which are allowed to be different lengths) are separated by at least one grey square. There are exactly seventeen ways of doing this.\n\n\nHow many ways can a row measuring fifty units in length be filled?\nNOTE: Although the example above does not lend itself to the possibility, in general it is permitted to mix block sizes. For example, on a row measuring eight units in length you could use red (3), grey (1), and red (4).", "solution": "16475640049", "difficulty": 35, "story": "Once upon a time, in the bustling town of Numerica, lived a young girl named Lily. Lily had an insatiable curiosity and a passion for numbers that matched the brightness of her hazel eyes. Her favorite place in the town was the local library, where she spent countless hours immersed in books about mathematics. \n\nOne fateful day, while browsing through the dusty shelves, Lily stumbled upon a mysterious old journal. Its pages were yellowed with age, and the words written within seemed to dance off the tattered pages. The journal belonged to Professor Albertus, a renowned mathematician who had once called Numerica his home.\n\nIntrigued, Lily opened the journal. As she flipped through the pages, her eyes came across a problem that captured her attention:\n\n\"A row measuring seven units in length has red blocks with a minimum length of three units placed on it, such that any two red blocks (which are allowed to be different lengths) are separated by at least one gray square. There are exactly seventeen ways of doing this.\"\n\nLily's heart raced with excitement. She couldn't resist the challenge presented before her. Determined to solve the problem, she poured over the journal for hours, scribbling equations and diagrams in her own notebook.\n\nDays turned into weeks, and weeks turned into months, with Lily tirelessly searching for a solution. As she delved deeper into the journal, she discovered more mathematical mysteries left behind by Professor Albertus. And yet, the seven-unit row problem continued to elude her.\n\nOne day, while contemplating the problem while absentmindedly walking through Numerica's beautiful park, Lily noticed a peculiar sight. In the distance, there stood a row of statues. Each statue had a different pose, representing its own unique personality.\n\nIntrigued and hoping to find inspiration, Lily approached the statues. As she got closer, she realized that the statues were indeed the solution to her mathematical problem. In front of her were seventeen statues, lined up in a row, each representing one of the seventeen different ways to fill the seven-unit row.\n\nAwestruck, Lily examined the statues carefully. She marveled at how each statue had its own distinct combination of red blocks and grey squares, satisfying the conditions set forth in the problem. The statues seemed to have a life of their own, telling a story through their arrangement.\n\nFilled with inspiration, Lily returned to her notebook, eager to crack the seven-unit row problem and move on to bigger challenges. She spent days devising a comprehensive solution, considering different combinations and exploring the nuances of the problem. Finally, she arrived at a breakthrough.\n\nBut as her journey through mathematics continued, Lily's insatiable curiosity grew stronger. Her mind teemed with new questions, new problems waiting to be solved. She dedicated countless hours to her pursuit, until finally, she faced her greatest challenge yet.\n\nHow many ways could a row measuring fifty units in length be filled? Lily's eyes gleamed with excitement as she built upon the knowledge she had gained from solving the seven-unit row problem. She knew it would be an arduous task, but she was determined to push the boundaries of her mathematical prowess.\n\nAnd so, dear reader, I leave you with this question \u2013 How many ways can a row measuring fifty units in length be filled? Just like Lily, it is up to you to unveil the mysteries hidden within these mathematical wonders. Will you embark on this adventure and conquer the unknown?"}, {"id": 115, "euler_id": 115, "title": "Counting block combinations II", "problem": "NOTE: This is a more difficult version of Problem 114.\nA row measuring n units in length has red blocks with a minimum length of m units placed on it, such that any two red blocks (which are allowed to be different lengths) are separated by at least one black square.\nLet the fill-count function, F(m, n), represent the number of ways that a row can be filled.\nFor example, F(3, 29) = 673135 and F(3, 30) = 1089155.\nThat is, for m = 3, it can be seen that n = 30 is the smallest value for which the fill-count function first exceeds one million.\nIn the same way, for m = 10, it can be verified that F(10, 56) = 880711 and F(10, 57) = 1148904, so n = 57 is the least value for which the fill-count function first exceeds one million.\nFor m = 50, find the least value of n for which the fill-count function first exceeds one million.", "solution": "168", "difficulty": 35, "story": "Once upon a time, in the cozy little village of Numeria, there lived a young and talented mathematician named Emma. Emma had an insatiable curiosity for solving complex mathematical problems, and her love for numbers was admired by all. The villagers often sought her help whenever they stumbled upon a mathematical conundrum.\n\nOne sunny morning, as Emma was strolling through the village square, she noticed a group of children huddled together, their faces filled with puzzlement. Intrigued, she approached them and asked what had caught their attention.\n\n\"Emma, we were playing near the town gate, and we noticed something fascinating,\" one of the children explained with wide eyes. \"There's a long row-shaped wall, and it's made up of red blocks and black squares. The red blocks have different lengths, but they are always separated by at least one black square. We tried counting the number of ways that wall can be filled, but it's just too difficult!\"\n\nEmma smiled and thought, realizing that the children had discovered the same problem she had recently been studying. She was excited to help them uncover the beauty of mathematics hidden within their game.\n\n\"Well, my young friends,\" Emma began, \"that intriguing problem you stumbled upon is known as the fill-count function, F(m, n). It represents the number of ways a row can be filled with red blocks of minimum length m, such that any two blocks are separated by at least one black square.\"\n\nThe children's eyes lit up with curiosity, and they eagerly listened as Emma continued to explain the importance of the mathematical problem. She went on to reveal that the fill-count function could unlock countless possibilities for designing walls, arranging tiles, or even understanding patterns in nature.\n\nThe children were mesmerized, but they were also eager to learn more. They bombarded Emma with questions, wanting to know how they could calculate the fill-count function for various values of m and n. Emma gladly answered each query and revealed that she had been studying the fill-count function for various values herself.\n\n\"Emma, could you show us how to solve a particular case?\" one of the children asked, their voice filled with enthusiasm.\n\nEmma thought for a moment and smiled, realizing it was the perfect opportunity to challenge the children's problem-solving skills.\n\n\"How about this,\" she said. \"I'll give you some examples, and you can try to find the least value of n for which the fill-count function, F(50, n), exceeds one million. It might seem difficult, but I have faith in your abilities.\"\n\nThe children's eyes widened with excitement. They had been inspired by Emma's passion for mathematics, and they were determined to solve the problem she had presented to them.\n\nAs the sun began to set, the children formed a little study group, discussing various strategies to find the solution. They debated different approaches, analyzed patterns, and challenged each other with questions. In the process, they not only learned about the fill-count function but also developed a deep appreciation for the beauty of mathematics.\n\nWeeks passed, and Emma and the children tirelessly worked together to crack the mathematical problem. They would gather under the warm glow of the village's lamppost, eagerly exchanging ideas and unraveling the complexities hidden within the fill-count function.\n\nOne day, as the village prepared for its annual Mathematics Fair, the children rushed to Emma, their faces radiating excitement.\n\n\"We did it, Emma!\" they exclaimed. \"We found the least value of n for which the fill-count function, F(50, n), exceeds one million. Can we present our solution at the fair?\"\n\nEmma's heart swelled with joy and pride. She had witnessed the tenacity of these young minds as they had delved into the fascinating world of mathematics. She had mentored them, but in return, they had reminded her of the limitless possibilities that lay within the minds of children.\n\nAnd so, at the Mathematics Fair, the children confidently presented their solution, captivating the entire village with their knowledge and passion. Emma stood beside them, the sparkle in her eyes reflecting the brilliance and perseverance that resided within the heart of Numeria.\n\nAs the fair came to a close, the villagers couldn't help but feel inspired by the children's presentation. They marveled at the wonders of mathematics, realizing that even the most seemingly mundane things, like filling a row-shaped wall, could hold profound beauty and complexity.\n\nAnd so, dear reader, the stage is now set. The mathematical problem awaits your attention. What is the least value of n for which the fill-count function, F(50, n), first exceeds one million? Can you unlock the secret embedded within the world of numbers?"}, {"id": 117, "euler_id": 117, "title": "Red, green, and blue tiles", "problem": "Using a combination of grey square tiles and oblong tiles chosen from: red tiles (measuring two units), green tiles (measuring three units), and blue tiles (measuring four units), it is possible to tile a row measuring five units in length in exactly fifteen different ways.\n\n\nHow many ways can a row measuring fifty units in length be tiled?\nNOTE: This is related to Problem 116.", "solution": "100808458960497", "difficulty": 35, "story": "Once upon a time, in a small town called Mathville, there lived a young and curious girl named Lily. Lily had always been fascinated by numbers and patterns, and she longed to solve challenging mathematical problems. One sunny day, as she strolled through the local park, she stumbled upon an enchanting mosaic artwork that beckoned her closer.\n\nThe mosaic depicted a vibrant row of tiles adorning a majestic pathway. Mysteriously, each tile possessed a unique color and shape. Lily marveled at the pattern; some tiles were square and a dull shade of grey, some were red and oblong, others green and longer, and yet others were blue and even longer still.\n\nAs Lily scrutinized the mosaic, a curious thought crossed her mind - how many different ways could these tiles be arranged to fill a row of a specific length? Intrigued, she examined the plaque next to the artwork, and much to her delight, it contained a mathematical problem similar to her own pondering.\n\nThe problem stated that using a combination of the grey square tiles and the oblong tiles of red, green, and blue, it was possible to tile a row measuring five units in length in exactly fifteen different ways. Lily's eyes sparkled with excitement as she pondered this intriguing puzzle. She imagined herself meticulously rearranging the tiles in a multitude of patterns, determined to uncover the hidden secrets of this fascinating world.\n\nThe more she delved into the problem, the deeper she fell into a world of endless possibilities. Lily spent hours constructing various combinations and striving to discover patterns within the numbers. As she lost herself in the mathematical maze, she began to realize the powerful connection between shapes, colors, and numbers.\n\nDays turned into weeks, and weeks turned into months as Lily tirelessly explored the intricacies of the problem. She charted her findings, documenting every observation with zeal. As she immersed herself in the study, Lily not only solved the mystery of filling a row measuring ten units but also twenty-five units in length.\n\nHowever, with each puzzle she solved, her curiosity grew. The plaque had ignited an insatiable thirst for knowledge in Lily, compelling her to seek an even grander challenge. She wondered - how many different ways could the tiles be arranged to fill a row measuring fifty units in length?\n\nTo answer this question, Lily realized she needed to push the boundaries of her understanding further. The mysterious mosaic had become a metaphorical gateway to exploration, spurring her towards greater mathematical horizons. With a renewed determination, Lily delved into her studies, eager to uncover the hidden patterns and secrets of tiling a row measuring fifty units.\n\nAnd so, the saga of Lily and her mathematical quest continues. As she dives deeper into the realm of numbers and patterns, she wonders if her fervent search for solutions will lead her to conquer this ultimate mathematical challenge.\n\nDear reader, can you help Lily? How many ways can a row measuring fifty units in length be tiled?"}, {"id": 121, "euler_id": 121, "title": "Disc game prize fund", "problem": "A bag contains one red disc and one blue disc. In a game of chance a player takes a disc at random and its colour is noted. After each turn the disc is returned to the bag, an extra red disc is added, and another disc is taken at random.\nThe player pays \u00a31 to play and wins if they have taken more blue discs than red discs at the end of the game.\nIf the game is played for four turns, the probability of a player winning is exactly 11/120, and so the maximum prize fund the banker should allocate for winning in this game would be \u00a310 before they would expect to incur a loss. Note that any payout will be a whole number of pounds and also includes the original \u00a31 paid to play the game, so in the example given the player actually wins \u00a39.\nFind the maximum prize fund that should be allocated to a single game in which fifteen turns are played.", "solution": "2269", "difficulty": 35, "story": "Once upon a time, in the small town of Arithmania, there lived a diligent banker named Benjamin. Benjamin was not your typical banker; he had a bit of a wild streak and a love for games. It was this love for games that led him to organize an annual contest called \"The Game of Color.\"\n\nNow, the Game of Color was no ordinary game. It involved a large wooden box with two compartments. One compartment held a red disc, and the other held a blue disc. Each player would take turns picking a disc from the box, noting its color, and returning it back inside. However, Benjamin had added a twist to the game.\n\nAfter each turn, he would add an extra red disc into the box, making the odds of picking a red disc higher each time. But that didn't deter the townsfolk from playing. In fact, they eagerly participated, for the player who ended up with more blue discs at the end would win the game and receive a prize.\n\nThe game was a great success, and people from all over Arithmania flocked to participate. But Benjamin was a clever banker, and he wanted to ensure that the prize fund he allocated for each game was not too high, as he didn't want to incur a loss. So, he did some calculations.\n\nHe learned that if the game was played for just four turns, the probability of winning was exactly 11/120. With this information, he decided to allocate a maximum of \u00a310 for the prize fund, which included the original \u00a31 that each player paid to join the game. That way, he would never expect to lose money.\n\nBenjamin was pleased with his calculations, but he couldn't help but wonder: what if he decided to extend the game? What would be the maximum prize fund he should allocate if the game was played for fifteen turns? He contemplated this as he prepared for the next round of the Game of Color.\n\nAs the day of the game arrived, the townsfolk gathered at the central square. They chatted excitedly, whispering about strategies and probabilities. Benjamin, wearing his top hat and waving his cane, addressed the crowd.\n\n\"Ladies and gentlemen, I am thrilled to have so many of you participating in the Game of Color today,\" he announced jovially. \"However, as the game grows longer, I must ask myself: what is the maximum prize fund that should be allocated if the game is played for fifteen turns?\"\n\nThe crowd fell silent, intrigued by Benjamin's question. They looked at one another, contemplating their own answers. What would be the maximum prize fund? Could they calculate it precisely, just like Benjamin had done for the four-turn game?\n\nAnd so, the game began, but as the townsfolk concentrated on picking their discs, their minds were also consumed by that lingering question: What is the maximum prize fund that should be allocated if the Game of Color is played for fifteen turns?\n\nAs they played, each player hoped to win the game and claim their prize. But deep down, they also wanted to solve the mathematical puzzle that Benjamin had presented. Would they be able to find the answer before the fifteenth turn? Only time would tell.\n\nAnd as the game went on, the tension rose in Arithmania. Who would triumph in the Game of Color? And most importantly, what would be the maximum prize fund for the fifteen-turn game? As the townsfolk anticipated the answers, they looked to their banker with curiosity and wonder.\n\nReader, can you solve the mathematical problem and tell us the maximum prize fund that should be allocated if the Game of Color is played for fifteen turns?"}, {"id": 188, "euler_id": 188, "title": "The hyperexponentiation of a number", "problem": "The hyperexponentiation or tetration of a number a by a positive integer b, denoted by a\u2191\u2191b or ba, is recursively defined by:\na\u2191\u21911 = a,\na\u2191\u2191(k+1) = a(a\u2191\u2191k).\n\nThus we have e.g. 3\u2191\u21912 = 33 = 27, hence 3\u2191\u21913 = 327 = 7625597484987 and 3\u2191\u21914 is roughly 103.6383346400240996*10^12.\nFind the last 8 digits of 1777\u2191\u21911855.", "solution": "95962097", "difficulty": 35, "story": "Once upon a time in the Kingdom of Numeria, there lived a young mathematician named Ethan. Ethan had always been fascinated by numbers. He spent countless hours poring over equations, formulas, and mathematical concepts. One day, while exploring the library in the old castle, he stumbled upon a dusty tome that promised to reveal the mysteries of hyperexponentiation, a concept he had heard whispered among fellow mathematicians. Intrigued, Ethan began to read.\n\nThe book spoke of a mystical power hidden within numbers, a power that could only be unlocked through hyperexponentiation. It explained that by raising a number to itself multiple times, one could unleash an unimaginable force, known as tetration. The book gave an example: 3\u2191\u21912, which equaled 3 to the power of 3, seemingly simple yet profound. Curiosity consumed Ethan as he leafed through the pages, eager to uncover more.\n\nDays turned into weeks as Ethan delved deeper into the mysteries of hyperexponentiation. The book revealed the recursive nature of the concept. It stated that to compute a\u2191\u2191(k+1), one must multiply the number 'a' by itself raised to the 'k'th power. The examples grew more complex with each page, leaving Ethan in a state of awe but also a burning desire to explore further.\n\nEthan's fascination soon turned into an obsession. He began feverishly solving equations, trying to quench his thirst for knowledge. He spent sleepless nights calculating the tetration of various numbers, losing himself in a world where numerical intricacies reigned supreme. The more he studied, the more he realized the immense power hidden within this mathematical realm.\n\nOne morning, while sipping tea in the courtyard of his cottage, Ethan stumbled upon a question that would change his life forever. The question was posed by an ancient sage who had mastered the art of hyperexponentiation:\n\n\"What are the last 8 digits of 1777\u2191\u21911855?\" \n\nEthan's mind spun with possibilities as he contemplated the question. He knew that solving it would require all his knowledge and skills. The tale of the mathematician who could unravel this puzzle would be forever etched in the annals of history. Determined, Ethan began his quest.\n\nDays turned into months as Ethan tirelessly worked on solving the enigma. His cottage was cluttered with piles of papers, covered in equations and calculations. He sought the wisdom of wise scholars and mathematicians across the kingdom, but none could provide the answer. The task seemed insurmountable, but Ethan refused to give up.\n\nAs he entered his final week of attempting to solve the problem, a thought struck Ethan. In a moment of clarity, he realized that he had been so focused on finding the solution that he had lost sight of the wonders of mathematics itself. The joy of discovery had been overshadowed by the weight of his ambitions.\n\nWith renewed purpose, Ethan decided to step back from the problem and take a different approach. He began to see the beauty in the mathematical journey, rather than simply seeking the destination. Each calculation he made, each equation he solved, was a triumph in itself. The process became the reward.\n\nAnd so, dear reader, I leave you with this question:\n\nWhat are the last 8 digits of 1777\u2191\u21911855?\n\nAre you ready to embark on your own mathematical adventure?"}, {"id": 191, "euler_id": 191, "title": "Prize Strings", "problem": "A particular school offers cash rewards to children with good attendance and punctuality. If they are absent for three consecutive days or late on more than one occasion then they forfeit their prize.\nDuring an n-day period a trinary string is formed for each child consisting of L's (late), O's (on time), and A's (absent).\nAlthough there are eighty-one trinary strings for a 4-day period that can be formed, exactly forty-three strings would lead to a prize:\nOOOO OOOA OOOL OOAO OOAA OOAL OOLO OOLA OAOO OAOA\nOAOL OAAO OAAL OALO OALA OLOO OLOA OLAO OLAA AOOO\nAOOA AOOL AOAO AOAA AOAL AOLO AOLA AAOO AAOA AAOL\nAALO AALA ALOO ALOA ALAO ALAA LOOO LOOA LOAO LOAA\nLAOO LAOA LAAO\nHow many \"prize\" strings exist over a 30-day period?", "solution": "1918080160", "difficulty": 35, "story": "Once upon a time in the small town of Numeria, there was a school that valued good attendance and punctuality above all else. The headmaster, Mr. Mathematicus, believed that these qualities were pillars of success and rewarded the students accordingly. Every month, he would announce the names of the children who had maintained perfect attendance and never been late. These fortunate students received a generous cash prize for their dedication.\n\nOne student who was particularly eager to win the prize was Amelia. She was a bright and diligent girl, determined to achieve academic success. Amelia knew that her parents could not afford to buy her new books or gadgets. So, winning the cash reward was her only chance to fulfill her dreams.\n\nAmelia was fully aware of the strict rules set by Mr. Mathematicus. If a student was absent for three consecutive days or arrived late on more than one occasion, their chance of winning the prize would be forfeited. Knowing the consequences, she decided to craft a plan to ensure her perfect attendance and punctuality over the next 30 days.\n\nShe spent hours pondering over the possibilities, considering all the different combinations of days that could pass. A trinary string seemed to be the perfect way to represent her attendance in a concise and organized manner. The strings consisted of three characters - L for being late, O for being on time, and A for being absent.\n\nAmelia sat at her desk, surrounded by sheets of paper filled with trinary strings. She carefully calculated the number of possible combinations for a 4-day period - a total of 81 strings. However, only 43 of them would lead to the coveted prize.\n\nAs days turned into weeks, Amelia stuck to her plan religiously. She rose early each morning, determined to never be late. She paid meticulous attention to her health, determined not to fall sick and be absent from school. Each day, she added another symbol to her trinary string, as a visual representation of her commitment.\n\nAmelia felt a sense of pride and accomplishment as the weeks passed by, and she was able to maintain her perfect attendance and punctuality. The strings grew longer, symbolizing her dedication and resilience.\n\nWith only a few days left before the end of the month, Amelia eagerly anticipated the moment of triumph. She could already feel the weight of the cash prize in her hands, ready to make her dreams come true.\n\nHowever, fate had other plans in store for her. Just as Amelia was about to achieve her goal, a sudden illness struck, rendering her unable to attend school for three consecutive days. Her perfect attendance now tarnished, Amelia felt her dreams slipping away.\n\nNow, at the end of the month, as Amelia looks at the trinary strings that represented her journey, she wonders - How many \"prize\" strings exist over a 30-day period? Amelia knew she had fallen short this time, but her burning curiosity remained. She hopes that someone, somewhere, can unravel the mathematical problem and give her the answer she seeks.\n\nAnd so, dear reader, can you solve the puzzle Amelia presents? How many \"prize\" strings exist over a 30-day period?"}, {"id": 243, "euler_id": 243, "title": "Resilience", "problem": " \nA positive fraction whose numerator is less than its denominator is called a proper fraction.\nFor any denominator, d, there will be d\u22121 proper fractions; for example, with d\u2009=\u200912:1/12 , 2/12 , 3/12 , 4/12 , 5/12 , 6/12 , 7/12 , 8/12 , 9/12 , 10/12 , 11/12 .\n\nWe shall call a fraction that cannot be cancelled down a resilient fraction.\nFurthermore we shall define the resilience of a denominator, R(d), to be the ratio of its proper fractions that are resilient; for example, R(12) = 4/11 .\nIn fact, d\u2009=\u200912 is the smallest denominator having a resilience R(d) < 4/10 .\nFind the smallest denominator d, having a resilience R(d) < 15499/94744 .", "solution": "892371480", "difficulty": 35, "story": "Once upon a time, in a small village at the base of the majestic Mathemountain, there lived a young mathematician named Eliza. Eliza was known throughout the village for her exceptional problem-solving skills and her insatiable desire to unravel the mysteries of numbers.\n\nOne sunny morning, as Eliza walked through the village square, she noticed a group of children huddled together, bewildered and puzzled. Curiosity getting the better of her, she approached them and asked what was amiss.\n\nOne of the children, Jacob, spoke up. \"Eliza, we're trying to solve a peculiar math problem, but it seems impossible.\"\n\nIntrigued, Eliza invited the children to share the problem with her. As Jacob began to explain, Eliza listened attentively.\n\n\"We learned about proper fractions in class today,\" Jacob began. \"And our teacher spoke about resilience. She mentioned a function called R(d), where d represents the denominator of a fraction. The function measures the resilience of a denominator, which is the ratio of its proper fractions that cannot be cancelled down. We're supposed to find the smallest denominator, d, that has a resilience lower than 15499/94744.\"\n\nEliza's mind started buzzing with excitement. She realized that this problem was quite a unique challenge, yet somehow her mathematical intuition stirred within her.\n\nAfter brainstorming for hours, Eliza finally had an idea. She thanked the children for presenting the problem and ran back to her cottage, eager to put her plan into action.\n\nIn her tiny study, Eliza gathered an array of mathematical tools and began to work. She scribbled equations, drew diagrams, and traversed through countless mathematical possibilities. Days turned into weeks, and still, Eliza persisted, her determination unwavering.\n\nEventually, as Eliza was about to give up and admit defeat, she suddenly stumbled upon a remarkable pattern hidden within the numbers. An epiphany washed over her, flooding her mind with newfound clarity.\n\nEliza had discovered a groundbreaking method to determine the smallest denominator that met the given criteria. The implications were remarkable, as this method could revolutionize the field of mathematics.\n\nBut now she faced a dilemma. Eliza knew that sharing her discovery would benefit the village and the field of mathematics as a whole. However, she also knew that revealing the solution directly would deprive others of the opportunity to experience the joy of discovery.\n\nShould Eliza share her findings openly, allowing her peers to bask in the glory of solving the problem themselves, or should she keep her discoveries a secret, allowing others the chance to uncover the secrets of numbers on their own?\n\nThe decision weighed heavily on Eliza's heart. She pondered day and night, wrestling with her moral compass. On one hand, sharing her findings would inspire others to pursue the beauty of mathematics. On the other hand, it would rob them of the exhilarating feeling of finding their own solution.\n\nAnd so, dear reader, I leave you with this question: What choice do you think Eliza made? Will she choose selflessness over personal glory? Will she unlock the mysteries of numbers for all to see, or will she keep them tucked away, waiting for those willing to embark on their own number-filled adventures?\n\nSolve this mathematical problem yourself, dear reader, and perhaps you will find the answer hidden within your own heart and mind."}, {"id": 277, "euler_id": 277, "title": "A Modified Collatz sequence", "problem": "\nA modified Collatz sequence of integers is obtained from a starting value a1 in the following way:\n\nan+1=an3 if an is divisible by 3. We shall denote this as a large downward step, \"D\".\n\nan+1=4an+23 if an divided by 3 gives a remainder of 1. We shall denote this as an upward step, \"U\".\n\n\nan+1=2an\u221213 if an divided by 3 gives a remainder of 2. We shall denote this as a small downward step, \"d\".\n\n\nThe sequence terminates when some an=1.\n\n\nGiven any integer, we can list out the sequence of steps.\nFor instance if a1=231, then the sequence {an}={231,77,51,17,11,7,10,14,9,3,1} corresponds to the steps \"DdDddUUdDD\".\n\n\nOf course, there are other sequences that begin with that same sequence \"DdDddUUdDD....\".\nFor instance, if a1=1004064, then the sequence is DdDddUUdDDDdUDUUUdDdUUDDDUdDD.\nIn fact, 1004064 is the smallest possible a1>106 that begins with the sequence DdDddUUdDD.\n\n\nWhat is the smallest a1>1015 that begins with the sequence \"UDDDUdddDDUDDddDdDddDDUDDdUUDd\"?\n", "solution": "1125977393124310", "difficulty": 35, "story": "Once upon a time in the land of Numeria, there lived a young girl named Lila. Lila had always been fascinated by numbers and patterns. She loved spending hours at her desk, lost in the world of equations and theorems. Her bedroom walls were adorned with diagrams and formulas, and books on mathematics took up most of the space around her.\n\nOne day, as Lila was exploring an old library, she stumbled upon a dusty book that seemed to have been untouched for ages. Curiosity got the better of her, and she opened the book, revealing a collection of ancient mathematical secrets. Lila's eyes sparkled with excitement as she began to read.\n\nAmong the pages was a story of a forgotten sequence called the \"Collatz sequence.\" It intrigued her instantly. The story told of how this sequence could be modified in different ways, depending on certain rules.\n\nLila's mind was set ablaze with questions. She wondered about the various possibilities and what those sequences might reveal. The idea that one could predict the outcome of a starting number fascinated her. But the story did not end there. Tucked away in the corner of a page was a challenge\u2014a mathematical riddle that required solving the smallest starting number for a particular sequence.\n\nLila's heart raced as she read the challenge. She felt a surge of determination and set out to solve this seemingly impossible problem. She analyzed the given sequence in her mind, trying to decode the pattern hidden within it.\n\nDays turned into weeks, and weeks into months, as Lila delved deeper into the problem. She filled countless notebook pages with equations, diagrams, and notes, trying to make sense of it all. But the answer eluded her. It seemed as though the sequence and the solution were locked away in an impenetrable fortress.\n\nUndeterred, Lila decided to seek guidance from an old mathematician who lived high up in the mountains. The journey was arduous, with steep paths and treacherous terrain, but Lila's determination knew no bounds. She climbed the mountains, fueled by her relentless curiosity and the passion to solve the mathematical mystery.\n\nFinally, she reached the mathematician's cottage. He appeared wise and weathered, with deep lines etched on his face. Lila explained her quest and showed him the challenge. The mathematician listened intently, nodding his head in understanding.\n\nHe spoke of the wonders of the Collatz sequence\u2014a sequence that had puzzled mathematicians for centuries. He mentioned how it had led to the discovery of many mathematical truths and even sparked heated debates among scholars.\n\nAs Lila sat captivated by the mathematician's words, he pulled out an old parchment and began scribbling equations. His eyes sparkled with excitement as he demonstrated how the sequence could be manipulated, the numbers dancing on the page.\n\nBut, just as Lila thought she was about to uncover the answer, the mathematician paused. He turned to her and said, \"Lila, my dear, I have shown you the path, but the final destination is yours to discover. The smallest starting number that begins with the sequence you mentioned... that lies within you.\"\n\nLila's eyes widened with realization. The journey she had embarked upon was not just about solving a riddle\u2014it was a test of her resilience, patience, and unwavering belief in the power of mathematics.\n\nWith newfound determination, Lila thanked the mathematician and made her way back down the mountains. She returned to her desk, her mind buzzing with a sense of purpose she had never felt before. The answers might be elusive, but she knew that deep within her, the solution lay waiting.\n\nAnd so, Lila continued to explore the riddle, pouring her heart and soul into her calculations. Days turned into months, months into years, but she never gave up. She knew that the smallest starting number that began with the given sequence had a purpose\u2014a hidden message that only the most dedicated mathematicians could decipher.\n\nNow, dear reader, I ask you: Can you solve the mystery that has evaded Lila and countless other mathematicians? What is the smallest starting number that begins with the sequence \"UDDDUdddDDUDDddDdDddDDUDDdUUDd\"?\n\nThe challenge awaits you, and the answer lies within the realm of numbers."}, {"id": 288, "euler_id": 288, "title": "An enormous factorial", "problem": "\nFor any prime p the number N(p,q) is defined by\nN(p,q) = \u2211n=0 to q Tn*pn with Tn generated by the following random number generator:\n\nS0 = 290797\nSn+1 = Sn2 mod 50515093\nTn = Sn mod p\n\n\nLet Nfac(p,q) be the factorial of N(p,q).\nLet NF(p,q) be the number of factors p in Nfac(p,q).\n\n\nYou are given that NF(3,10000) mod 320=624955285.\n\n\nFind NF(61,107) mod 6110", "solution": "605857431263981935", "difficulty": 35, "story": "Once upon a time in the small village of Mathlandia, there lived a young man named Ethan. Ethan was known for his immense love for numbers, equations, and all things mathematical. He spent his days studying complex formulas and unraveling the mysteries behind them. One day, while immersed in his world of equations, he stumbled upon a peculiar problem.\n\nEthan's eyes widened as he read the problem aloud. \"For any prime p, the number N(p,q) is defined by a random number generator.\" As he continued to delve deeper into the problem, he realized the significance of NF(p,q) and its connection to the factorial of N(p,q). But it was the final line that caught his attention.\n\n\"You are given that NF(3,10000) mod 320 equals 624955285. Find NF(61,107) mod 6110.\"\n\nCuriosity consumed Ethan's mind. What was the significance of these numbers? What was the mystery behind NF(61,107) mod 6110? Determined to uncover the truth, he decided to embark on a journey that would take him beyond the realms of his imagination.\n\nEthan left Mathlandia, venturing into uncharted territories, seeking wisdom and guidance from the great mathematicians of the world. He walked through bustling cities, crossed treacherous mountains, and sailed across vast oceans, leaving no stone unturned in his quest for answers.\n\nFinally, he arrived at the ancient Library of Numbers, said to hold the wisdom of the world's greatest mathematicians throughout history. The worn pages of countless books filled the shelves, waiting to unveil their secrets. Among these countless manuscripts, Ethan found a book that caught his eye. Dusting it off, he read the title, \"The Lost Equation.\"\n\nWith bated breath, he began flipping through the delicate pages. It contained profound theories, complex formulas, and stories of mathematical wonders. It was a treasure trove for any lover of numbers. But as he delved deeper into the book, he stumbled upon an intriguing passage.\n\n\"It is said that hidden within the fabric of reality lies a code waiting to be cracked, a secret language the universe communicates in. Only through the perfect amalgamation of numbers and equations can this code be unveiled. The answers we seek, nestled at the core of the most complex problems, can lead us to profound discoveries.\"\n\nEthan's heart raced. Could it be that the mathematical problem he had stumbled upon was the key to unlocking the secrets of the universe itself? The numbers danced before his eyes, their patterns forming intricate designs in his mind. It was as if the mathematical problem had opened a door to a new realm of understanding.\n\nAs Ethan pondered the implications of his findings, he couldn't help but feel a sense of urgency. The fate of the village of Mathlandia and its inhabitants hung in the balance. The mathematical problem he had come across was no ordinary puzzle. It held the potential to unveil the mysteries of the cosmos, to change the way people saw the world around them.\n\nEthan returned to Mathlandia with a newfound purpose. Armed with the knowledge he had gained during his travels, he shared his findings with the village elders, urging them to explore the depths of the problem. They assembled a team of brilliant mathematicians and scientists, and together, they delved into the mathematical enigma.\n\nDays turned into weeks, as the team tirelessly worked to solve the problem. They analyzed every aspect, scrutinized every detail, hoping to uncover the hidden truths within. It was a race against time, for the fate of Mathlandia and the limitless potential locked within the mathematical problem depended on their success.\n\nBut as their determination grew, so did the questions. What was the significance of NF(61,107) mod 6110? And how did it connect to the hidden code within the fabric of reality? The team's efforts became a delicate dance of mathematical brilliance, their minds intertwining in pursuit of a greater understanding.\n\nAnd now, dear reader, the question falls upon you. Can you solve the riddle that has consumed the minds of the mathematicians of Mathlandia? Can you find NF(61,107) mod 6110 and unravel the greater mysteries that lie within? The fate of Mathlandia and the secrets of the universe await your answer."}, {"id": 297, "euler_id": 297, "title": "Zeckendorf Representation", "problem": "Each new term in the Fibonacci sequence is generated by adding the previous two terms.\nStarting with 1 and 2, the first 10 terms will be: 1, 2, 3, 5, 8, 13, 21, 34, 55, 89.\nEvery positive integer can be uniquely written as a sum of nonconsecutive terms of the Fibonacci sequence. For example, 100 = 3 + 8 + 89.\nSuch a sum is called the Zeckendorf representation of the number.\nFor any integer n>0, let z(n) be the number of terms in the Zeckendorf representation of n.\nThus, z(5)\u2009=\u20091, z(14)\u2009=\u20092, z(100)\u2009=\u20093 etc.\nAlso, for 0<n<106, \u2211\u2009z(n)\u2009=\u20097894453.\nFind \u2211\u2009z(n) for 0<n<1017.", "solution": "2252639041804718029", "difficulty": 35, "story": "Once upon a time in the land of Numerica, there lived a diligent young mathematician named Emily. She was known for her incredible talent for solving complex mathematical problems, and people from far and wide sought her expertise. But deep within her heart, there was a burning desire to unravel one particular mystery that had fascinated her since she was a child\u2014the Fibonacci sequence.\n\nIt was a sunny day when a messenger arrived at Emily's door, inviting her to the grand Mathematical Symposium held in the majestic city of Arithmetica. This Symposium was where renowned mathematicians gathered to present their remarkable discoveries. Emily knew this was her chance to find answers to her unanswered questions about the Fibonacci sequence.\n\nExcitedly, Emily packed her bag and made her way to Arithmetica. As she walked through the city's cobbled streets, she marveled at the intricate architecture and the passion for mathematics that seemed to permeate the air.\n\nArriving at the Symposium, Emily was greeted by a bustling crowd, all eagerly discussing mathematical problems. She joined them, engaging in discussions about prime numbers, geometry, and probability. But her mind remained fixated on the enigma she had come to solve.\n\nOne evening, as the sun began its descent, Emily stumbled upon a group of mathematicians engrossed in conversation. Curiosity piqued, she moved closer, and there, she heard them whispering about Zeckendorf's representation of numbers\u2014the very topic that haunted her thoughts.\n\nShe listened intently as they discussed how each positive integer could be uniquely written as a sum of nonconsecutive terms of the Fibonacci sequence. It was as if a light had suddenly illuminated her mind. Could this knowledge hold the key to unlocking the secrets of the Fibonacci sequence?\n\nEmily spent the night poring over ancient texts and manuscripts, studying the connections between Zeckendorf's representation and the Fibonacci sequence. Each piece of information she discovered fueled her curiosity even more. She found herself captivated by the idea that the Fibonacci sequence, which seemed so simple on the surface, held incredible complexities and possibilities.\n\nDays turned into weeks as Emily delved deeper into her research. Her passion drove her to explore the connection between Zeckendorf's representation and various mathematical phenomena. She found herself lost in a world of numbers, solving the puzzles that only her mind could comprehend.\n\nFinally, after months of tireless dedication, Emily stood at the precipice of a breakthrough. She could feel the pieces coming together and the answers inching closer. The moment had arrived to present her findings at the grand Mathematical Symposium.\n\nAs Emily took the stage, she looked out into the sea of expectant faces. She would share her discoveries with the world and forever change the way mathematicians approached the Fibonacci sequence. But as she began speaking, she realized that there was still one piece missing\u2014an elusive final numerical challenge that needed to be overcome.\n\nAnd so, Emily continued her quest to solve the mathematical problem that had consumed her for so long. With every passing day, her excitement grew, and her determination never wavered. Though the question lingered unanswered, Emily knew that it was just a matter of time before she discovered the solution.\n\nAnd now, dear reader, the torch is passed on to you. Can you be the one to solve the mathematical problem that eluded Emily? Can you find the sum of the Zeckendorf representations for all the numbers between 0 and 1017? Step into the world of Numerica, traverse the joyous realm of Fibonacci, and unlock the secrets that lie within the numbers. The challenge awaits."}, {"id": 303, "euler_id": 303, "title": "Multiples with small digits", "problem": "\nFor a positive integer n, define f(n) as the least positive multiple of n that, written in base 10, uses only digits \u2264 2.\nThus f(2)=2, f(3)=12, f(7)=21, f(42)=210, f(89)=1121222.\nAlso, \u2211n=1100f(n)n=11363107.\n\nFind \u2211n=110000f(n)n.\n", "solution": "1111981904675169", "difficulty": 35, "story": "Once upon a time, in the land of Numeria, there was a young mathematician named Leo. Leo's love for numbers was unmatched, and he spent most of his days exploring the intricacies of mathematics. His curiosity often led him to discover new and exciting problems, but one particular puzzle had him enthralled \u2013 the mystery of f(n).\n\nIn Numeria, f(n) was defined as the least positive multiple of n that, when written in base 10, used only digits \u2264 2. Leo couldn't help but wonder about the power hidden within such a simple problem. He spent countless hours pondering over it, pouring through books and searching the depths of his own imagination to seek a solution.\n\nOne day, while Leo was lost in his thoughts at the Royal Library of Numeria, he stumbled upon an old book. Its faded cover read, \"The Chronicles of F(n).\" Intrigued, Leo opened the tome and found himself transported to a world where the characters themselves were faced with the enigma of f(n).\n\nAs Leo delved deeper into the mystical pages, he discovered that the people of this world had long been pondering the same mathematical problem. They believed that f(n) held a secret power, capable of transforming their lives forever. The story unfolded before Leo's eyes, immersing him in a dazzling adventure.\n\nIn this world, the inhabitants had built a grand city, known as Numinos, nestled amidst sprawling mountains. Within its majestic walls lived a young girl named Ella, who had a dream to bring prosperity and happiness to her people. Ella had spent her whole life studying the patterns of f(n), hoping to uncover the hidden treasure it held.\n\nElla believed that if she could find the sum of f(n)/n for all positive integers from 1 to 100,000, she could unlock the ultimate power bestowed upon this ancient city. It was said that the mighty forces of Numeria would be unleashed, turning Numinos into a utopia beyond imagination.\n\nThe people of Numinos admired Ella for her determination and offered their support. They worked relentlessly to calculate the values of f(n)/n, jotting down numbers on parchment, and forming complex equations. The task was formidable, but they believed that their combined effort would reveal the secret within f(n).\n\nMeanwhile, Leo was captivated by Ella's quest. He saw that she was getting closer to unraveling the mystery of f(n) and decided to help her. Together, they ventured through the enchanting land of Numeria, visiting ancient mathematicians and seeking their wisdom. Through riddles and puzzles, they acquired knowledge to push them forward.\n\nAs they approached the end of their adventurous journey, Leo and Ella discovered a hidden cave, deep in the heart of Numeria's highest peak. Etched on a stone wall, they found the answer they had been seeking \u2013 the sum of f(n)/n for all positive integers from 1 to 100,000.\n\nBut as Leo reached out to uncover the last number, the story abruptly ended. Their quest was incomplete, and they were left standing at the precipice of uncertainty. Leo's heart sank as he realized that the final solution eluded them, and his mind whirred with endless possibilities.\n\nNow, dear reader, the question rests with you. Can you solve the enigma that Leo and Ella sought to unravel? Can you find the sum of f(n)/n for all positive integers from 1 to 100,000? As their journey remains unfinished, will you be the one to unveil the hidden power within f(n) and fulfill the dreams of the people of Numinos?\n\nThe future of Numeria, Leo, and Ella's adventure lies in your hands."}, {"id": 317, "euler_id": 317, "title": "Firecracker", "problem": "\nA firecracker explodes at a height of 100 m above level ground. It breaks into a large number of very small fragments, which move in every direction; all of them have the same initial velocity of 20 m/s.\n\n\nWe assume that the fragments move without air resistance, in a uniform gravitational field with g=9.81 m/s2.\n\n\nFind the volume (in m3) of the region through which the fragments move before reaching the ground. \nGive your answer rounded to four decimal places.\n", "solution": "1856532.8455", "difficulty": 35, "story": "Once upon a time, in a small village nestled among the rolling hills, there lived a young girl named Luna. Luna was known throughout the village for her radiant smile and her insatiable curiosity. Her heart was brimming with a love for adventure, always seeking new ways to explore and unravel the mysteries of the world around her.\n\nOne blissful summer evening, as the sun dipped below the horizon, the villagers gathered at the town square for the annual summer festival. The crowd buzzed with anticipation as vendors sold candied apples and cotton candy, and laughter echoed through the air. Luna, with her wide-eyed wonder, couldn't wait to witness the grand festival spectacle: an impressive firework display.\n\nAs the twilight sky darkened, anticipation grew. Suddenly, a brilliant explosion erupted in the air, casting a glorious tapestry of colors across the night canvas. Fireworks exploded one after another, each more breathtaking than the last. But it was the final firework that captured Luna's attention the most.\n\nA firecracker exploded at a majestic height of 100 meters above level ground. It shattered into countless tiny fragments, each racing downward with an initial velocity of 20 meters per second. Luna's eyes widened in awe as she marveled at the spectacular fragments whizzing in every direction, their trails of light painting the sky with a mesmerizing display.\n\nUnbeknownst to Luna, her heart skipped a beat as she witnessed this wondrous spectacle. Her curious mind started to ponder the trajectory of those fragments. How far would they travel? What path would they follow before finally finding solace in the embrace of the ground?\n\nLuna's thoughts swirled with wonder and calculation, attempting to unravel the mysteries unfolding above her. She knew that these fragments moved in a uniform gravitational field with g=9.81 meters per second squared, and without any air resistance. She yearned to know the exact volume of the region these tiny heavenly messengers would traverse before reaching their earthly destination.\n\nAs the firework display came to a close, Luna was left with a burning question that sparked her craving for knowledge. The problem echoed in her mind as she watched the last few fragments dissolve into the night, their trails fading away like whispered secrets.\n\nNow, dear reader, can you solve the mathematical riddle that captivated Luna's inquisitive mind? Can you uncover the volume, in cubic meters, of the region through which these fragments moved before returning to the comforting touch of the earth below? Let your imagination soar, your calculations unfold, and may Luna's quest for knowledge ignite your own thirst for answers."}, {"id": 333, "euler_id": 333, "title": "Special partitions", "problem": "All positive integers can be partitioned in such a way that each and every term of the partition can be expressed as 2ix3j, where i,j \u2265 0.\nLet's consider only such partitions where none of the terms can divide any of the other terms.\nFor example, the partition of 17 = 2 + 6 + 9 = (21x30 + 21x31 + 20x32) would not be valid since 2 can divide 6. Neither would the partition 17 = 16 + 1 = (24x30 + 20x30) since 1 can divide 16. The only valid partition of 17 would be 8 + 9 = (23x30 + 20x32).\nMany integers have more than one valid partition, the first being 11 having the following two partitions.\n11 = 2 + 9 = (21x30 + 20x32)\n11 = 8 + 3 = (23x30 + 20x31)\nLet's define P(n) as the number of valid partitions of n. For example, P(11) = 2.\nLet's consider only the prime integers q which would have a single valid partition such as P(17).\nThe sum of the primes q <100 such that P(q)=1 equals 233.\nFind the sum of the primes q <1000000 such that P(q)=1.", "solution": "3053105", "difficulty": 35, "story": "Once upon a time, on a serene island called Numeria, there lived a brilliant mathematician, Professor Archibald. Professor Archibald was known far and wide for his innovative ways of applying mathematics to solve real-world problems. He had dedicated his life to unraveling the mysteries hidden in numerical patterns. \n\nOne peaceful morning, as Professor Archibald strolled along the sandy beach, he stumbled upon an old, tattered scroll that piqued his interest. Opening it cautiously, he discovered a mathematical problem that intrigued him greatly. It was a challenge that he couldn't resist solving.\n\nThe problem stated that all positive integers could be partitioned into terms represented by the equation 2^i \u00d7 3^j, where i and j are non-negative integers. Yet, the terms of each partition should not be able to divide any other term within the same partition. The problem also posed a query about the count of valid partitions for prime numbers.\n\nProfessor Archibald's mind raced with excitement as the possibilities swirled within his thoughts. He couldn't wait to dive into solving this captivating problem. The island of Numeria became a hushed haven of mathematical pondering as he conducted vigorous research, examining countless numbers and trying to unravel the patterns concealed within partitions.\n\nDays turned into weeks, and weeks turned into months, but Professor Archibald's passion did not falter. Every number he encountered presented a fresh challenge, and the solutions he derived were more captivating than the last. However, he soon realized that not all numbers possessed the same number of valid partitions. Some had multiple answers, while others had only one.\n\nThe professor's fascination grew exponentially when he stumbled upon a remarkable group of prime numbers. He encountered a select few whose unique property allowed him to deduce that they held only a single valid partition. Each of these numbers was like a precious gem, shining brightly amidst the mathematical landscape.\n\nAs Professor Archibald delved deeper into the enigma of prime numbers with a sole partition, he noticed a startling pattern emerging. The sum of these unique primes, q, where P(q) equaled 1, was itself significant. For instance, when all the prime numbers below 100 were considered, the sum of such primes equaled 233. It was a beautiful result, opening up endless possibilities and setting Professor Archibald's heart ablaze with curiosity.\n\nBut the question lingered in his mind: What if he explored primes below 1,000,000? How would the sum of such unique primes q change? Would it follow a predictable pattern? And what profound revelations might be hidden within those higher realms of numbers?\n\nAglow with determination, Professor Archibald resolved to unlock the secrets of P(q) = 1 for primes below 1,000,000. He knew that answering this question would not only satisfy his insatiable thirst for knowledge but also contribute to the vast world of mathematics.\n\nAnd so, dear reader, I pose the same question to you. Can you find the sum of the primes q below 1,000,000, where P(q) equals 1? Embark on a journey through the infinite realm of numbers and unravel this captivating mystery that has enraptured Professor Archibald's heart."}, {"id": 343, "euler_id": 343, "title": "Fractional Sequences", "problem": "For any positive integer k, a finite sequence ai of fractions xi/yi is defined by:\na1 = 1/k and\nai = (xi-1+1)/(yi-1-1) reduced to lowest terms for i>1.\nWhen ai reaches some integer n, the sequence stops. (That is, when yi=1.)\nDefine f(k) = n. \nFor example, for k = 20:\n\n\n1/20 \u2192 2/19 \u2192 3/18 = 1/6 \u2192 2/5 \u2192 3/4 \u2192 4/3 \u2192 5/2 \u2192 6/1 = 6\n\n\nSo f(20) = 6.\n\n\nAlso f(1) = 1, f(2) = 2, f(3) = 1 and \u2211\u2009f(k3) = 118937 for 1 \u2264 k \u2264 100.\n\n\nFind \u2211\u2009f(k3) for 1 \u2264 k \u2264 2\u00d7106.\n", "solution": "269533451410884183", "difficulty": 35, "story": "Once upon a time, in the enchanting kingdom of Arithmetica, there lived a young princess named Callista. Callista had always been curious about the magical power of numbers and was known for her sharp mind and mathematical prowess. Her kingdom was governed by a wise king who believed in the power of knowledge and valued intellectual pursuits.\n\nOne fine morning, as Callista strolled through the serene gardens of the palace, she stumbled upon an old, hidden library. Intrigued by the mysterious place, she entered and found herself surrounded by countless books and manuscripts. The princess knew that this discovery was not a mere coincidence but a sign of a greater purpose.\n\nAs she wandered through the labyrinthine shelves, a tattered and dusty tome caught her attention. It was titled \"The Enigma of Sequences.\" Curiosity getting the better of her, Callista blew off the dust and began reading the ancient pages.\n\nTo her astonishment, the book contained a mathematical problem, unlike any she had ever encountered before. It spoke of a sequence of fractions, defined by a unique formula. It stated that for any positive integer k, a finite sequence ai of fractions xi/yi is defined. The princess's eyes widened as she delved deeper into the problem.\n\nAccording to the book, the sequence starts with a simple fraction, **a1 = 1/k**. Each subsequent fraction in the sequence is obtained by taking the previous numerator increased by one, and the previous denominator decreased by one, both reduced to their lowest terms.\n\nThe princess was captivated by the elegance of the problem and its potential applications. She discerned its significance and how it could be used to unlock hidden numerical patterns. Realizing that solving this timeless enigma could impact her kingdom positively, she decided to dedicate herself to finding its solution.\n\nDays turned into weeks, and weeks into months, as Callista immersed herself in the labyrinthine depths of mathematics. With every passing day, her understanding of the problem grew, and new ideas blossomed in her mind. She scribbled calculations and theories onto parchment, finding solace in the beauty of numbers.\n\nAs she continued her arduous journey, the young princess discovered that the sequence would stop when the denominator became 1, thus reaching an integer value. Each positive integer value, n, obtained by this stopping point, defined the function f(k) = n.\n\nWith an indomitable spirit, Callista solved several examples to test her newfound knowledge. For instance, when k was equal to 20, she traced the fascinating sequence. Starting with 1/20, it progressed to 2/19, and further onwards to 6, where it eventually halted. Knowing this progress, Callista deduced that f(20) is equal to 6.\n\nThe more examples she solved, the greater her understanding of the function's behavior. She even discovered remarkable connections between f(1), f(2), and f(3), and foresaw the future potential of her newfound knowledge.\n\nHowever, as Callista delved deeper into the mathematical labyrinth, her curiosity grew beyond a single solution. The young princess now craved the challenge of a grander quest \u2013 to find the summation of f(k\u00b3) for all values of k ranging from 1 to 2\u00d710\u2076.\n\nThe implications of this challenge were staggering. Should she succeed, her kingdom could witness a mathematical breakthrough that would revolutionize the understanding of sequences and their hidden patterns. With this newfound determination, Callista embarked on a journey to unlock the minds of mathematical giants who had come before her.\n\nYet amidst all the excitement, she wondered if she alone had the power to solve such a vast and intricate problem. Would her understanding of numbers be enough to unravel the mysteries concealed within this infinite web of fractions? She pondered this as she looked up from the ancient tome and surveyed her surroundings, hoping the library walls would bend space and time to provide her an answer.\n\nDear reader, can you solve this perplexing problem and help Princess Callista unveil the secrets of this enigma? Will you be the one to discover the summation of f(k\u00b3) for 1 \u2264 k \u2264 2\u00d710\u2076? The tale of Arithmetica awaits your brilliant mind to decipher the grand mathematical question bestowed upon you."}, {"id": 349, "euler_id": 349, "title": "Langton's ant", "problem": "\nAn ant moves on a regular grid of squares that are coloured either black or white. \nThe ant is always oriented in one of the cardinal directions (left, right, up or down) and moves from square to adjacent square according to the following rules:\n- if it is on a black square, it flips the colour of the square to white, rotates 90 degrees counterclockwise and moves forward one square.\n- if it is on a white square, it flips the colour of the square to black, rotates 90 degrees clockwise and moves forward one square.\n\nStarting with a grid that is entirely white, how many squares are black after 1018 moves of the ant?\n", "solution": "115384615384614952", "difficulty": 35, "story": "Once upon a time, in a land far, far away, there lived a curious little ant named Oliver. Oliver was not your ordinary ant. He had a penchant for exploration and loved to embark on exciting adventures that took him to uncharted territories. His latest adventure was no different.\n\nOne sunny morning, as Oliver scurried across the lush meadow, he stumbled upon a mysterious grid of squares. Intrigued, he started examining them closely. The squares were either black or white, forming a perfect checkerboard pattern.\n\nWithout a second thought, Oliver decided to navigate his way through the grid, one square at a time. He always followed a cardinal direction and moved from square to adjacent square, hand in paw, feeling the textures of the pattern beneath him.\n\nUnbeknownst to Oliver, this was no ordinary pattern. The colors held secrets, and each move he made would trigger a unique transformation. It was a world where black and white danced together, performing a delicate symphony of rotations and color swaps.\n\nAs Oliver embarked on his journey, a magical force guided him.\n\n\"If you step on a black square, little ant, flip its hue to white, then rotate counterclockwise. Move forward to the next square,\" a gentle voice whispered.\n\nThe curious ant followed these mysterious instructions. With each step he took, Oliver could feel the power of the grid growing stronger within him. Every rotation made him feel more connected to the intricate dance of colors.\n\nConversely, if he stepped on a white square, he was told to flip it to black and rotate clockwise before moving forward. This symmetrical dance was a delicate balance, a mathematical harmony that fascinated Oliver to no end.\n\nDays turned into weeks, and weeks turned into months. Oliver's journey became a test of his endurance and curiosity. His tiny ant legs carried him across countless squares, and with each step, he marveled at the kaleidoscope of patterns forming behind him.\n\nOne day, as the sun began to set and cast long shadows across the grid, Oliver reached an astonishing revelation. There, in the heart of the pattern, he found a cluster of black squares, untouched by his steps. These squares were like rare gems, waiting to be discovered.\n\nOliver's heart raced with excitement. What could be hidden in these untouched black squares? He yearned to explore further, to uncover the story they held. But before he could continue, a question loomed in his mind.\n\nHow many squares had turned black after his 1,018 moves? Could it be a mere handful or an army of ebony squares? The answer held the key to unraveling the mystery of the grid's secrets. With renewed determination, Oliver knew he had to find the solution.\n\nIn that silent moment, as the sun dipped below the horizon, Oliver paused and gazed at the vast expanse of the grid stretching out before him. The question hung in the air, and only the mathematical prowess of the curious reader could provide the answer.\n\nWhat was the final count of black squares after Oliver's 1,018 moves?\n\nAnd so, the story of Oliver, the curious ant, left the reader with a tantalizing puzzle, a riddle hiding within a world of black and white. With bated breath, the reader would have to embark on their own journey of calculations to unravel the secret of the grid's transformations and discover the final count of black squares.\n\nBut dear reader, can you solve this mathematical problem?"}, {"id": 363, "euler_id": 363, "title": "B\u00e9zier Curves", "problem": "A cubic B\u00e9zier curve is defined by four points: P0,P1,P2, and P3.\n\nThe curve is constructed as follows:\nOn the segments P0P1, P1P2, and P2P3 the points Q0,Q1, and Q2 are drawn such that P0Q0P0P1=P1Q1P1P2=P2Q2P2P3=t, with t in [0,1].\nOn the segments Q0Q1 and Q1Q2 the points R0 and R1 are drawn such that\nQ0R0Q0Q1=Q1R1Q1Q2=t for the same value of t.\nOn the segment R0R1 the point B is drawn such that R0BR0R1=t for the same value of t.\nThe B\u00e9zier curve defined by the points P0,P1,P2,P3 is the locus of B as Q0 takes all possible positions on the segment P0P1.\n(Please note that for all points the value of t is the same.)\nFrom the construction it is clear that the B\u00e9zier curve will be tangent to the segments P0P1 in P0 and P2P3 in P3.\nA cubic B\u00e9zier curve with P0=(1,0),P1=(1,v),P2=(v,1), and P3=(0,1) is used to approximate a quarter circle.\nThe value v>0 is chosen such that the area enclosed by the lines OP0,OP3 and the curve is equal to \u03c04 (the area of the quarter circle).\nBy how many percent does the length of the curve differ from the length of the quarter circle?\nThat is, if L is the length of the curve, calculate 100\u00d7L\u2212\u03c02\u03c02\nGive your answer rounded to 10 digits behind the decimal point.", "solution": "0.0000372091", "difficulty": 35, "story": "Once upon a time in the quaint village of Mathendell, there lived a talented young artist named Emma. Emma had a heart full of passion for her craft and an unwavering love for mathematics. Her unique ability to combine the two had earned her the reputation of being the village's \"Mathemagician.\"\n\nOne sunny morning, Emma received a special request from the village mayor. He tasked her with creating a mural that would symbolize the importance of harmony and balance in the community. Emma pondered the challenge, her mind racing with ideas.\n\nAs Emma sat in her studio, sketching and calculating, something caught her eye\u2014a book titled \"The Secrets of B\u00e9zier Curves.\" It piqued her curiosity. Emma had learned about B\u00e9zier curves in her mathematics classes, but she had never fully explored their artistic potential.\n\nDetermined to create a masterpiece, Emma delved into the book, absorbing every page. The mathematics fascinated her\u2014the elegance and precision in the algorithms brought joy to her analytical mind. Suddenly, a spark of inspiration ignited within her.\n\nEmma decided to use a cubic B\u00e9zier curve to transform a simple quarter circle into a work of art. She would meticulously calculate every point, ensuring that the curve embraced the natural shape of a circular harmony. But there was more to this mathematical puzzle than met the eye.\n\nIn order to create the perfect representation of balance, Emma needed to find the value of 'v' that would enclose an area equal to \u03c0/4\u2014the area of the quarter circle.\n\nDays turned into weeks as Emma meticulously labored over her calculations and brush strokes. She devoted herself wholeheartedly, never losing her focus on the intricate beauty of B\u00e9zier curves.\n\nFinally, the day of the unveiling arrived. The village gathered in hushed anticipation as the large curtain fell, revealing Emma's masterpiece. Gasps of awe filled the air as her painting came to life\u2014a harmonious blend of curves, colors, and emotion.\n\nBut as the villagers admired Emma's creation, a question lingered in their minds. By how much did the length of the curve differ from the length of the original quarter circle? Was there a significant difference, or did Emma's mathematical finesse ensure that they were nearly identical?\n\nAs the villagers marveled at Emma's artwork, they contemplated solutions to the mathematical problem. Their own curiosity began to grow, and they yearned to decipher the intricate relationship between Emma's B\u00e9zier curve and the original quarter circle.\n\nSo, dear reader, the question now falls upon you\u2014can you determine by what percentage the length of the curve differs from the length of the quarter circle? Can you unravel the secrets hidden within the dimensions of Emma's masterpiece?\n\nTake a moment and let your mind wander through the realms of mathematics and artistry. Will you be the one to solve the puzzle and enlighten the villagers of Mathendell, or will the answer remain a shimmering enigma?\n\nWe urge you to join our quest for knowledge, uncover the truth, and solve the enigmatic mathematical problem embedded within Emma's remarkable creation. The challenge awaits. Are you ready?"}, {"id": 378, "euler_id": 378, "title": "Triangle Triples", "problem": "Let T(n) be the nth triangle number, so T(n)=n(n+1)2.\nLet dT(n) be the number of divisors of T(n).\nE.g.: T(7)=28 and dT(7)=6.\nLet Tr(n) be the number of triples (i,j,k) such that 1\u2264i<j<k\u2264n and dT(i)>dT(j)>dT(k).\nTr(20)=14, Tr(100)=5772, and Tr(1000)=11174776.\nFind Tr(60000000). \nGive the last 18 digits of your answer.", "solution": "147534623725724718", "difficulty": 35, "story": "Once upon a time in the quaint village of Arithmetica, there lived a young boy named Max. Max was known throughout the village for his incredible mathematical abilities. His knack for numbers was truly astonishing, and his mind seemed to effortlessly solve even the most complex problems. The village elders and townsfolk often sought his help when they were faced with mathematical conundrums.\n\nOne day, as Max was relishing the glorious afternoon sun, a strange visitor arrived in Arithmetica. The townspeople whispered animatedly, for the visitor was none other than a renowned mathematician named Professor Euler. Professor Euler was renowned for his groundbreaking discoveries in the world of mathematics and was known to travel to various villages, challenging the locals with perplexing mathematical problems.\n\nMax, naturally intrigued, approached the professor. \"Greetings, Professor Euler! What brings you to our humble village today?\" he inquired politely.\n\nThe professor smiled warmly at Max. \"Ah, young Max, I have heard of your extraordinary talent for numbers. I believe I have a problem that will surely pique your interest. It involves a sequence of triangular numbers and the number of divisors they possess. Allow me to explain.\"\n\nMax listened intently as the professor revealed the intricate problem using the various mathematical notations. The professor concluded, \"Now, Max, the question is this: what is the value of Tr(60,000,000)? Tell me, my young friend, can you find the last 18 digits of this perplexing problem?\"\n\nThe problem intrigued Max immensely; he couldn't wait to dive into the depths of its complexity and discover its hidden secrets. The thought of using his mathematical prowess to solve this enigma brought a gleam to his eyes.\n\nMeanwhile, the villagers eagerly awaited Max's solution, for they knew in their hearts that he was their best chance at unraveling the marvelous puzzle posed by Professor Euler.\n\nMax spent days and nights immersed in his calculations and pondering over the nature of triangular numbers. He meticulously examined the relationship between the nth triangle number and the number of its divisors. The problem consumed his every thought, and his cerebral musings filled every nook and cranny of his mind.\n\nAs Max's mother worriedly watched her son's obsession consume him, she decided to intervene. \"Max, my dear, perhaps it's time to take a break,\" she suggested, concern etching lines on her face. \"Remember, there is more to life than just numbers and equations. Go outside and play with your friends. Enjoy the sunshine and the laughter of the village.\"\n\nMax's mother's words struck a chord within him. He realized that he had allowed his all-consuming passion for numbers to overshadow the joys of human connection and the simple pleasures of life. Slowly, he began to find balance, spending time with his friends and soaking in the beauty of the village.\n\nMonths passed, and Max's obsession with the problem began to wane. However, the question Professor Euler had posed still lingered in his mind. He knew that he had to return to it, armed with a refreshed perspective and newfound wisdom.\n\nThe day finally came when Max felt ready. With a newfound determination, he huddled over his parchment, calculations flowing smoothly like a river. Max ventured beyond the realm of known mathematics, delving into uncharted territories of his own creation. The village held its breath, knowing that Max's final answer could change how they viewed the world of numbers forever.\n\nBut as the village awaited Max's triumphant return, a question formed in their minds. Would Max be able to solve this perplexing problem, or would it elude even his genius mind?\n\nAnd so, dear reader, I implore you to embark on this numerical quest. Can you find the last 18 digits of Tr(60,000,000)? Will you be the one to unlock the mysteries hidden within the realm of triangular numbers and divisors?\n\nThe answer awaits, and it is up to you to discover it."}, {"id": 392, "euler_id": 392, "title": "Enmeshed unit circle", "problem": "\nA rectilinear grid is an orthogonal grid where the spacing between the gridlines does not have to be equidistant.\nAn example of such grid is logarithmic graph paper.\n\n\nConsider rectilinear grids in the Cartesian coordinate system with the following properties:The gridlines are parallel to the axes of the Cartesian coordinate system.There are N+2 vertical and N+2 horizontal gridlines. Hence there are (N+1) x (N+1) rectangular cells.The equations of the two outer vertical gridlines are x = -1 and x = 1.The equations of the two outer horizontal gridlines are y = -1 and y = 1.The grid cells are colored red if they overlap with the unit circle, black otherwise.For this problem we would like you to find the positions of the remaining N inner horizontal and N inner vertical gridlines so that the area occupied by the red cells is minimized.\n\n\nE.g. here is a picture of the solution for N = 10:\n\n\n\n\nThe area occupied by the red cells for N = 10 rounded to 10 digits behind the decimal point is 3.3469640797.\n\n\nFind the positions for N = 400. \nGive as your answer the area occupied by the red cells rounded to 10 digits behind the decimal point.\n", "solution": "3.1486734435", "difficulty": 35, "story": "Once upon a time in the kingdom of Mathopia, there lived a young mathematician named Alice. Alice had a profound love for numbers and could often be found lost in the world of equations and theorems. From the moment she solved her first algebraic equation, she knew her destiny lay in unraveling the mysteries of mathematics.\n\nOne sunny day, as Alice was strolling through the beautiful gardens of Mathopia, she stumbled upon an old, tattered book hidden beneath the thick foliage. Curiosity piqued, she gingerly picked up the book and blew away the dust that obscured its cover. To her surprise, the title read \"The Grid of Secrets and Shadows.\"\n\nUnable to resist the allure of the mysterious book, Alice eagerly opened it, revealing pages upon pages of rectilinear grids and complex mathematical problems. Her heart skipped a beat as she read a particular problem - the one that would forever change her life.\n\nThe problem presented a grid with N+2 vertical and N+2 horizontal gridlines. Alice learned that the rectangular cells within these gridlines were colored red if they overlapped with the unit circle, and black otherwise. The task at hand was to find the positions of the remaining N inner horizontal and N inner vertical gridlines so that the area occupied by the red cells could be minimized.\n\nFascinated by the challenge, Alice spent days and nights immersed in solving the problem. The grid consumed her thoughts and her dreams, captivating her with its elegant complexities. She sketched countless variations of the grid, scribbling equations and geometric patterns onto the pages of her notebook. Each iteration brought her closer to unraveling its secrets.\n\nAs Alice ventured deeper into the problem, she realized the significance of the grid's inner workings. The positioning of the gridlines tempered the balance between red and black, revealing a glimpse into the harmony of numbers and shapes. Her mind swirled with ideas and possibilities - each solution becoming a stepping stone towards a greater understanding of the mathematical universe.\n\nWeeks turned into months, and months into a year as Alice delved into the grid's enigma. Through countless trials and errors, she discovered the positions for N=400, meticulously calculating each gridline's placement to minimize the area occupied by the red cells. With bated breath, she awaited the answer - the area rounded to 10 digits behind the decimal point. But the book remained silent, offering no resolution to her tireless efforts.\n\nAlice wandered through the gardens of Mathopia, her mind consumed by the unquenched thirst for the answer. The world around her seemed to fade, and she found herself standing at the edge of a tranquil lake. Reflections danced upon the water's surface, mimicking the mysterious patterns of the grid. In that moment, as soft ripples disturbed the peaceful fa\u00e7ade, Alice came to a realization:\n\nThe grid itself held a secret, its solution an elusive treasure that defied mere numbers and calculations. It was a testament to the beauty and infinite possibilities of mathematics - a problem that transcended its numerical boundaries.\n\nTurning to face the reader, Alice posed a question:\n\n\"Can you, dear reader, unravel the final piece of this enthralling grid's puzzle? Can you discover the area occupied by the red cells when N=400? Are you ready to step into the world of mathematics and unlock the secrets that lie within?\"\n\nWith that, Alice's story merged with the timeless tale of the grid, its mystery awaiting the next daring mind to venture forth and decipher its enigma."}, {"id": 417, "euler_id": 417, "title": "Reciprocal cycles II", "problem": "A unit fraction contains 1 in the numerator. The decimal representation of the unit fractions with denominators 2 to 10 are given:\n\n1/2=\u00a00.5\n1/3=\u00a00.(3)\n1/4=\u00a00.25\n1/5=\u00a00.2\n1/6=\u00a00.1(6)\n1/7=\u00a00.(142857)\n1/8=\u00a00.125\n1/9=\u00a00.(1)\n1/10=\u00a00.1\n\nWhere 0.1(6) means 0.166666..., and has a 1-digit recurring cycle. It can be seen that 1/7 has a 6-digit recurring cycle.\n\nUnit fractions whose denominator has no other prime factors than 2 and/or 5 are not considered to have a recurring cycle.\nWe define the length of the recurring cycle of those unit fractions as 0. \n\n\nLet L(n) denote the length of the recurring cycle of 1/n.\nYou are given that \u2211\u2009L(n) for 3 \u2264 n \u2264 1 000 000 equals 55535191115.\n\n\nFind \u2211\u2009L(n) for 3 \u2264 n \u2264 100 000 000.", "solution": "446572970925740", "difficulty": 35, "story": "Once upon a time in the kingdom of Arithmos, there was a talented mathematician named Amelia. She had always been fascinated by numbers and spent her days solving complex equations and uncovering the mysteries of arithmetic.\n\nOne day, Amelia stumbled upon an ancient scroll tucked away in the dusty corners of the royal library. Curiosity piqued, she unfurled the fragile parchment, revealing an intricate mathematical problem. As she read the problem, her eyes widened with excitement.\n\nThe problem spoke of unit fractions, numbers with 1 as the numerator, and their decimal representations. It presented a range of unit fractions with denominators from 2 to 10, each displaying a unique pattern. Amelia marveled at the peculiar way these fractions could extend infinitely, revealing the recurring cycles hidden within them.\n\nEager to delve deeper into the mystery, she pondered the significance of these recurring cycles. She discovered that unit fractions whose denominators contained prime factors other than 2 and 5 did not have recurring cycles. Fascinated by this revelation, Amelia decided to investigate further.\n\nDays turned into weeks, and weeks into months as Amelia dedicated herself to the study of recurring cycles. She tirelessly calculated the length of the recurring cycles of unit fractions from 3 to 1,000,000, meticulously noting the patterns that emerged. Her efforts were rewarded when she arrived at the astonishing sum of 55,535,191,115 for the range specified.\n\nAs Amelia marveled at her discovery, a sudden realization struck her. If such remarkable patterns emerged from the smaller range, what wonders lay hidden in a wider realm of numbers? Determined to find out, she set her sights on a new challenge: to find the sum of the length of recurring cycles for unit fractions from 3 to 100,000,000.\n\nBut before she could embark on this mathematical adventure, Amelia knew she needed to decipher the significance of her findings. If the recurring cycles of numbers held within them the essence of infinity, perhaps they also contained profound truths about the universe. With each recurring cycle she uncovered, she felt closer to unlocking the secrets of creation itself.\n\nThus, Amelia found herself at a crossroads, torn between her insatiable thirst for knowledge and the limitations of her mortal existence. Should she devote her life to unraveling the enigma of recurring cycles, or would her journey lead her down an impassable road? The answer lay in the hands of the numbers, awaiting a brilliant mind to embrace the challenge.\n\nAnd so, dear reader, I pose this question to you: Can you find the sum of the length of recurring cycles for unit fractions from 3 to 100,000,000? Like Amelia, will your journey unlock the secrets hidden within these numbers?"}, {"id": 430, "euler_id": 430, "title": "Range flips", "problem": "N disks are placed in a row, indexed 1 to N from left to right.\nEach disk has a black side and white side. Initially all disks show their white side.\nAt each turn, two, not necessarily distinct, integers A and B between 1 and N (inclusive) are chosen uniformly at random.\nAll disks with an index from A to B (inclusive) are flipped.\nThe following example shows the case N = 8. At the first turn A = 5 and B = 2, and at the second turn A = 4 and B = 6.\n\nLet E(N, M) be the expected number of disks that show their white side after M turns.\nWe can verify that E(3, 1) = 10/9, E(3, 2) = 5/3, E(10, 4) \u2248 5.157 and E(100, 10) \u2248 51.893.\nFind E(1010, 4000).\nGive your answer rounded to 2 decimal places behind the decimal point.", "solution": "5000624921.38", "difficulty": 35, "story": "Once upon a time, in the enchanting land of Numeria, there lived a humble mathematician named Theodore. Theodore had always been fascinated by puzzles and numbers, constantly finding patterns where others saw chaos. He was respected and admired by the people of Numeria for his astute mind and his uncanny ability to solve the most perplexing equations.\n\nOne day, a great challenge befell the kingdom. The wicked sorceress Morgana had cast a spell on the land, darkening the hearts and minds of its inhabitants. She enchanted N disks, placing them in a row, each with a black side and a white side. As a result, all the disks showed their black side, hiding the innocent glow of the white.\n\nThe King of Numeria, distressed by the curse that had befallen his people, turned to Theodore for help. He entrusted him with the task of finding a solution to the problem. Theodore accepted the challenge with eagerness, knowing that only through mathematics could the spell be broken.\n\nTheodore pondered over the problem and realized his strategy. At each turn, he would choose two random integers, A and B, between 1 and N. All the disks from A to B would be flipped, revealing the white side once again.\n\nDays turned into nights, and Theodore tirelessly calculated the expected number of disks that would show their white side after M turns. He discovered the magical formula, E(N, M), that held the answer to the puzzle.\n\nAmidst his quest, Theodore encountered beings of all kind, each with their unique insights into the mathematical enigma. A wise old owl spoke of the beauty and elegance of probabilities, guiding Theodore to consider the likely outcomes of each turn and how they would affect the final result. A mischievous sprite whispered tales of randomness, causing Theodore to question the intricacies of choosing A and B uniformly at random.\n\nHis journey took him across vast mathematical landscapes, traversing realms of permutations and combinatorics, until finally, Theodore arrived at the enchanted castle where Morgana resided.\n\nThe sorceress, intrigued by Theodore's intellect, challenged him to find E(1010, 4000) - the expected number of disks that would show their white side after 4000 turns on 1010 disks. Aware of the numerical power that lay within the answer, Morgana posed the final question: \"Can you calculate the magical essence that will bring light back to Numeria?\"\n\nTheodore took a deep breath, knowing that the fate of the kingdom rested upon his knowledge. He summoned all his mathematical prowess, diving deep into the problem at hand. The calculations danced in his mind, numbers swirling, intermingling, and rearranging themselves.\n\nAs the story unfolded, Theodore faced one question after another, making decisions that would impact the path he took. Each trial brought him closer to the answer, but would it be enough to break Morgana's spell?\n\nThe fate of Numeria hung in the balance, and the story came to an end. But now, dear reader, it is your turn to continue the tale. Can you solve this mathematical mystery and find E(1010, 4000)? The future of Numeria awaits your answer, so step forward and unlock the magic that lies within the numbers."}, {"id": 437, "euler_id": 437, "title": "Fibonacci primitive roots", "problem": "\nWhen we calculate 8n modulo 11 for n=0 to 9 we get: 1, 8, 9, 6, 4, 10, 3, 2, 5, 7.\nAs we see all possible values from 1 to 10 occur. So 8 is a primitive root of 11.\nBut there is more:\nIf we take a closer look we see:\n1+8=9\n8+9=17\u22616 mod 11\n9+6=15\u22614 mod 11\n6+4=10\n4+10=14\u22613 mod 11\n10+3=13\u22612 mod 11\n3+2=5\n2+5=7\n5+7=12\u22611 mod 11.\n\nSo the powers of 8 mod 11 are cyclic with period 10, and 8n + 8n+1 \u2261 8n+2 (mod 11).\n8 is called a Fibonacci primitive root of 11.\nNot every prime has a Fibonacci primitive root.\nThere are 323 primes less than 10000 with one or more Fibonacci primitive roots and the sum of these primes is 1480491.\nFind the sum of the primes less than 100,000,000 with at least one Fibonacci primitive root.\n\n", "solution": "74204709657207", "difficulty": 35, "story": "Once upon a time in a small village nestled between rolling hills, there lived a young girl named Lily. Lily was known for her boundless curiosity and adventurous spirit. Her favorite pastime was exploring the beautiful forests that surrounded their village.\n\nOne sunny day, as Lily roamed through the forest, she stumbled upon an old wooden chest hidden deep among the trees. Eager to uncover its secrets, she carefully pried open the chest to reveal a worn-out parchment. The parchment contained a fascinating mathematical problem:\n\n\"When we calculate 8n modulo 11 for n=0 to 9 we get: 1, 8, 9, 6, 4, 10, 3, 2, 5, 7. As we see all possible values from 1 to 10 occur. So 8 is a primitive root of 11.\"\n\nLily's eyes widened with intrigue, and she couldn't resist but delve deeper into the puzzle. She noticed the notes on the parchment continued, depicting a fascinating pattern of sums:\n\n\"If we take a closer look we see: 1+8=9. 8+9=17\u22616 mod 11. 9+6=15\u22614 mod 11. 6+4=10. 4+10=14\u22613 mod 11. 10+3=13\u22612 mod 11. 3+2=5. 2+5=7. 5+7=12\u22611 mod 11.\"\n\nLily's heart raced with excitement as she realized that the powers of 8 modulo 11 were cyclic with a period of 10. It was astonishing to think that 8, this seemingly ordinary number, could create such an enchanting pattern. The parchment revealed that 8 was indeed a Fibonacci primitive root of 11.\n\nThe discovery consumed Lily's thoughts, and she couldn't help but wonder how many other primes possessed this unique property. The parchment overflew with information, stating, \"Not every prime has a Fibonacci primitive root. There are 323 primes less than 10,000 with one or more Fibonacci primitive roots, and the sum of these primes is 1,480,491.\"\n\nLily's mind raced with possibilities. She had to find the answer to this burning question. If there were so many primes with Fibonacci primitive roots among the first 10,000 numbers, just imagine how many would lie hidden among the vast range of 100,000,000. It was a riddle she couldn't resist solving.\n\nWith renewed determination, Lily decided to channel her curiosity into finding the sum of the primes less than 100,000,000 with at least one Fibonacci primitive root. She knew this endeavor would take time, patience, and an unyielding commitment to unravelling the secrets hidden within the mathematical tapestry.\n\nAnd so, armed with the knowledge bestowed upon her by the old chest, Lily embarked on a quest, seeking the company of wise mathematicians and traversing the vastness of mathematical literature. She explored ancient libraries, solved equations until her fingers ached, and collaborated with fellow enthusiasts.\n\nAs the years passed, Lily became a renowned mathematician and an expert in Fibonacci primitive roots. Her discoveries graced the pages of scholarly journals, and she uncovered countless hidden gems in the realm of number theory. However, one question lingered unanswered in her mind:\n\nWhat, dear reader, is the sum of the primes less than 100,000,000 with at least one Fibonacci primitive root? Will you step into Lily's shoes and unravel this century-old mystery? Who knows what truths and adventures lie in wait for those who dare to seek the answer?"}, {"id": 457, "euler_id": 457, "title": "A polynomial modulo the square of a prime", "problem": "\nLet f(n) = n2 - 3n - 1.\nLet p be a prime.\nLet R(p) be the smallest positive integer n such that f(n) mod p2 = 0 if such an integer n exists, otherwise R(p) = 0.\n\n\nLet SR(L) be \u2211\u2009R(p) for all primes not exceeding L.\n\n\nFind SR(107).\n", "solution": "2647787126797397063", "difficulty": 35, "story": "Once upon a time in the land of Mathematicia, there resided a young and brilliant mathematician named Alice. She possessed an insatiable curiosity that drove her to explore the mysteries of numbers. Alice was particularly fascinated by the interplay between prime numbers and algebraic expressions.\n\nOne day, as Alice delved deeper into her studies, she stumbled upon an enigmatic problem. It was framed as follows:\n\nLet f(n) = n\u00b2 - 3n - 1.\nLet p be a prime.\nLet R(p) be the smallest positive integer n such that f(n) mod p\u00b2 = 0 if such an integer n exists, otherwise R(p) = 0.\n\nLet SR(L) be \u2211 R(p) for all primes not exceeding L.\n\nFind SR(10\u2077).\n\nIntrigued by the complexity of the problem, Alice couldn't help but wonder how it might be woven into reality. She decided to embark on a journey to the farthest corners of Mathematicia, hoping that her travels would bring her closer to uncovering the secrets concealed within these mathematical riddles.\n\nAlice ventured into the bustling city of Numeropolis, a place that thrived on the beauty of numbers and equations. There, she met an esteemed and wise mathematician by the name of Professor Euler. Alice implored him for guidance on her quest.\n\n\"Professor Euler,\" she began, \"I have come across a profound mathematical problem, one that involves primes and algebraic expressions. I wish to understand how these elements merge and affect our world.\"\n\nThe professor's eyes twinkled with excitement at the mention of primes and algebra. He beckoned Alice to follow him into his magnificent library, a vast collection of ancient tomes filled with mathematical knowledge.\n\nSeated in the cozy corner of the library, Professor Euler explained the significance of the problem. \"You see, my dear Alice, the concept of R(p) allows us to determine the smallest positive integer, n, for which f(n) becomes divisible by p\u00b2. It elucidates a pattern hidden within prime numbers and the magical realm of algebraic equations.\"\n\nAlice's eyes widened in awe and anticipation. She recognized the importance of this revelation and how it could unlock countless stanzas of the mathematical symphony.\n\n\"Now,\" Professor Euler continued, \"SR(L) denotes the sum of these smallest integers, R(p), for all primes not exceeding L. It encompasses the overarching influence of this convergence of primes and algebraic avenues.\"\n\nAlice sensed the weight of this grand understanding, knowing that uncovering the value of SR(10\u2077) would be a paramount accomplishment. She thanked the professor for his enlightening words and set off on the next chapter of her journey.\n\nAs Alice wandered through the ever-changing landscape of Mathematicia, she encountered diverse characters from all walks of life. She inquired about their knowledge of prime numbers and algebraic expressions, eager to find any morsel of information that might lead her closer to SR(10\u2077).\n\nFarmers, cartographers, and musicians all shared their wisdom, each offering a unique perspective on numbers. Alice's excitement grew with every conversation, as she realized that the very foundation of their trades relied on the elegance of mathematical concepts.\n\nDays turned into weeks, and weeks turned into months. Alice traversed a myriad of landscapes, charting prime numbers and absorbing the essence of algebraic beauty. She was no longer the same budding mathematician who had begun her quest; her understanding of numbers had grown exponentially.\n\nOne fateful evening, as Alice stared into the night sky, taking solace in the infinite expanse above her, she pondered the grand question Professor Euler had laid before her. All her encounters, all the knowledge she had amassed, seemed to swirl together like the constellations above.\n\nAt long last, she returned to Numeropolis, a changed mathematician, ready to confront SR(10\u2077) head-on. The citizens gathered around her, sensing the momentous culmination of her journey. But Alice's yearning for knowledge was yet to be fulfilled.\n\nAnd so, dear reader, it is here our story rests. What is the value of SR(10\u2077)? What grand revelations lie within the harmonious dance of primes and algebraic expressions? Your intellect is now called upon to untangle the enigma set forth by Alice's expedition. Can you decipher the labyrinthine code and provide an answer? The fate of Mathematicia lies in your hands."}, {"id": 463, "euler_id": 463, "title": "A weird recurrence relation", "problem": "\nThe function f is defined for all positive integers as follows:\nf(1)=1\nf(3)=3\nf(2n)=f(n)\nf(4n+1)=2f(2n+1)\u2212f(n)\nf(4n+3)=3f(2n+1)\u22122f(n)\n\nThe function S(n) is defined as \u2211i=1nf(i).\nS(8)=22 and S(100)=3604.\nFind S(337). Give the last 9 digits of your answer.", "solution": "808981553", "difficulty": 35, "story": "Once upon a time in a faraway land, there lived a young mathematician named Oliver. He possessed a rare talent for numbers, often spending hours immersed in complex equations and mathematical puzzles. His keen intellect had earned him a reputation amongst his peers as a prodigy.\n\nOne day, as Oliver was perusing a dusty old tome in the library, he stumbled upon a peculiar problem that immediately captured his attention. It seemed to be a series of mathematical rules governing a function called 'f.' Without hesitation, he dived into unraveling its mysteries.\n\nThe function, f, was defined over positive integers. Its rules were as follows: f(1) equaled 1, f(3) equaled 3, f(2n) equaled f(n), and f(4n+1) equaled 2f(2n+1) minus f(n), while f(4n+3) equaled 3f(2n+1) minus 2f(n).\n\nAs Oliver delved deeper, his excitement grew. He realized that by applying these rules, he could generate a series of numbers. This series intrigued him, for it had a peculiar property. When he plugged in the value 8, the sum of the series, S(8), equaled 22. When he tried it with 100, S(100) emerged as 3604.\n\nThe young mathematician's pulse quickened. He was on the cusp of something extraordinary. Oliver resolved to uncover the pattern hidden within the depths of this enigma. The mysterious function had cast its spell on him, and he couldn't resist the allure of deciphering its secrets.\n\nDays turned into weeks as Oliver immersed himself in the problem. He could hardly eat or sleep, driven by the desire to solve the function's riddles. His friends and family began to worry about his well-being, urging him to take a break and seek respite from his relentless pursuit.\n\nBut Oliver remained steadfast, his obsession consuming him. Finally, after countless sleepless nights and tireless calculations, he reached an astounding revelation. He had successfully determined the elusive pattern, defying the odds and overcoming the formidable challenge.\n\nEnthralled by what he had discovered, Oliver's heart was ablaze with excitement. But he knew his journey did not end here. A new quest awaited him \u2013 one that would test his mettle and ingenuity to an even greater extent.\n\nAs the sun dipped below the horizon, casting long shadows upon the land, Oliver pondered his next move. The problem that haunted him now was more intricate and perplexing than ever before. It beckoned him to venture further into uncharted territories of mathematical inquiry.\n\nOliver knew that the time had come to face his greatest challenge yet \u2013 to decipher the value of S(337). This gargantuan task demanded unwavering determination and unwavering focus. Every fiber of his being cried out for resolution, but he knew the answer would elude him until he had given it his all.\n\nAs Oliver closed his eyes, his mind brimmed with equations, symbols, and possibilities. The answer lay tantalizingly close, just beyond his grasp. With every ounce of his being, he summoned his mental acuity and embarked on a new mathematical journey.\n\nAnd now, dear reader, the question lies before you, much like it does before Oliver: Can you find the last nine digits of S(337)? Are you willing to immerse yourself in the secrets of the function f and unlock the mathematical wonder hidden within its folds? For the answer lies within your grasp, waiting for your intellect to rise to the challenge."}, {"id": 473, "euler_id": 473, "title": "Phigital number base", "problem": "\nLet \u03c6 be the golden ratio: \u03c6=1+52.\nRemarkably it is possible to write every positive integer as a sum of powers of \u03c6 even if we require that every power of \u03c6 is used at most once in this sum.\nEven then this representation is not unique.\nWe can make it unique by requiring that no powers with consecutive exponents are used and that the representation is finite.\nE.g: \n2=\u03c6+\u03c6\u22122 and 3=\u03c62+\u03c6\u22122\n\n\nTo represent this sum of powers of \u03c6 we use a string of 0's and 1's with a point to indicate where the negative exponents start.\nWe call this the representation in the phigital numberbase.\nSo 1=1\u03c6, 2=10.01\u03c6, 3=100.01\u03c6 and 14=100100.001001\u03c6. \nThe strings representing 1, 2 and 14 in the phigital number base are palindromic, while the string representing 3 is not. (the phigital point is not the middle character).\n\n\nThe sum of the positive integers not exceeding 1000 whose phigital representation is palindromic is 4345.\n\n\nFind the sum of the positive integers not exceeding 1010 whose phigital representation is palindromic.", "solution": "35856681704365", "difficulty": 35, "story": "Once upon a time in the mystical land of Phigitia, there lived a young princess named Aurelia. Known for her intelligence and love for puzzles, she was always seeking new adventures and challenges to test her mind. One day, as she strolled through the vibrant gardens of her kingdom, she stumbled upon an ancient scroll hidden beneath a blooming rosebush.\n\nEagerly unfurling the scroll, Aurelia discovered it contained a peculiar mathematical problem. As she read it aloud, the words seemed to shimmer and come to life, transporting her into a world where numbers and magic intertwined.\n\nThe problem spoke of the golden ratio, \u03c6, and the intriguing concept of representing every positive integer as a sum of powers of \u03c6. Aurelia was fascinated, her mind buzzing with curiosity. Determined to satisfy her thirst for knowledge, she embarked on a quest to understand this mysterious mathematical realm.\n\nGuided by the scroll, Aurelia ventured into the enchanted forest where numbers danced among the trees. She encountered a wise old mathematician named Orpheus, who had spent years studying the properties of \u03c6.\n\nOrpheus explained that to represent these sums of powers of \u03c6, they used a phigital number base. The princess listened intently as he described how the phigital number base employed a unique string of 0's and 1's, with a point indicating where negative exponents commenced. Fascinated, Aurelia realized that this number base was akin to a secret code, decipherable only by those who understood its language.\n\nOrpheus went on to reveal that some phigital representation strings were palindromic, with the point serving as their midpoint. The princess marveled at the elegance of these palindromic strings but wondered why they were significant.\n\nAs Aurelia delved deeper into the secrets of Phigitia, she discovered that the sum of positive integers not exceeding 1000, whose phigital representations were palindromic, equaled 4345. It amazed her how intricate patterns emerged from the union of numbers and geometry.\n\nNow, determined to expand her understanding, the princess set her sights on a more ambitious quest. Using her newfound knowledge, she aimed to determine the sum of the positive integers not exceeding 1010, whose phigital representations were palindromic.\n\nWith an air of excitement, she discussed her plans with Orpheus, hoping he would guide her through this mathematical labyrinth. But as she recounted her goal, the old mathematician's face turned grave.\n\n\"My dear Aurelia,\" Orpheus said, his voice weighted with concern, \"this is no ordinary quest you pursue. The answer you seek lies hidden within the intricate web of phigital representations. The path ahead holds challenges you cannot yet conceive, and the solution hinges on the most delicate of calculations.\"\n\nUndeterred, Aurelia's eyes gleamed with determination. She knew this endeavor would push the boundaries of her intellect, but she yearned to unlock the secrets of the phigital realm.\n\nAnd so, dear reader, I leave you with a question inspired by Aurelia's quest: What is the sum of the positive integers not exceeding 1010, whose phigital representations are palindromic? Are you ready to enter the magical world of Phigitia and challenge your mind to solve this intricate puzzle?"}, {"id": 537, "euler_id": 537, "title": "Counting tuples", "problem": "\nLet \u03c0(x) be the prime counting function, i.e. the number of prime numbers less than or equal to x.\nFor example, \u03c0(1)=0, \u03c0(2)=1, \u03c0(100)=25.\n\n\nLet T(n,k) be the number of k-tuples (x1,\u2026,xk) which satisfy:\n1. every xi is a positive integer;\n2. \u2211i=1k\u03c0(xi)=n\n\n\nFor example T(3,3)=19.\nThe 19 tuples are (1,1,5), (1,5,1), (5,1,1), (1,1,6), (1,6,1), (6,1,1), (1,2,3), (1,3,2), (2,1,3), (2,3,1), (3,1,2), (3,2,1), (1,2,4), (1,4,2), (2,1,4), (2,4,1), (4,1,2), (4,2,1), (2,2,2).\n\n\nYou are given T(10,10) = 869 985 and T(103,103) \u2261 578 270 566 (mod 1 004 535 809).\n\nFind T(20 000, 20 000) mod 1 004 535 809.\n", "solution": "779429131", "difficulty": 35, "story": "Once upon a time in the kingdom of Numeria, there lived a young prince named Alaric. Alaric was known for his insatiable curiosity and love for all things mathematical. He would spend hours in the royal library, poring over ancient books filled with equations and formulas, trying to unlock the secrets of the universe.\n\nOne day, as Alaric delved deep into a dusty tome, he stumbled upon a peculiar mathematical problem. It was called T(n,k), and it seemed to hold the key to understanding the relationships between prime numbers. Intrigued, he set out to solve it.\n\nAs Alaric delved deeper into the problem, he noticed that T(n,k) represented the number of k-tuples that satisfied certain conditions involving prime numbers. The more he read, the more fascinated he became. The problem seemed to hold the secrets of the Prime Kingdom, a hidden realm said to be abundant with unimaginable treasures and power.\n\nDriven by his insatiable curiosity, Alaric became determined to solve T(20 000, 20 000). He knew it was a monumental task, but he was willing to dedicate his life to unraveling this mathematical enigma. Little did he know that solving T(20 000, 20 000) would unlock a treasure beyond his wildest dreams.\n\nMonths turned into years as Alaric poured himself into his studies, trying different approaches, and exploring new ideas. He delved into the realm of number theory, searching for patterns, and seeking a breakthrough that would lead him to the solution.\n\nIn his pursuit of knowledge, Alaric traveled far and wide, consulting with the greatest mathematicians and scholars in the land. They were astounded by the complexity of the problem and marveled at Alaric's determination to solve it. But as the years went by, no one could provide him with a definitive answer.\n\nThe deeper Alaric delved into the problem, the more it consumed his every waking moment. His once joyous face became weathered with the markings of sleepless nights and countless calculations. Though he was adored by his subjects, Alaric secluded himself in his study, consumed by his quest to solve T(20 000, 20 000).\n\nAs the years turned into decades, and Alaric's hair turned gray, he found himself on the brink of despair. He questioned whether he had dedicated his life to an unsolvable puzzle, doomed to forever chase a solution that lay just out of reach.\n\nAnd yet, a glimmer of hope shone through the darkness. Legends whispered of the all-knowing Oracle of Numbers, a mystical being said to possess the answers to all mathematical riddles. Alaric knew that the Oracle was his last hope.\n\nHe embarked on a treacherous journey to find the Oracle, overcoming countless obstacles and facing unimaginable dangers. After a long and arduous quest, Alaric finally found himself standing before the mystical Oracle, its presence radiating wisdom and enlightenment.\n\nWith bated breath, Alaric presented his question. He spoke of T(20 000, 20 000) and how it had consumed his life, and he implored the Oracle for the solution. The Oracle listened intently, its ancient eyes gleaming with knowledge.\n\nWith a voice as profound as the universe itself, the Oracle responded, \"Prince Alaric, your quest has been noble and your dedication unmatched. But the answer you seek resides not within me, but within the countless parallel universes that exist beyond our own. Only by exploring the infinite possibilities can you hope to find the solution to T(20 000, 20 000) mod 1 004 535 809.\"\n\nAlaric was taken aback by the Oracle's words. It seemed that the answer was forever out of reach, hidden in the vast expanse of the multiverse. And so, he was left with a question that echoed through his mind as he returned to Numeria.\n\nIs it possible for a mortal to traverse the parallel universes and find the elusive T(20 000, 20 000) mod 1 004 535 809?"}, {"id": 539, "euler_id": 539, "title": "Odd elimination", "problem": "\nStart from an ordered list of all integers from 1 to n. Going from left to right, remove the first number and every other number afterward until the end of the list. Repeat the procedure from right to left, removing the right most number and every other number from the numbers left. Continue removing every other numbers, alternating left to right and right to left, until a single number remains.\n\n\nStarting with n = 9, we have:1 2 3 4 5 6 7 8 9\n2 4 6 82 6\n6\n\n\nLet P(n) be the last number left starting with a list of length n.\nLet S(n)=\u2211k=1nP(k).\nYou are given P(1)=1, P(9) = 6, P(1000)=510, S(1000)=268271.\n\n\nFind S(1018) mod 987654321.\n", "solution": "426334056", "difficulty": 35, "story": "Once upon a time in the kingdom of Mathlandia, there lived a wise and enigmatic old man named Professor Euclid. Professor Euclid was renowned for his mathematical prowess and was sought after by the royal family and townsfolk alike for his wisdom and guidance.\n\nOne sunny afternoon, a young girl named Lily approached Professor Euclid with an air of curiosity and excitement. She had a problem that had been puzzling her for days, and she hoped the wise old professor could help her find the answer.\n\n\"Professor Euclid, I have a riddle that I cannot solve,\" Lily said as she handed him a piece of parchment containing the mathematical problem. \"I've tried and tried, but I'm unable to crack the code. Can you help me understand?\"\n\nProfessor Euclid took the parchment, his eyes scanning the intricate lines and numbers that danced across the page. A gentle smile played on his lips as he delved into the problem.\n\nLily watched, mesmerized, as the professor's fingers moved across the parchment. She knew that whenever Professor Euclid was deep in thought, something extraordinary was about to happen.\n\nAs if a wave of magic had engulfed the room, the numbers on the parchment transformed into a swirling vortex of knowledge. Professor Euclid began to weave a tale, his voice resonating with wisdom.\n\n\"Once upon a time, in the mystical realm of Numberscape, there existed a great king named Sigma. King Sigma had a peculiar fascination with manipulating numbers, often conducting elaborate experiments to unravel their secrets.\"\n\n\"In the heart of Numberscape, there was a mystical river known as the Summation River. This river flowed with the collective powers of every number in Numberscape, captivating King Sigma's attention. He believed that by understanding the mystical properties of the river, he could uncover universal truths hidden within the realm of mathematics.\"\n\n\"But the secrets of the Summation River were not easily revealed. King Sigma summoned a sage, Master Fibonacci, and tasked him with understanding the intricacies of the river's flow. It was through Master Fibonacci's research that a peculiar pattern emerged - a pattern that would form the basis of a mathematical problem that would challenge the minds of mathematicians for centuries to come.\"\n\nProfessor Euclid paused for a moment, his gaze fixed on Lily. \"Lily, the puzzle you presented bears the name of Professor Fibonacci's esteemed colleague, Professor Pascal. This sequence, known as Pascal's Triangle, serves as the foundation for your riddle.\"\n\nIntrigued, Lily leaned closer, her eyes fixed on Professor Euclid as he continued his tale. She could hardly believe that her simple riddle was connected to such a rich and enchanting story.\n\n\"Professor Pascal, despite his brilliance, grew frustrated with the slow pace of his experiments. He wished to find a quicker method to understand the powers of the Summation River. And so, he devised a method that involved removing numbers from a list in a specific order.\"\n\nProfessor Euclid held up two fingers, representing the process of removing every other number. \"Starting with the list of numbers from 1 to n, Professor Pascal removed the first number and every other number afterward until only one remained. He then repeated the procedure from right to left, removing the rightmost number and every other number from the remaining numbers.\"\n\n\"The process continued, with each iteration alternating from left to right and right to left, until a single number remained. Professor Pascal named this enchanting number 'P(n),' representing the last number left when starting with a list of length n.\"\n\nLily's mind whirled with excitement, the pieces of the puzzle starting to click into place. Professor Euclid's storytelling had not only captivated her imagination but also deepened her understanding of the mathematical problem she had presented him with.\n\n\"Now, young Lily, let us return to your riddle.\" Professor Euclid's voice carried a sense of anticipation. \"Can you find the elusive answer to P(1018) mod 987654321?\"\n\nLily's heart raced, her mind buzzing with possibilities. The riddle may have been challenging, but with Professor Euclid as her guide, she knew that the answers lay within her reach.\n\n\"Professor Euclid,\" Lily began, her voice filled with determination, \"I accept the challenge. I will strive to find the solution to P(1018) mod 987654321 and unravel the mysteries that lie within the realm of Numberscape.\"\n\nAnd so, the adventure began. Lily embarked on a quest to explore the depths of mathematics, armed with nothing but her curiosity and the guidance of Professor Euclid. Together, they would traverse the pathways of Numberscape, unlocking the secrets hidden within the enchanting Summation River.\n\nWill Lily be able to uncover the solution to P(1018) mod 987654321 and decode the mysteries hidden within Numberscape? Only time will tell.\n\nDear reader, can you solve the mathematical problem and help Lily unveil the secrets of Numberscape? For now, the knowledge lies dormant, waiting to be discovered."}, {"id": 545, "euler_id": 545, "title": "Faulhaber's Formulas", "problem": "The sum of the kth powers of the first n positive integers can be expressed as a polynomial of degree k+1 with rational coefficients, the Faulhaber's Formulas:\n1k+2k+...+nk=\u2211i=1nik=\u2211i=1k+1aini=a1n+a2n2+...+aknk+ak+1nk+1,\nwhere ai's are rational coefficients that can be written as reduced fractions pi/qi (if ai\u00a0=\u00a00, we shall consider qi\u00a0=\u00a01).\nFor example, 14+24+...+n4=\u2212130n+13n3+12n4+15n5.\nDefine D(k) as the value of q1 for the sum of kth powers (i.e. the denominator of the reduced fraction a1).\nDefine F(m) as the mth value of k\u00a0\u2265\u00a01 for which D(k)\u00a0=\u00a020010.\nYou are given D(4) = 30 (since a1\u00a0=\u00a0-1/30), D(308)\u00a0=\u00a020010, F(1)\u00a0=\u00a0308, F(10)\u00a0=\u00a096404.\nFind F(105).", "solution": "921107572", "difficulty": 35, "story": "Once upon a time in the quaint village of Arithmetica, there lived a brilliant mathematician named Professor Benjamin O'Connell. He had a reputation for being a wizard with numbers and was sought after by people from far and wide to solve their mathematical conundrums. Professor Benjamin's mind was like a vault, storing an endless repertoire of formulas and equations.\n\nOne sunny morning, as Professor Benjamin sat in his study, sifting through a pile of letters requesting his assistance, he came across a particularly intriguing one. It bore the name of his longtime friend, Professor Michael Robertson, the leading mathematician at the Royal Academy. Eagerly, he opened the letter and read its contents aloud to himself.\n\n\"Dear Benjamin,\nI hope this missive finds you in the best of health and spirits. I have long been puzzled by a mathematical problem, one that has stumped even the sharpest minds of our time. It revolves around the Faulhaber's Formulas and the values of D(k). I beseech you to lend me your expertise in unraveling this enigma, for I fear its solution holds great significance for mankind.\nYours in pursuit of knowledge,\nMichael.\"\n\nIntrigued and enticed by the mystery outlined in his friend's letter, Professor Benjamin set about researching the problem at hand. As he delved into the intricacies of the Faulhaber's Formulas, he grew aware of their vast implications for the world of mathematics.\n\nDays turned into weeks, and Professor Benjamin found himself consumed by this problem. His study table was strewn with scribbled notes, unfinished equations, and countless cups of cold coffee. But his determination never waned.\n\nOne evening, as the sun began its descent beyond the horizon, casting long shadows across Professor Benjamin's study, he stumbled upon a breakthrough. His eyes widened with astonishment as the dots finally connected in his mind. He now understood the significance of D(k) and its relationship to the sum of kth powers.\n\nWith newfound excitement coursing through his veins, Professor Benjamin penned a detailed letter to his friend, Professor Michael. In it, he expounded on the extent of his discovery and how he had devised a method to calculate D(k) for various values of k.\n\nBut instead of simply stating his findings, he chose to entice Professor Michael further by posing a question that would challenge the depths of his mathematical prowess. He concluded the letter by pondering, \"If D(4) is 30 and D(308) is 20010, then what could possibly be the value of F(105)?\"\n\nProfessor Benjamin sealed the letter with wax, imprinted it with his personal seal, and sent it off to the Royal Academy with great anticipation. As he watched the courier disappear over the horizon, he couldn't help but be filled with a sense of satisfaction. The question he posed to his friend was like a seed planted in the fertile soil of Professor Michael's intellect, waiting to blossom into a breathtaking revelation.\n\nAnd so, the question lingers in the air, awaiting an answer. What could the value of F(105) possibly be? Only those who dare to venture into the realm of numbers and formulas will be able to unlock the answer to this mathematical enigma.\n\nWill you take up the mantle and solve the puzzle that has stumped even the greatest minds? The solution awaits, nestled within the confines of the Faulhaber's Formulas and its intricacies."}, {"id": 548, "euler_id": 548, "title": "Gozinta Chains", "problem": "\nA gozinta chain for n is a sequence {1,a,b,...,n} where each element properly divides the next.\nThere are eight gozinta chains for 12:\n{1,12} ,{1,2,12}, {1,2,4,12}, {1,2,6,12}, {1,3,12}, {1,3,6,12}, {1,4,12} and {1,6,12}. \nLet g(n) be the number of gozinta chains for n, so g(12)=8.\ng(48)=48 and g(120)=132.\n\n\nFind the sum of the numbers n  not exceeding 1016 for which g(n)=n.\n", "solution": "12144044603581281", "difficulty": 35, "story": "Once upon a time in the bustling city of Mathlandia, there lived a young boy named Ethan. Ethan had always been a math prodigy, surpassing his peers and even some of his teachers in his love for numbers. He had a genuine fondness for unraveling complex problems and discovering the hidden patterns within the vast world of mathematics.\n\nAs Ethan grew older, his passion for numbers led him to explore an ancient mathematical concept called gozinta chains. These chains intrigued him immensely. A gozinta chain for any number 'n' consisted of a sequence starting with 1 and progressing to higher numbers, with each element properly dividing the next. Ethan was enchanted by the elegance and intricacy of these chains.\n\nOne day, while delving deeper into the realm of gozinta chains, Ethan stumbled upon a mind-boggling realization. He discovered that there were a specific number of gozinta chains for certain numbers. For instance, the number 12 had eight gozinta chains: {1,12}, {1,2,12}, {1,2,4,12}, {1,2,6,12}, {1,3,12}, {1,3,6,12}, {1,4,12}, and {1,6,12}. The beauty of this discovery fascinated Ethan, and he couldn't help but wonder what other secrets lay hidden within this facet of mathematics.\n\nEthan decided to investigate further, meticulously calculating the number of gozinta chains for various numbers. He was astonished to find that g(48) equaled 48, while g(120) topped the charts at 132. These numbers intrigued him since they were equal to the numbers themselves. It seemed like the gozinta chains hid an enigmatic connection between the numbers and their respective chains, and Ethan was determined to uncover it.\n\nDriven by his insatiable curiosity, Ethan set out on a mission to discover all the numbers where g(n) equaled n. He spent sleepless nights crunching numbers and constructing gozinta chains with fervor. As the days turned into weeks, Ethan diligently employed his mathematical prowess, searching for numbers that perfectly intertwined with their gozinta chains.\n\nThe yellowed pages of his journals overflowed with calculations and observations. Hours turned into days, and days into months. Ethan's obsession consumed him entirely. He couldn't tear himself away from the mystery that awaited him, the answer that seemed tantalizingly close.\n\nFinally, after years of dedicated research, Ethan reached a milestone. He had compiled a comprehensive list of numbers, not exceeding 1016, where g(n) equaled n. Yet, he still yearned for more. Every number he stumbled upon beckoned to him, whispering secrets of their gozinta chains. Still, his heart ached for the final piece of the puzzle.\n\nThat evening, as the sun dipped below the horizon, painting the sky in hues of orange and pink, Ethan found himself sitting at his desk, surrounded by an ocean of numbers. Desperation mingled with anticipation as he asked himself a question that echoed through his very core.\n\n \"What is the sum of the numbers not exceeding 1016 for which g(n) equals n?\"\n\nEthan took a deep breath, knowing that the answer to this elusive mathematical problem lay just beyond his grasp. Little did he know, his relentless pursuit of the answer would change his life forever and redefine the boundaries of his mathematical journey.\n\nThe question remained unanswered, waiting patiently for someone, perhaps even the reader, to unravel the enigma of the gozinta chains and uncover their profound connection to the numbers they dutifully divided. And so, the quest for knowledge continued, leaving the story open-ended, forever seeking that missing piece of mathematical wonder."}, {"id": 565, "euler_id": 565, "title": "Divisibility of sum of divisors", "problem": "Let \u03c3(n) be the sum of the divisors of n.\nE.g. the divisors of 4 are 1, 2 and 4, so \u03c3(4)=7.\n\n\nThe numbers n not exceeding 20 such that 7 divides  \u03c3(n) are:  4,12,13 and 20, the sum of these numbers being 49.\n\n\nLet S(n,d) be the sum of the numbers i not exceeding n such that d divides \u03c3(i).\nSo S(20,7)=49.\n\n\n\nYou are given: S(106,2017)=150850429 and S(109,2017)=249652238344557.\n\n\nFind S(1011,2017)\n", "solution": "2992480851924313898", "difficulty": 35, "story": "Once upon a time, in the quaint village of Mathlandia, there lived a young girl named Lily. Lily was known for her love of puzzles and brainteasers. She would spend hours poring over riddles and problems, eagerly searching for the solutions hidden within their carefully constructed questions.\n\nOne sunny morning, as Lily was strolling through the village square, she came across an intriguing notice posted on the community board. It read:\n\n\"Math Enthusiasts Wanted! Help us solve a mathematical mystery and unlock the secrets of the numbers!\"\n\nIntrigued, Lily couldn't resist this tantalizing invitation, and so she made her way to the designated meeting spot. There, she found a group of fellow puzzle enthusiasts, all eagerly awaiting instructions.\n\nTheir host for the day, Professor Albert Mathison, stepped forward with a twinkle in his eyes. He explained that they would be embarking on a mathematical journey\u2014one that would require their keen minds and puzzling expertise.\n\nLily, along with the others, listened intently as Professor Mathison explained the enigma they were about to tackle. He began by introducing them to the concept of sigma, sigma of n, to be precise.\n\n\"Let \u03c3(n) be the sum of the divisors of n,\" said Professor Mathison, writing the equation on the whiteboard. \"For example, if we take the number 4, its divisors are 1, 2, and 4. So, \u03c3(4) would be 1 + 2 + 4, which equals 7.\"\n\nLily's mind began to whirl with the possibilities. She could already tell that this mathematical problem was unlike any she had encountered before. It required her to find numbers, not exceeding 20, where 7 divided \u03c3(n).\n\nAs the Professor listed the numbers that satisfied this criterion\u20144, 12, 13, and 20\u2014Lily realized that she was becoming more and more immersed in the mystery. The sum of these numbers added up to 49, a significant result indeed.\n\n\"In addition,\" continued Professor Mathison, \"I want you all to calculate the sum of S(n, d) for the given values of n and d.\"\n\nLily eagerly noted the values: S(106, 2017) equaled 150850429, and S(109, 2017) was a whopping 249652238344557. The numbers were mind-boggling, but she was determined to unravel their secrets.\n\nDays turned into weeks, and Lily, along with her newfound friends, became completely absorbed in finding the solution to this mathematical mystery. They spent countless hours pouring over equations, writing countless lines of calculations, but success eluded them.\n\nHowever, Lily never lost hope. With every failed attempt, she grew more resilient, more determined to unlock the hidden beauty of numbers.\n\nNow, standing on the cusp of her greatest adventure yet, Lily finds herself faced with a grand question: what could S(1011, 2017) possibly be? She knew that the answer held the key to the mathematical treasure hidden within this enchanting puzzle.\n\nDetermined to solve the problem that had captivated her heart and mind, Lily looks to you, dear reader, with an eager twinkle in her eye. Can you help her uncover the secret to S(1011, 2017)? Only with your brilliant mind can this mathematical mystery truly be solved."}, {"id": 575, "euler_id": 575, "title": "Wandering Robots", "problem": "It was quite an ordinary day when a mysterious alien vessel appeared as if from nowhere. After waiting several hours and receiving no response it is decided to send a team to investigate, of which you are included. Upon entering the vessel you are met by a friendly holographic figure, Katharina, who explains the purpose of the vessel, Eulertopia.\nShe claims that Eulertopia is almost older than time itself. Its mission was to take advantage of a combination of incredible computational power and vast periods of time to discover the answer to life, the universe, and everything. Hence the resident cleaning robot, Leonhard, along with his housekeeping responsibilities, was built with a powerful computational matrix to ponder the meaning of life as he wanders through a massive 1000 by 1000 square grid of rooms. She goes on to explain that the rooms are numbered sequentially from left to right, row by row. So, for example, if Leonhard was wandering around a 5 by 5 grid then the rooms would be numbered in the following way.\n\n\nMany millenia ago Leonhard reported to Katharina to have found the answer and he is willing to share it with any life form who proves to be worthy of such knowledge.\nKatharina further explains that the designers of Leonhard were given instructions to program him with equal probability of remaining in the same room or travelling to an adjacent room. However, it was not clear to them if this meant (i) an equal probability being split equally between remaining in the room and the number of available routes, or, (ii) an equal probability (50%) of remaining in the same room and then the other 50% was to be split equally between the number of available routes.\n\n(i) Probability of remaining related to number of exits\n(ii) Fixed 50% probability of remaining\n\nThe records indicate that they decided to flip a coin. Heads would mean that the probability of remaining was dynamically related to the number of exits whereas tails would mean that they program Leonhard with a fixed 50% probability of remaining in a particular room. Unfortunately there is no record of the outcome of the coin, so without further information we would need to assume that there is equal probability of either of the choices being implemented.\nKatharina suggests it should not be too challenging to determine that the probability of finding him in a square numbered room in a 5 by 5 grid after unfathomable periods of time would be approximately 0.177976190476 [12 d.p.].\nIn order to prove yourself worthy of visiting the great oracle you must calculate the probability of finding him in a square numbered room in the 1000 by 1000 lair in which he has been wandering.\n(Give your answer rounded to 12 decimal places)", "solution": "0.000989640561", "difficulty": 35, "story": "As the sun rose over the sleepy little town of Glenwood, I had no idea that it would be a day that changed my life forever. The world seemed ordinary, just as it did every day, until a mysterious alien vessel appeared in the sky, casting a shadow over our small, unsuspecting community. Panic quickly spread through the town as people stared up in disbelief, wondering what in the world was happening.\n\nAfter several hours of waiting and receiving no response from the enigmatic vessel, it was decided that a team should be sent to investigate. To my astonishment, I was included in this team. As a mathematics enthusiast, I couldn't help but feel a mix of excitement and trepidation. Who knew what awaited us inside that alien craft?\n\nWe approached the vessel cautiously, our hearts pounding with anticipation. The doors, which seemed almost ethereal in nature, slid open, revealing an otherworldly interior that took our breath away. It was as if we had stepped into a realm far beyond our comprehension.\n\nAs we made our way deeper into the vessel, we stumbled upon a room bathed in a soft, blue glow. Standing before us was a holographic figure, emanating an aura of warmth and kindness. She introduced herself as Katharina, the guardian of the alien vessel, which she called Eulertopia.\n\nKatharina explained that Eulertopia was a place almost older than time itself. Its purpose was to combine unimaginable computational power with vast periods of time in order to unravel the secrets of life, the universe, and everything. And at the heart of Eulertopia was Leonhard, a cleaning robot equipped with a powerful computational matrix, tasked with pondering the meaning of life as he wandered through a massive grid of rooms.\n\nThe room we found ourselves in was filled with awe-inspiring holographic displays, showing Leonhard's journey through a 1000 by 1000 square grid. Katharina told us that the rooms were numbered sequentially, from left to right, row by row. She further explained that the designers of Leonhard had programmed him with a probability of either remaining in the same room or traveling to an adjacent room.\n\nHere's where the mathematical problem came into play. The designers of Leonhard were uncertain about how to calculate this probability. Would it be equal probability divided between remaining in the room and the number of available routes? Or would it be a fixed 50% probability of remaining?\n\nTo settle this, they flipped a coin, leaving the outcome undocumented. Without further information, we had to assume that both choices had equal probability of being implemented.\n\nKatharina revealed that Leonhard had stumbled upon the answer to life's ultimate question after unfathomable periods of time. He was willing to share this knowledge, but we had to prove ourselves worthy. Our task was to calculate the probability of finding Leonhard in a square numbered room in the 1000 by 1000 grid he had been wandering.\n\nWith a mischievous smile, Katharina left us with this tantalizing challenge, knowing that the answer held the key to unlocking the wisdom of the great oracle hidden within Eulertopia.\n\nAs I studied the holographic displays, my mind whirled with excitement and determination. Could I crack this mathematical puzzle and prove myself worthy of the great oracle's wisdom? And more importantly, what was the probability of finding Leonhard in a specific room within that colossal grid?\n\nLittle did I know that my journey had only just begun. The mathematical problem loomed before me, begging to be solved. As I gazed at the grid, I couldn't help but wonder: what would be the rounded, 12-decimal-place answer to this perplexing riddle?\n\nNow, dear reader, I pose the same question to you: What is the probability of finding Leonhard in a square numbered room in the 1000 by 1000 lair in which he has been wandering? The answer awaits, hidden within the depths of the great Eulertopia."}, {"id": 593, "euler_id": 593, "title": "Fleeting Medians", "problem": "We define two sequences S={S(1),S(2),...,S(n)} and S2={S2(1),S2(2),...,S2(n)}:\nS(k)=(pk)k mod 10007 where pk is the kth prime number.\nS2(k)=S(k)+S(\u230ak10000\u230b+1) where \u230a\u22c5\u230b denotes the floor function.\nThen let M(i,j) be the median of elements S2(i) through S2(j), inclusive. For example, M(1,10)=2021.5 and M(102,103)=4715.0.\nLet F(n,k)=\u2211i=1n\u2212k+1M(i,i+k\u22121). For example, F(100,10)=463628.5 and F(105,104)=675348207.5.\nFind F(107,105). If the sum is not an integer, use .5 to denote a half. Otherwise, use .0 instead.", "solution": "96632320042.0", "difficulty": 35, "story": "Once upon a time, in the quaint village of Numeria, lived a young mathematician named Ethan. Known for his exceptional problem-solving skills, Ethan was always in pursuit of new challenges to sharpen his mind. One sunny morning, as he strolled through the village, he stumbled upon a mysterious scroll lying on the ground. Intrigued, he picked it up and unrolled it, revealing a complex mathematical problem.\n\nEthan's eyes widened as he scanned through the intricate equations and sequences detailed on the scroll. The problem described two sequences, S and S2, where each term was derived using a special formula involving prime numbers. It was unlike anything Ethan had ever encountered before.\n\nUnable to contain his excitement, Ethan rushed back home and retreated to his study, surrounded by piles of books and scrolls. Determination glinted in his eyes as he immersed himself in the enigma before him. He spent days and nights, lost in a world of numbers, trying to make sense of the patterns and formulas that lay intertwined within the scroll.\n\nMeanwhile, the villagers marveled at Ethan's dedication and commitment. They noticed how his posture straightened and his eyes sparkled with newfound determination. Word of his endeavor spread like wildfire, fascinating the young and old alike. Everyone, from curious children to wise elders, followed Ethan's progress with bated breath.\n\nAs days turned into weeks, Ethan's breakthrough finally arrived. He discovered that the seemingly cryptic formulas held the key to finding the medians of specific sub-sequences within the larger sequence, S2. These medians, represented by M(i,j), were crucial in calculating the sum F(n,k).\n\nEthan's mind raced with excitement as he realized the potential of his findings. The sum F(n,k) had numerous applications, from probability theory to cryptography. If he could crack it, he would revolutionize the world of mathematics. With newfound determination, he dove deeper into the labyrinth of numbers, determined to unveil the secrets hidden within.\n\nHowever, as Ethan delved deeper into the scroll's mystery, he faced unforeseen challenges. The formulas became more complex, and the sequences grew longer. Doubt began to creep into his mind, testing the limits of his intellect and resolve. He wondered if he would ever be capable of cracking the code.\n\nFeeling overwhelmed, Ethan decided it was time to take a break from his solitary studying. He needed a breath of fresh air and a change of scenery to clear his mind. Seeking solace, he headed to the village square, hoping to find inspiration in the company of his fellow villagers.\n\nAs he mingled with the crowd, a young girl named Lily approached him. Lily, an aspiring mathematician herself, had been following Ethan's journey since the beginning. Her youthful enthusiasm was infectious, and her eyes sparkled with curiosity.\n\n\"You look troubled, Ethan,\" Lily said, peering up at him with a knowing smile. \"Why don't you share your problem with me? Perhaps we can solve it together.\"\n\nEthan hesitated, unsure whether sharing his burden would lighten it or magnify his frustrations. But as he looked into Lily's eager eyes, he sensed a kindred spirit, someone who shared his passion for numbers.\n\nWith a sigh, he opened up to Lily, explaining the intricacies of the mathematical problem he had discovered on the mysterious scroll. As he spoke, Lily listened intently, her mind buzzing with excitement.\n\n\"I think I've glimpsed a pattern within the sequences,\" Lily mused, her eyes gleaming with budding understanding. \"But to solve F(n,k), we'll need to combine your analytical prowess with my intuition. Together, we can crack this problem, Ethan.\"\n\nEthan's heart soared with newfound hope. He realized that collaboration and friendship were sometimes the key to unlocking the most intricate mysteries. With renewed determination, he and Lily retreated to Ethan's study, ready to tackle the mathematical problem head-on.\n\nHours turned into days, and days into weeks. The duo worked tirelessly, combining their collective knowledge and skills. The more they collaborated, the clearer the path to the solution became.\n\nAnd now, dear reader, we turn to you. Can you decipher the complexities of the mathematical problem that Ethan and Lily are striving to solve? Can you find the sum F(n,k) when given the values F(107,105)? Is the sum an integer, or does it end with .5?\n\nThrough the trials and tribulations of our heroes, the answer lies undiscovered. Will you be the one to unravel the enigma and complete the tale?"}, {"id": 595, "euler_id": 595, "title": "Incremental Random Sort", "problem": "\nA deck of cards numbered from 1 to n is shuffled randomly such that each permutation is equally likely.\n\n\nThe cards are to be sorted into ascending order using the following technique:\n Look at the initial sequence of cards.  If it is already sorted, then there is no need for further action.  Otherwise, if any subsequences of cards happen to be in the correct place relative to one another (ascending with no gaps), then those subsequences are fixed by attaching the cards together.  For example, with 7 cards initially in the order 4123756, the cards labelled 1, 2 and 3 would be attached together, as would 5 and 6.\n The cards are 'shuffled' by being thrown into the air, but note that any correctly sequenced cards remain attached, so their orders are maintained.  The cards (or bundles of attached cards) are then picked up randomly.  You should assume that this randomisation is unbiased, despite the fact that some cards are single, and others are grouped together. \n Repeat steps 1 and 2 until the cards are sorted. \n\n   Let S(n) be the expected number of shuffles needed to sort the cards. Since the order is checked before the first shuffle, S(1) = 0. You are given that S(2) = 1, and S(5) = 4213/871.\n\n\nFind S(52), and give your answer rounded to 8 decimal places.\n", "solution": "54.17529329", "difficulty": 35, "story": "Once upon a time, in a quaint little town called Mathville, there lived a young girl named Lily. Lily was a curious and adventurous soul, always seeking exciting puzzles and mind-bending challenges. She loved to test her wits against the toughest of problems, but little did she know that she was about to encounter a mathematical conundrum that would change her life forever.\n\nOne sunny afternoon, Lily stumbled upon an old, dusty deck of cards in the attic of her grandmother's house. The cards were numbered from 1 to 52 and appeared to have seen better days. Intrigued by her find, Lily decided to study the cards and uncover their mysteries.\n\nAs she flipped through the deck, she discovered a peculiar note wedged between the two of hearts and the three of spades. It read:\n\n\"Dear Adventurous Soul,\nCongratulations on finding this deck of cards. Within lies a mathematical problem that will test your analytical prowess. Sort them using a unique technique, and you will uncover a secret that has eluded many before you. Good luck, brave soul!\"\n\nIntrigued, Lily set out to solve the puzzle. She read the instructions carefully and began shuffling the deck randomly, hoping to stumble upon the solution. But no matter how many times she tried, the cards remained stubbornly unsorted.\n\nDays turned into weeks, and weeks into months, but Lily's determination never wavered. She continued her quest to uncover the method behind sorting the deck and, in the process, discovered a hidden talent for statistics.\n\nIn her pursuit of knowledge, she stumbled upon the concept of expected values. Lily realized that the elusive solution had an answer tied to the expected number of shuffles required to sort the deck, denoted as S(n). The concept fascinated her, as it seemed to hold the key to cracking the puzzle.\n\nAs the days passed, Lily's understanding of the problem grew. She discovered that each permutation of the deck was equally likely, and the process of sorting involved fixing subsequences of cards that were in the correct order. The cards were shuffled by throwing them into the air, but any correctly sequenced cards remained attached.\n\nThe deeper she delved into the problem, the more captivated Lily became. The mathematical puzzle had become her personal quest, fueling her every waking moment. She knew that solving this problem held the promise of unraveling the secret hidden within the deck of cards.\n\nWeeks turned into months, months into years, as Lily poured over her notebooks, filled with calculations, theories, and countless attempts to find the answer. The people of Mathville began to admire Lily's dedication and relentless pursuit of knowledge.\n\nOne day, as the sun began to set and Lily's determination reached its peak, she observed a remarkable pattern. It seemed as though there was a recursive nature to the problem, with each value of n depending on the previous values.\n\nLily's mind churned with excitement as she contemplated the significance of her discovery. She couldn't shake the feeling that this recursive relationship was the key to unlocking the final answer \u2013 the expected number of shuffles needed to sort the entire deck.\n\nWith trembling hands, Lily ran to her desk, scribbling down the equation that encapsulated her findings. She knew that this was her moment, the culmination of years of hard work and dedication.\n\nFinally, she compiled her research into a letter and sent it off to the renowned mathematician, Professor Fibonacci, whom she had admired from afar. She shared her solution, her observations, and her eagerness to learn more.\n\nDays turned into weeks, and weeks into months. Lily anxiously awaited Professor Fibonacci's response, wondering if her solution was correct. Meanwhile, life in Mathville went on, the town abuzz with curiosity about Lily's mysterious deck of cards.\n\nThen, on a rainy morning, a letter arrived. Professor Fibonacci, impressed by Lily's dedication and perseverance, confirmed that her solution was indeed the expected number of shuffles needed to sort the cards. But he also posed a new challenge \u2013 to calculate S(52), the number she had been yearning to find.\n\nAs Lily held the letter in her hands, her heart raced with excitement. This was it, the moment she had been waiting for. She returned to her desk, ready to face the final hurdle and uncover the answer that had eluded her for so long.\n\nAnd now, dear reader, it is your turn to step into Lily's shoes. What is the expected number of shuffles needed to sort the entire deck of cards, denoted as S(52), rounded to 8 decimal places? Can you solve the mathematical problem that has captivated the brilliant mind of Lily and intrigued the minds of the people in Mathville?"}, {"id": 600, "euler_id": 600, "title": "Integer sided equiangular hexagons", "problem": "Let H(n) be the number of distinct integer sided equiangular convex hexagons with perimeter not exceeding n.\nHexagons are distinct if and only if they are not congruent.\nYou are given H(6)\u00a0=\u00a01, H(12)\u00a0=\u00a010, H(100)\u00a0=\u00a031248.\nFind H(55106).\n\nEquiangular hexagons with perimeter not exceeding 12\n", "solution": "2668608479740672", "difficulty": 35, "story": "Once upon a time in a small, enchanting village known as Hexington, there lived a young girl named Lily. Hexington was renowned for its beautiful hexagonal gardens, where vibrant flowers flourished in harmony. Lily's passion for gardening knew no bounds, and she spent countless hours tending to the hexagonal flower beds.\n\nOne sunny afternoon, while Lily was busily pruning her beloved roses, she noticed a peculiar-looking hexagon hidden amongst the petals. Its sides were of equal length, and the angles at each corner were the same. Intrigued, she picked it up and inspected it closely.\n\nCuriosity led Lily to visit the village's wise mathematician, Professor Mathias. She approached his humble cottage, situated at the edge of Hexington. The professor was known for his incredible knowledge and love for mathematics, and the villagers sought his counsel on various numerical mysteries.\n\nKnocking gently on the door, Lily entered Mathias' study, excitement shining in her eyes. She showed him the hexagon she had discovered and asked, \"Professor, could you please explain how many distinct equiangular convex hexagons there are with a perimeter not exceeding a given number?\"\n\nMathias, intrigued by the unique question, smiled kindly at Lily. He decided to explain the concept using simple words and a captivating story.\n\n\"Lily, my dear,\" began Professor Mathias, \"let me introduce you to a fascinating mathematical function. We call it H(n), the number of distinct integer-sided equiangular convex hexagons with a perimeter not exceeding n. A hexagon is considered distinct only if it is not congruent to any other.\"\n\nLily listened intently as Mathias continued. \"Imagine each side of the hexagon as a different-colored thread. The hexagon's perimeter is the total length of all these threads combined. Now, the function H(n) counts the number of unique ways we can arrange these threads to form hexagons, provided the perimeter does not exceed n.\"\n\nLily was captivated by the analogy, her imagination taking flight. She visualized threads of varying hues weaving together to create extraordinary hexagons. As Professor Mathias further expanded on the concept, he mentioned specific instances of H(n) that had been calculated.\n\n\"H(6) is equal to 1, meaning there is only one distinct hexagon with a perimeter not exceeding 6. Similarly, H(12) takes on the value of 10, signifying that there are ten unique hexagons in this range. And for larger values, H(100) stands at an astonishing 31248.\"\n\nThe young gardener's eyes sparkled with wonder. She couldn't help but imagine entire fields of hexagons, each more beautiful and unique than the last. Mathias then presented her with a challenging task.\n\n\"And now, Lily, my bright apprentice,\" the professor said with a gentle smile, \"I am confident in your abilities. Can you determine the value of H(55106)?\"\n\nLily's heart raced with excitement and determination. She left Mathias' cottage, her mind buzzing with ideas on tackling the problem. How many captivating hexagons awaited her discovery? Would there be enough further permutations to reach such an enormous number?\n\nAnd so, with newfound purpose, Lily embarked on her mathematical journey, guided by her love for hexagons and the knowledge Professor Mathias had bestowed upon her. With each step she took, the question burned within her, driving her to uncover the extraordinary world of equiangular convex hexagons.\n\nAnd now, dear reader, the question falls to you: Can you solve the mystery of H(55106)? Will you, too, unveil the countless unique hexagons waiting to be discovered?"}, {"id": 602, "euler_id": 602, "title": "Product of Head Counts", "problem": "\nAlice enlists the help of some friends to generate a random number, using a single unfair coin. She and her friends sit around a table and, starting with Alice, they take it in turns to toss the coin. Everyone keeps a count of how many heads they obtain individually. The process ends as soon as Alice obtains a Head. At this point, Alice multiplies all her friends' Head counts together to obtain her random number.\n\n\nAs an illustration, suppose Alice is assisted by Bob, Charlie, and Dawn, who are seated round the table in that order, and that they obtain the sequence of Head/Tail outcomes THHH\u2014TTTT\u2014THHT\u2014H beginning and ending with Alice. Then Bob and Charlie each obtain 2 heads, and Dawn obtains 1 head. Alice's random number is therefore 2\u00d72\u00d71=4.\n\n\nDefine e(n,p) to be the expected value of Alice's random number, where n is the number of friends helping (excluding Alice herself), and p is the probability of the coin coming up Tails.\n\n\nIt turns out that, for any fixed n, e(n,p) is always a polynomial in p. For example, e(3,p)=p3+4p2+p.\n\n\nDefine c(n,k) to be the coefficient of pk in the polynomial e(n,p). So c(3,1)=1, c(3,2)=4, and c(3,3)=1.\n\n\nYou are given that c(100,40)\u2261986699437\u00a0(mod\u00a0109+7).\n\n\nFind c(10000000,4000000)mod109+7.\n", "solution": "269496760", "difficulty": 35, "story": "Once upon a time in the small town of Mathlandia, there lived a brilliant and curious young girl named Alice. She was always seeking knowledge and loved to solve puzzles and unravel mysteries. One day, while browsing through her grandfather's dusty books, she stumbled upon a fascinating mathematical problem that piqued her interest.\n\nAlice enlists the help of her friends, Bob, Charlie, and Dawn, to assist her in solving the problem. They gather around a table, eager to embark on this adventure together. On the table, Alice places a coin - a simple tool that is about to unleash a world of mathematical wonder.\n\nThe rules of the game were simple. They would take turns tossing the coin, starting with Alice. Each person would keep count of the number of heads they obtained individually. The game would continue until Alice achieved a Head herself. At this point, Alice would multiply all her friends' head counts together to obtain her random number.\n\nExcitedly, they began their game. The coin danced in the air, flipping between Heads and Tails, as each member of the group anxiously waited for their turn. Their heads were filled with probabilities and excitement.\n\nAs the game progressed, the outcomes of the coin flips created a unique sequence. The first outcome was a Tail, followed by three Heads, then four Tails, two Heads, and finally, another Tail. Bob and Charlie obtained two heads each, while Dawn managed to achieve a single head. Alice joyfully exclaimed, \"My random number is four!\"\n\nNoticing the pattern of their results, Alice wondered if there was a way to calculate the expected value of her random number, given the number of friends and the Tails' probability. She discovered that for any fixed number of friends, the expected value, denoted by e(n,p), is always a polynomial in p. Fascinated by this discovery, she began exploring the relationship between the expected value and the various combinations of heads and tails.\n\nHer research led her to another interesting concept - the coefficient of pk in the polynomial e(n,p), denoted by c(n,k). This coefficient represented the number of times the variable p was raised to the power of k in the polynomial. Alice was captivated by the elegant structure of mathematics, where patterns and relationships were hidden within seemingly complex problems.\n\nBack in present-day Mathlandia, Alice realized that the mathematical problem she had stumbled upon would be the perfect challenge for her fellow puzzle enthusiasts. She decided to share it with the townspeople, hoping to ignite their curiosity and inspire them to unravel the mystery alongside her.\n\nAnd so, she gathered all the math lovers in the town square, explaining the rules of the game and the fascinating concepts she had discovered. The townspeople marveled at the beauty and complexity of mathematics, eager to test their skills and solve the problem.\n\nAs the sun cast a warm glow on the crowd, Alice's eyes sparkled with excitement. She turned to address the gathered crowd and asked, \"Can you find c(10000000,4000000)mod109+7? Let us embark on this mathematical adventure together!\"\n\nAnd with that, the town of Mathlandia became a hub of mathematical exploration, its citizens united by the power of numbers and the thrill of unraveling the unknown.\n\nWill you join them in this quest to solve the mathematical problem?"}, {"id": 610, "euler_id": 610, "title": "Roman Numerals II", "problem": "A random generator produces a sequence of symbols drawn from the set {I, V, X, L, C, D, M, #}. Each item in the sequence is determined by selecting one of these symbols at random, independently of the other items in the sequence. At each step, the seven letters are equally likely to be selected, with probability 14% each, but the # symbol only has a 2% chance of selection.\nWe write down the sequence of letters from left to right as they are generated, and we stop at the first occurrence of the # symbol (without writing it). However, we stipulate that what we have written down must always (when non-empty) be a valid Roman numeral representation in minimal form. If appending the next letter would contravene this then we simply skip it and try again with the next symbol generated.\nPlease take careful note of About... Roman Numerals for the definitive rules for this problem on what constitutes a \"valid Roman numeral representation\" and \"minimal form\". For example, the (only) sequence that represents 49 is XLIX. The subtractive combination IL is invalid because of rule (ii), while XXXXIX is valid but not minimal. The rules do not place any restriction on the number of occurrences of M, so all positive integers have a valid representation. These are the same rules as were used in Problem 89, and members are invited to solve that problem first.\nFind the expected value of the number represented by what we have written down when we stop. (If nothing is written down then count that as zero.) Give your answer rounded to 8 places after the decimal point.", "solution": "319.30207833", "difficulty": 35, "story": "Once upon a time in the ancient city of Rome, there lived a young and curious mathematician named Marcus. Marcus had a deep fascination for numbers and patterns, and he spent most of his time exploring the intricacies of Roman numerals.\n\nOne sunny morning, as Marcus was strolling through the bustling marketplace, he came across a mysterious old man selling ancient scrolls and books. The old man had a twinkle in his eye and a mischievous grin on his face as he looked at Marcus.\n\nIntrigued, Marcus approached the old man and asked, \"What treasures do you have today, sir?\"\n\nThe old man chuckled and replied, \"Ah, young scholar, I have a unique challenge for you. It involves the beauty of Roman numerals.\"\n\nCuriosity sparked within Marcus, and he eagerly accepted the old man's challenge. The old man handed him a worn-out parchment and said, \"You see, this parchment holds a mathematical problem, one that requires not only your knowledge but also your wit.\"\n\nMarcus unfolded the parchment and began reading the problem. As he read about the random generator, the sequence of symbols, and the rules of valid Roman numerals, his excitement grew. The challenge seemed both perplexing and exhilarating.\n\nDetermined to solve the problem, Marcus spent countless hours pouring over ancient texts, consulting with scholars, and wracking his brain for a breakthrough. Days turned into weeks, and weeks into months, but Marcus refused to give up.\n\nOn one particularly starry night, while Marcus was deep in thought, he noticed a pattern emerging from the sequence of symbols. It struck him like a lightning bolt. The symbols were not just random; they followed a hidden order.\n\nEagerly, Marcus worked out the calculations and found the expected value of the number represented. A smile of satisfaction spread across his face as he wrote down the answer, rounded to eight decimal places.\n\nBut just as he finished writing, a powerful gust of wind blew through the open window, carrying the parchment with it. Marcus watched in horror as the precious answer flew out of reach.\n\nMonths of hard work had vanished in an instant. The old man's challenge had not only pushed Marcus to his intellectual limits but also taught him a valuable lesson about perseverance in the face of adversity.\n\nWith a heavy heart, Marcus turned to the old man and asked, \"Sir, I have spent endless days and nights pondering this mathematical problem. I had found the answer, but now it is lost. Can you give me a hint, a clue to rediscover the solution?\"\n\nThe old man's eyes twinkled with amusement as he replied, \"Dear Marcus, the answer lies not in me giving you a clue, but in you finding the resilience to solve the problem again. Remember, the journey itself is sometimes as important as the destination.\"\n\nMarcus pondered the old man's words, feeling a renewed determination filling his soul. He realized that it wasn't just about reaching the answer; it was about the process of discovery, the joy of uncovering hidden truths.\n\nWith a rekindled fire in his heart, Marcus set forth on his quest once more. Armed with his knowledge, his wit, and an unyielding spirit, he delved deeper into the world of Roman numerals, searching for that elusive answer.\n\nAnd now, dear reader, the question lies before you. Can you solve the mathematical problem that has challenged Marcus for so long? What is the expected value of the number represented by what he had written down when he stopped?"}, {"id": 615, "euler_id": 615, "title": "The millionth number with at least one million prime factors", "problem": "\nConsider the natural numbers having at least 5 prime factors, which don't have to be distinct. Sorting these numbers by size gives a list which starts with:\n\n32=2\u22c52\u22c52\u22c52\u22c52\n48=2\u22c52\u22c52\u22c52\u22c53\n64=2\u22c52\u22c52\u22c52\u22c52\u22c52\n72=2\u22c52\u22c52\u22c53\u22c53\n80=2\u22c52\u22c52\u22c52\u22c55\n96=2\u22c52\u22c52\u22c52\u22c52\u22c53\n\u00a0  ...\nSo, for example, the fifth number with at least 5 prime factors is 80.\n\n\nFind the millionth number with at least one million prime factors.  Give your answer modulo 123454321.\n", "solution": "108424772", "difficulty": 35, "story": "Once upon a time, in the peaceful village of Numeria, there lived a young girl named Lily. Lily was no ordinary girl; she possessed an incredible talent for numbers. Her favorite pastime was solving complex mathematical puzzles that baffled even the most seasoned scholars of Numeria.\n\nOne day, while exploring the library, Lily stumbled upon an ancient tome hidden in a dusty corner. Intrigued, she blew away the layers of dust and opened the book to a page filled with strange symbols and equations. As she deciphered the text, she realized that it contained a mathematical problem unlike any she had ever encountered.\n\nThe problem stated that she had to consider the natural numbers with at least five prime factors, which may or may not be distinct. These numbers were then to be arranged in ascending order. The list of these numbers began with 32, followed by 48, 64, 72, 80, and 96. Lily's mind raced as she imagined the possibilities.\n\nShe spent weeks pondering the problem, scribbling formulas and strategies on parchment. Lily became so engrossed in her pursuit that her village friends began to worry about her well-being. They urged her to put aside her studies and join them in playing outside, but Lily's curiosity was insatiable. She saw the beauty in numbers and the endless patterns they formed.\n\nAs the days turned into months, Lily's dedication yielded remarkable results. She discovered how to find these numbers and began expanding the list. With each new number she added, she grew more captivated by the power of mathematics. The list seemed to stretch on indefinitely, filling page after page in her notebook.\n\nFinally, Lily stumbled upon another intriguing question within the problem: Find the millionth number with at least one million prime factors, and give the answer modulo 123454321. Her eyes widened with excitement. This was her greatest challenge yet!\n\nThe young girl's determination intensified as she spent countless hours combing through calculations and theories. Her quest for the millionth number consumed her every thought, her dreams filled with patterns and equations. She delved into the depths of number theory, exploring prime factorizations and prime factor counting functions.\n\nDay by day, Lily inched closer to the solution. She reveled in the thrill of discovery, her heart soaring with each breakthrough. But as the months turned into years, her confidence began to waver. The number of possibilities seemed overwhelming, and doubt crept into her mind.\n\nYet, Lily persisted. She refused to allow self-doubt to cloud her path to enlightenment. With each setback, she learned and adapted, strengthening her resolve. Lily knew that she was close, that the answer was within her reach.\n\nAnd now, dear reader, I leave you with a question, a challenge that Lily, our mathematical prodigy, faced in her quest for knowledge. Can you find the millionth number with at least one million prime factors? Give your answer modulo 123454321."}, {"id": 621, "euler_id": 621, "title": "Expressing an integer as the sum of triangular numbers", "problem": "Gauss famously proved that every positive integer can be expressed as the sum of three triangular numbers (including 0 as the lowest triangular number).  In fact most numbers can be expressed as a sum of three triangular numbers in several ways.\n\nLet G(n) be the number of ways of expressing n as the sum of three triangular numbers, regarding different arrangements of the terms of the sum as distinct.\n\nFor example, G(9)=7, as 9 can be expressed as:  3+3+3, 0+3+6, 0+6+3, 3+0+6, 3+6+0, 6+0+3, 6+3+0.  \nYou are given G(1000)=78 and G(106)=2106.\n\nFind G(17526\u00d7109).", "solution": "11429712", "difficulty": 35, "story": "As the sun dipped below the horizon, casting a warm orange glow over the small village of Pythagoria, the townsfolk gathered eagerly for their annual Harvest Festival. The bustling streets were lined with colorful booths selling everything from juicy apples to handmade crafts, while the air was filled with laughter and the aroma of freshly baked pies.\n\nAmong the crowd was a young girl named Lily, who possessed a keen curiosity and an insatiable thirst for knowledge. She had always been intrigued by numbers, their patterns, and the hidden secrets they held. As the daughter of the village's renowned mathematician, Lily's passion for mathematics had been nurtured from a tender age.\n\nThat evening, her father had a special surprise for her. He took her hand and led her to the center of the village square, where a grand stage had been set up. The crowd hushed, eagerly awaiting the start of the Harvest Festival's main event.\n\n\"Ladies and gentlemen,\" boomed the mayor's voice through the loudspeakers, \"please warmly welcome Professor Gauss, the esteemed mathematician from the neighboring town!\"\n\nLily's eyes sparkled with excitement as she clapped along with the rest of the audience. She had heard of Professor Gauss and admired his groundbreaking work. The professor stepped onto the stage and greeted the village with a humble smile.\n\n\"Thank you, thank you,\" he said, his voice carrying with it the wisdom of a thousand scholars. \"Today, I shall share with you a fascinating discovery.\" He paused for dramatic effect. \"It is said that every positive integer can be expressed as the sum of three triangular numbers!\"\n\nLily's heart fluttered with anticipation as Professor Gauss continued, his voice filled with passion. \"Let G(n) represent the number of ways to express a positive integer, n, as the sum of three triangular numbers, including 0 as the lowest triangular number. It is fascinating to observe that most numbers can be expressed in multiple ways!\"\n\nProfessor Gauss went on to explain the concept of triangular numbers, captivated by his audience's rapt attention. He delighted them with examples, showing how various sums could be rearranged to yield different expressions.\n\nThe crowd erupted into applause, their fascination swirling in the evening breeze. As the festivities continued, Lily's mind buzzed with the mathematical problem the professor had presented. She began pondering the possibilities, imagining the countless ways one could break down a number into the sum of three triangular numbers.\n\nDays turned into weeks, and weeks turned into months. Lily would often find solace in the village library, pouring over mathematical texts and scribbling calculations on yellowed parchment. She delved into the intricate patterns and hidden connections between numbers, determined to decipher the mystery Professor Gauss had laid before her.\n\nOne crisp autumn morning, Lily's father handed her a sealed envelope. A letter from Professor Gauss.\n\n\"Lily,\" her father said with a twinkle in his eyes, \"this letter arrived for you this morning. It's from the professor himself.\"\n\nWith trembling hands, Lily opened the envelope and began reading the professor's words. The letter contained answers to some of her queries but posed a new challenge\u2014one that left her breathless.\n\n\"I commend your dedication, Lily,\" the letter read. \"You have grasped the essence of this problem, but now I present you with a new challenge. The number 17526\u00d7109 seems a mountain too high to climb, but I have faith in your abilities. Find G(17526\u00d7109), and the wisdom of the ancients shall unveil itself to you.\"\n\nLily's heart raced with a mixture of excitement and apprehension. The mathematical problem that had started as a simple curiosity had now become a personal quest\u2014a quest to unlock the secrets of numbers and to reveal the hidden connections that bound them together.\n\nAnd so, armed with the knowledge she had acquired and her unwavering determination, Lily set forth on her mathematical journey. How would she calculate G(17526\u00d7109)? What patterns would she discover along the way? Only time would tell.\n\nAnd now, dear reader, I pose this question to you: Can you solve the enigma that Professor Gauss presented to young Lily? Can you find G(17526\u00d7109)?"}, {"id": 625, "euler_id": 625, "title": "Gcd sum", "problem": "\nG(N)=\u2211j=1N\u2211i=1jgcd(i,j). \nYou are given: G(10)=122.\n\nFind G(1011). Give your answer modulo 998244353\n", "solution": "551614306", "difficulty": 35, "story": "Once upon a time, in the mystical Kingdom of Numbrica, there lived a young mathematician named Elara. Elara possessed a prodigious talent for numbers, able to solve even the most complex mathematical problems with ease. She spent her days poring over obscure theorems and solving perplexing equations, her mind always buzzing with numerical possibilities.\n\nOne sunny morning, as Elara was strolling through the town square, she noticed a crowd gathered around a small noticeboard. Curiosity piqued, she hurried over to see what drew the villagers' attention. It was an announcement from the Kingdom's wise ruler, King Numerius.\n\n\"Attention, citizens! I present to you a tantalizing mathematical challenge!\" the proclamation began, inked in elegant calligraphy. \"Solve the function G(N)=\u2211j=1N\u2211i=1jgcd(i,j) and find G(1011). The first person to provide the correct answer shall receive a magnificent reward!\"\n\nElara's eyes widened with excitement. She quickly deciphered the equation and realized it showcased the function that calculated the sum of the greatest common divisors of pairs of numbers, progressively increasing from 1 to N. Her mathematical instincts immediately recognized the elegance of the problem, and she knew she had to solve it.\n\nAs days turned into weeks, Elara delved deeper into the intricacies of the equation, poring over countless ancient scrolls and consulting revered mathematicians from distant lands. The townspeople marveled at her dedication, witnessing firsthand the power of passion and intellect working together.\n\nFinally, after weeks of tireless effort, Elara uncovered the answer to the first part of the challenge. She discovered that G(10) equaled 122. The townspeople erupted in applause, cheering for their beloved mathematician and the world she had unveiled to them.\n\nHowever, Elara knew that her journey was far from over. The grandest part of the challenge beckoned her\u2014a question that would determine her worth as a mathematician. G(1011 whispered to her from the depths of the equation, its answer shrouded in mystery.\n\nWith each passing day, her determination grew, fueled by the desire to unravel the truth hidden within the digits. Elara's waking hours became consumed by numbers, calculations dancing in her dreams. Constantly immersed in the realm of G(1011), she became obsessed with finding the answer.\n\nAs the deadline for the challenge approached, Elara was faced with a difficult decision. Should she present her partially solved solution, hoping that the King would be lenient and grant her more time to find the elusive answer? Or should she, against her instincts, admit defeat and submit what she had already solved?\n\nUncertainty plagued every corner of her mind. Would she be celebrated for her resilience, or would her reputation crumble under the weight of failure? Elara's heart pounded in her chest as she wrestled with her options. It was a decision that would redefine her fate.\n\nAnd so, dear reader, I leave you with a question that Elara herself grappled with: Can you solve the enigma that is G(1011)? What path will you choose in your mathematical journey? The answer lies within the vast landscape of numbers, awaiting your keen intellect."}, {"id": 632, "euler_id": 632, "title": "Square prime factors", "problem": "For an integer n, we define the square prime factors of n to be the primes whose square divides n. For example, the square prime factors of 1500=22\u00d73\u00d753 are 2 and 5.\nLet Ck(N) be the number of integers between 1 and N inclusive with exactly k square prime factors. You are given some values of Ck(N) in the table below.\nk=0k=1k=2k=3k=4k=5N=10730000N=10261363000N=10360834348100N=104608333635332100N=1056079433562534529720N=106607926335438533583218600N=10760792913353956533140327778342N=10860792694335391965329747329028925778\nFind the product of all non-zero Ck(1016). Give the result reduced modulo 1000000007.", "solution": "728378714", "difficulty": 35, "story": "Once upon a time in a quaint forest village, there lived a boy named Lucas who possessed an insatiable curiosity for the mathematical world. While his peers reveled in outdoor games, Lucas could often be found engrossed in his books, devouring knowledge about numbers and puzzles.\n\nOne fine summer day, as the village prepared for its annual fair, Lucas stumbled upon an ancient scroll hidden in the deepest corner of the library's archive. The scroll bore a cryptic message: \"To unlock the ultimate treasure, one must master the secrets of Ck(N).\"\n\nIntrigued, Lucas began unravelling the mystery behind the mathematical problem inscribed on the scroll. His eyes widened in awe as he discovered that Ck(N) represented the number of integers between 1 and N with precisely k square prime factors. The problem seemed daunting, yet Lucas embraced the challenge with an unyielding determination.\n\nIt was soon clear to Lucas that this mathematical enigma held significant importance beyond mere academic satisfaction. Legends whispered that the ultimate treasure, a key to unprecedented knowledge and power, lay hidden somewhere within the depths of the village.\n\nEmboldened by the prospect of adventure and eager to unravel the secrets of Ck(N), Lucas embarked on a quest. He traveled across vast landscapes, deciphering riddles and consulting sages who held fragments of knowledge about the mystical properties of numbers.\n\nWith each step, Lucas's understanding of Ck(N) grew. He meticulously recorded his findings, creating a map of the mathematical terrain that encompassed the intricacies of prime numbers, squares, and factors. Hours turned to days, and days turned to weeks until, finally, something extraordinary occurred.\n\nIn a hidden village nestled atop a breathtaking mountaintop, Lucas uncovered the last piece of the puzzle. His heart raced as he realized that all his efforts had led him to this moment - the final secret of Ck(N). A sacred library, filled with ancient manuscripts, awaited him. Within its hallowed halls, the solution to Ck(N) awaited, concealed in the encrypted pages.\n\nBut as Lucas trekked towards the library's entrance, a sudden realization struck him. He had been so consumed by the journey of discovery, he forgot the most crucial step - sharing the excitement with others. He realized that knowledge was meant to be shared, not hoarded away in dusty libraries.\n\nWith a renewed spirit, Lucas returned to the village, eager to share his findings with his friends and neighbors. His heart swelled with joy as he hosted workshops and presentations, explaining the intricacies of Ck(N) to anyone who cared to listen.\n\nAs the annual fair arrived, the villagers embraced the spirit of learning, organizing a grand exhibition where Lucas would unveil the mathematical wonders he had discovered. They gathered, eager to experience the excitement that had consumed their fellow villager.\n\nAs Lucas stood before the crowd, his voice brimming with enthusiasm, he asked a question that would ignite their curiosity and set their minds racing towards the Ck(N) problem: \"Can you find the product of all non-zero Ck(1016), reduced modulo 1000000007?\"\n\nThe villagers leaned forward, their eyes sparkling with anticipation. They were ready to embark on their own mathematical journey, inspired by Lucas's quest for knowledge.\n\nAnd so, the question echoed through the air, sparking a ripple of intellectual excitement that would lead the villagers on a path paved by numbers, primes, and factors - a path towards uncovering the treasures that lay hidden within the realm of mathematics."}, {"id": 641, "euler_id": 641, "title": "A Long Row of Dice", "problem": "Consider a row of n dice all showing 1.\nFirst turn every second die,(2,4,6,\u2026), so that the number showing is increased by 1. Then turn every third die. The sixth die will now show a 3. Then turn every fourth die and so on until every nth die (only the last die) is turned. If the die to be turned is showing a 6 then it is changed to show a 1.\nLet f(n) be the number of dice that are showing a 1 when the process finishes. You are given f(100)=2 and f(108)=69.\nFind f(1036).", "solution": "793525366", "difficulty": 35, "story": "Once upon a time in the quaint village of Numeria, there lived a brilliant mathematician called Professor Euclid. He was renowned throughout the kingdom for his ability to solve complex problems with ease. Every evening, he would gather the villagers around to entertain them with his mind-boggling thoughts.\n\nOne particular evening, as the sun set on the horizon painting the sky in hues of orange and purple, Professor Euclid decided to share with the villagers an intriguing mathematical problem. He beckoned everyone to gather in the town square, their curious eyes fixed on him as he began.\n\n\"Consider a row of n dice, all showing 1,\" the professor began, his voice resonating through the crowd. \"First, turn every second die, so the number showing is increased by 1.\" He held up an imaginary row and simulated the process. \"Then, turn every third die. The sixth die will now show a 3.\" A murmur of fascination rippled through the crowd.\n\n\"Next, turn every fourth die, and so on until the last die is turned,\" he continued, captivating the villagers with his words. \"But if the die to be turned is showing a 6, it is changed to show a 1 again.\" The townspeople exchanged curious glances, their minds intrigued by the possibilities.\n\n\"Now, let f(n) be the number of dice that are showing a 1 when the process finishes,\" the professor explained, his eyes gleaming with excitement. \"And here's the challenge: I have discovered that f(100) is only 2, and f(108) is 69.\"\n\nGasps of surprise filled the air, and the villagers exchanged whispers among themselves, trying to fathom the intricacies of the problem. Those who knew Professor Euclid's talent knew that this puzzle was no ordinary one. The crowd eagerly awaited the professor's next words, hoping for a solution.\n\nHowever, instead of providing an answer, Professor Euclid smiled mischievously and gazed into the distance. The sun had disappeared beneath the horizon, casting a mystical glow over the village.\n\n\"Dear villagers,\" he said, his voice filled with anticipation, \"I have a final challenge for all of you. Can you find f(1036)? The answer lies hidden within the numbers, ready to be unraveled by the curious minds among you.\" With that, he raised an eyebrow, challenging the villagers to solve the problem.\n\nAs the crowd dispersed, the villagers pondered over the intriguing puzzle. Some discussed their strategies and theories, while others delved into deep mathematical reasoning. They knew that f(1036) held a secret yet to be discovered, a hidden gem lying in the realm of numbers.\n\nWeeks turned into months, and the villagers persisted in their quest to find f(1036). They gathered every evening to exchange ideas, dissect the problem, and expand their horizons of mathematical thinking. They pondered over patterns, sequences, and the intricate relationships between numbers.\n\nThe more they delved into the problem, the more captivated they became. The challenge had drawn them into a world of numbers, logic, and imagination. Friendships blossomed, and minds sharpened. The village had become a hive of mathematical brilliance, all thanks to the enigmatic challenge posed by Professor Euclid.\n\nAnd so, dear reader, the question remains: Can you find f(1036)? Will you embrace the challenge and venture into the realm of numbers to unravel the solution? Join the villagers of Numeria in their quest and let your curiosity guide you. Let's find the answer together and unlock the mysteries of the dice.\n\nAre you ready to take on the numbers?"}, {"id": 663, "euler_id": 663, "title": "Sums of subarrays", "problem": "Let tk be the tribonacci numbers defined as: \nt0=t1=0;\nt2=1; \ntk=tk\u22121+tk\u22122+tk\u22123\u00a0for\u00a0k\u22653.\nFor a given integer n, let An be an array of length n (indexed from 0 to n\u22121), that is initially filled with zeros.\nThe array is changed iteratively by replacing An[(t2i\u22122\u00a0mod\u00a0n)] with An[(t2i\u22122\u00a0mod\u00a0n)]+2(t2i\u22121\u00a0mod\u00a0n)\u2212n+1 in each step i. \nAfter each step i, define Mn(i) to be max{\u2211j=pqAn[j]:0\u2264p\u2264q<n}, the maximal sum of any contiguous subarray of An. \nThe first 6 steps for n=5 are illustrated below:\nInitial state: A5={0,0,0,0,0}\nStep 1:   \u21d2A5={\u22124,0,0,0,0} , M5(1)=0\nStep 2: \u21d2A5={\u22124,\u22122,0,0,0} , M5(2)=0\nStep 3: \u21d2A5={\u22124,\u22122,4,0,0} , M5(3)=4\nStep 4: \u21d2A5={\u22124,\u22122,6,0,0} , M5(4)=6\nStep 5: \u21d2A5={\u22124,\u22122,6,0,4} , M5(5)=10\nStep 6: \u21d2A5={\u22124,2,6,0,4} , M5(6)=12\nLet S(n,l)=\u2211i=1lMn(i). Thus S(5,6)=32.\nYou are given S(5,100)=2416, S(14,100)=3881 and S(107,1000)=1618572.\nFind S(10000003,10200000)\u2212S(10000003,10000000).", "solution": "1884138010064752", "difficulty": 35, "story": "Once upon a time in the small town of Numerica, there lived a young and curious girl named Lily. From a young age, Lily had always been fascinated by numbers and patterns. She would spend hours in her backyard, drawing complex equations in the dirt and trying to unravel their mysteries. Numerica was a quiet town, and the people were content with their simple lives. But Lily knew that there was something more beyond the surface, hidden in the language of mathematics.\n\nOne sunny day, as Lily was exploring the dusty old shelves of the town library, she discovered a worn-out book that piqued her interest. Its faded pages were filled with intricate formulas and mind-bending problems. As she flipped through the pages, one particular problem caught her attention\u2014the tribonacci numbers.\n\nLily's eyes widened with excitement as she read about the tribonacci sequence\u2014how each number was the sum of the three preceding numbers. She couldn't wait to dive deeper into the world of tribonacci and explore its secrets.\n\nOver the next few days, Lily delved into the problem, experimenting with different formulas and patterns. She soon realized that the tribonacci numbers held more than just numerical value\u2014they held the key to transforming an array called An. Lily's mind raced with possibilities as she tried to understand the purpose of this transformation.\n\nDriven by her insatiable curiosity, Lily decided to apply the tribonacci transformation to An. She would start with an array of zeros and change its elements iteratively as stated in the problem\u2014replacing specific indices with calculated values. As she performed each step, she realized that the maximal sum of any contiguous subarray, Mn(i), changed dramatically, creating a unique pattern each time.\n\nAs Lily continued her exploration, she discovered that the pattern formed by the tribonacci transformation had incredible implications. By summing up the maximal subarray sums Mn(i) for a given set of steps, she could unlock a whole new level of understanding. She named this sum S(n,l)\u2014and it became the focal point of her mathematical journey.\n\nLily's mind was consumed by S(n,l), and she spent countless nights poring over it, seeking answers to its mysteries. She pushed the boundaries of her understanding, constantly experimenting with different values of n and l to unravel the secrets behind S(n,l).\n\nOne day, while sitting peacefully in the town square, Lily could no longer contain her excitement. She had made a breakthrough\u2014a revelation that sent shivers down her spine. Through her calculations, she had uncovered the values of S(5,100), S(14,100), and even S(107,1000). In that moment, a whirlwind of possibilities unfolded before her. It was as if the entire universe was inviting her to explore its hidden realms through the language of numbers.\n\nBut as Lily reveled in her newfound knowledge, a thought struck her like a bolt of lightning\u2014what about S(10000003,10200000) minus S(10000003,10000000)? How could she find the difference between these two monumental sums? The task seemed daunting, even for someone as passionate as Lily.\n\nDetermined to discover the answer, Lily embarked on a journey that would lead her to unexpected places. She sought out renowned mathematicians and studied ancient texts in her quest for the solution. The magnitude of her task seemed overwhelming, but the desire to find the difference between these two vast sums burned within her.\n\nAnd so, dear reader, I leave you with a question\u2014an invitation to step into Lily's world and solve the mathematical problem that has captivated her. Can you find the difference between S(10000003,10200000) and S(10000003,10000000)? As you unravel the layers of this intricate puzzle, be prepared to see the power and beauty that lies within the language of numbers."}, {"id": 711, "euler_id": 711, "title": "Binary Blackboard", "problem": "Oscar and Eric play the following game. First, they agree on a positive integer n, and they begin by writing its binary representation on a blackboard. They then take turns, with Oscar going first, to write a number on the blackboard in binary representation, such that the sum of all written numbers does not exceed 2n.\nThe game ends when there are no valid moves left. Oscar wins if the number of 1s on the blackboard is odd, and Eric wins if it is even.\nLet S(N) be the sum of all n\u22642N for which Eric can guarantee winning, assuming optimal play.\nFor example, the first few values of n for which Eric can guarantee winning are 1,3,4,7,15,16. Hence S(4)=46.\nYou are also given that S(12)=54532 and S(1234)\u2261690421393(mod1000000007).\nFind S(12345678). Give your answer modulo 1000000007.", "solution": "541510990", "difficulty": 35, "story": "Once upon a time, in a quaint village nestled between rolling hills, lived two best friends, Oscar and Eric. They were inseparable and spent most of their days exploring the meadows, climbing trees, and imagining great adventures.\n\nOne sunny afternoon, as they huddled under the shade of their secret tree, Eric excitedly pulled out a parchment from his backpack. On it was a peculiar problem that he had stumbled upon earlier while browsing through books in the village library. It spoke of a game involving positive integers and binary representations \u2013 something neither of them had ever encountered before.\n\nCuriosity brimming in their eyes, the friends decided to try it out. They chose a number, n, and began to write its binary representation on the blackboard. Oscar, being the more headstrong of the two, went first and cautiously wrote his binary number beside Eric's.\n\nAs the game unfolded, Oscar and Eric faced a curious challenge. They had to write numbers in binary form, back and forth, while ensuring that the sum of all the written numbers did not exceed 2n. The game's objective was to determine the winner, with Oscar having an advantage if there were an odd number of '1's on the blackboard, and Eric holding the upper hand if it was even.\n\nExcitement danced in the air as the boys took turns, scribbling numbers fearlessly, making strategic moves to outwit each other. They were lost in a world of calculations and binary wonders. The game seemed simple, yet it held them captive with its endless possibilities.\n\nDays turned into weeks as Oscar and Eric delved deeper into the game, experimenting with different values of n. They discovered patterns, analyzed outcomes, and slowly started to build a strategy to ensure victory. Each victory brought a ray of joy, but with it came an insatiable thirst to conquer bigger challenges.\n\nAs they grew in expertise, the boys couldn't help but wonder about the vastness of possible solutions. How many combinations could they come up with? Which numbers favored Eric, and which ones brought Oscar closer to his triumph? It became a puzzle they yearned to solve.\n\nOne day, after countless matches, Eric realized that their journey needed to find a bigger purpose. He realized that what they were doing held significance beyond their small world. The numbers they played with were not random; they had stories to tell, patterns to reveal, and mysteries to unlock.\n\nThe game became a mystery they both wanted to solve. Oscar and Eric wondered if there was a way to predict which numbers would make Eric guaranteed winners, assuming both played optimally. Each victory or defeat added a piece to a complex and beautiful puzzle yet to be solved.\n\nYears passed, and the friends never lost their enthusiasm for the game. They yearned to discover the solution to the grandest of puzzles\u2014a puzzle that would uncover the sum of all values of n less than or equal to 2N, for which Eric held the winning strategy. It was a quest that went beyond the boundaries of their village, a quest that called for an adventurer with an audacious spirit.\n\nNow, dear reader, it is your time to embark on this adventure. Can you find the answer to the grandest of puzzles? Can you determine S(12345678), the sum of all values of n less than or equal to 2N, for which Eric guarantees victory, assuming optimal gameplay?"}, {"id": 718, "euler_id": 718, "title": "Unreachable Numbers", "problem": "Consider the equation\n17pa+19pb+23pc=n where a, b, c and p are positive integers, i.e.\na,b,c,p>0.\nFor a given p there are some values of n>0 for which the equation cannot be solved. We call these unreachable values.\nDefine G(p) to be the sum of all unreachable values of n for the given value of p. For example G(1)=8253 and G(2)=60258000.\nFind G(6). Give your answer modulo 1000000007.", "solution": "228579116", "difficulty": 35, "story": "Once upon a time, in the distant kingdom of Digiterra, there lived a young mathematician named Ethan. Ethan possessed an uncanny ability to see the world through the lens of numbers and equations. His days were filled with solving complex math problems and unraveling the mysteries of the mathematical universe.\n\nOne bright morning, while strolling through the palace gardens, Ethan stumbled upon an old, tattered scroll buried beneath a thicket of roses. As he carefully unrolled the parchment, he discovered a mathematical problem unlike any he had encountered before. The enigmatic equation danced before his eyes:\n\n17pa + 19pb + 23pc = n\n\nEthan's curiosity was instantly piqued. What could this equation represent? And why were there values of n for which the equation could not be solved? Determined to unravel this mathematical puzzler, Ethan set out on a quest to discover the secrets it held.\n\nEquipped with nothing but his trusty quill and parchment, Ethan visited every city, sought the wisdom of scholars, and consulted ancient textbooks about the mysterious equation. But to his surprise, no one possessed the knowledge he sought. Some even dismissed it as an unsolvable riddle, a mere mathematical impossibility.\n\nYet, Ethan remained undeterred. He delved deeper into the realm of numbers, poring over dusty manuscripts and conferring with esteemed mathematicians from far-flung lands. Slowly, but surely, he began to notice a pattern emerging.\n\nFor each value of p, there existed a distinct set of unreachable values for n. These values seemed to defy mathematical logic, evading every attempt to find a solution. Ethan realized that the key to unlocking the equation's secrets lay hidden within these unreachable values.\n\nAs Ethan journeyed further into the depths of his mathematical exploration, the once-ordinary equation took on an aura of mystery and intrigue. Its significance began to transcend mere numbers, intertwining with the fabric of the world itself. With each discovery, Ethan's enthusiasm grew, his passion fueled by the desire to understand the deepest truths of mathematics.\n\nDays turned into weeks, and weeks into months. But still, Ethan persisted, relentless in his pursuit of the solution. As he ventured deeper into the heart of the mystery, he pondered the implications of these unreachable values. Could they hold the key to unlocking hidden dimensions of the mathematical realm?\n\nFinally, after months of tireless dedication, Ethan made a breakthrough. His calculations and observations led him to a startling realization - the unreachable values of n formed a rare and elusive sequence. Each set of unreachable values seemed to carry a unique pattern that could be deciphered, given enough time and perseverance.\n\nBut as Ethan stood on the precipice of this extraordinary revelation, he realized that he could not find the sum of all unreachable values for G(6) alone. He needed the assistance of kindred minds, the mathematical community, and those who saw the beauty in the elegant dance of numbers.\n\nAnd so he asks you, dear reader, to take up the mantle and solve the mystery of G(6). Can you find the sum of all unreachable values for the given value of p, modulo 1000000007? Can you unveil the hidden truths locked within the enigma of the equation? In your capable hands, the fate of the mathematical universe rests.\n\nThe question lingers in the air, waiting for an intrepid soul to answer. Will you be the one to solve the puzzle and guide Ethan to the realms of mathematical enlightenment? The choice is yours to make."}, {"id": 720, "euler_id": 720, "title": "Unpredictable Permutations", "problem": "Consider all permutations of {1,2,\u2026N}, listed in lexicographic order.For example, for N=4, the list starts as follows:\n\n(1,2,3,4)(1,2,4,3)(1,3,2,4)(1,3,4,2)(1,4,2,3)(1,4,3,2)(2,1,3,4)\u22ee\n\n\nLet us call a permutation P unpredictable if there is no choice of three indices i<j<k such that P(i), P(j) and P(k) constitute an arithmetic progression. For example, P=(3,4,2,1) is not unpredictable because P(1),P(3),P(4) is an arithmetic progression.\n\n\nLet S(N) be the position within the list of the first unpredictable permutation.\n\n\nFor example, given N=4, the first unpredictable permutation is (1,3,2,4) so S(4)=3.\nYou are also given that S(8)=2295 and S(32)\u2261641839205(mod1000000007).\n\n\nFind S(225). Give your answer modulo 1000000007.\n", "solution": "688081048", "difficulty": 35, "story": "Once upon a time, in the mystical land of Numeria, there lived a young and curious mathematician named Alice. Alice had always been intrigued by the beauty and complexity of numbers, and she spent countless hours exploring their secrets. One day, while delving into a dusty old tome in the Kingdom's library, Alice stumbled upon a mathematical problem that begged to be solved.\n\nAs she read the problem, Alice's eyes widened with excitement. The problem called for her to consider permutations of a set of numbers, starting with the smallest possible values. She couldn't help but bite her lip in anticipation as she imagined the infinite possibilities that lay before her.\n\nDetermined to solve the problem, Alice decided to take a break from her daily routine and embark on a quest to uncover the first unpredictable permutation. She knew that this would require her to examine each permutation meticulously, being mindful of any potential arithmetic progressions that would disqualify it from being considered unpredictable.\n\nWith a determined spirit, Alice set off on her journey, armed with pen, paper, and an unwavering determination. She traveled through forests and crossed rivers, seeking solitude to focus on her task. Countless days turned into weeks as she painstakingly labored over the permutations, analyzing and assessing each one.\n\nAlong the way, Alice encountered fellow travelers who were intrigued by her purpose. Some offered their assistance, trying to comprehend the perplexing nature of the problem. Together, they debated and brainstormed, hoping to gain new insights and find a breakthrough. Yet, despite their collective efforts, the solution remained elusive.\n\nAs Alice continued her quest, she found herself face to face with numerous challenges. Doubt crept into her mind, testing her resolve. But she pushed forward, knowing that the answer lay just beyond the horizon.\n\nOne evening, as dusk settled over a tranquil valley, Alice finally experienced a profound revelation. The unpredictable permutation she sought had materialized before her very eyes. With trembling hands, she recorded the order of the numbers, feeling the weight of triumph and satisfaction lifting her spirit.\n\nBut as Alice celebrated her discovery, a nagging question resounded in her mind. If she pursued this quest, what other unexpected wonders might she uncover? With 224 permutations still unexplored, the potential for even greater revelations beckoned her.\n\nLost in her thoughts, Alice could not help but wonder \u2013 What if she discovered the first unpredictable permutation for N=225? What would its position be within the list? How would knowing the answer shape her understanding of the fascinating world of numbers?\n\nAnd so, dear reader, I pose the same question to you. Can you solve the mathematical problem that captivated Alice's imagination? What is the position, modulo 1000000007, of the first unpredictable permutation for N=225 within the list?\n\nThe answer. The journey. The magic of numbers. It is now in your hands to unlock the secrets that lie in the realm of lexicographic permutations. Will you accept the challenge and embark on this mathematical quest, as Alice did before you?"}, {"id": 734, "euler_id": 734, "title": "A bit of prime", "problem": "\nThe logical-OR of two bits is 0 if both bits are 0, otherwise it is 1.\nThe bitwise-OR of two positive integers performs a logical OR operation on each pair of corresponding bits in the binary expansion of its inputs.\n\n\nFor example, the bitwise-OR of 10 and 6 is 14 because 10=10102, 6=01102 and 14=11102.\n\n\nLet T(n,k) be the number of k-tuples (x1,x2,\u22ef,xk) such that\n\nevery xi is a prime \u2264n\nthe bitwise-OR of the tuple is a prime \u2264n\n\nFor example, T(5,2)=5. The five 2-tuples are (2, 2), (2, 3), (3, 2), (3, 3) and (5, 5).\n\nYou are given T(100,3)=3355 and T(1000,10)\u22612071632(mod1000000007)\n\n\nFind T(106,999983). Give your answer modulo 1000000007\n", "solution": "557988060", "difficulty": 35, "story": "Once upon a time, in the magical kingdom of Numeria, there lived a young and curious mathematician named Lila. Lila had always been fascinated by numbers and their secrets. She loved nothing more than spending her days unraveling complex mathematical problems. Her greatest desire was to uncover the hidden patterns and connections between numbers that could unlock the mysteries of the universe.\n\nOne bright morning, as Lila sat at her desk pouring over her books and notes, she stumbled upon a peculiar problem. It was a mathematical riddle that seemed to have no logical explanation, and it instantly piqued her curiosity.\n\n\"The bitwise-OR of two positive integers performs a logical OR operation on each pair of corresponding bits in the binary expansion of its inputs,\" Lila muttered to herself as she read through the problem. \"Fascinating!\"\n\nLost in her thoughts, Lila tried to make sense of the problem. She knew that the bitwise-OR of two bits returned 0 only if both bits were 0. Otherwise, it returned 1. But how could she use this information to solve the riddle she now faced?\n\nThe riddle posed a task - to find the number of k-tuples that met certain conditions. The tuples had to consist of prime numbers less than or equal to a given value, and their bitwise-OR had to be a prime number as well. Lila immediately felt a surge of excitement. She could already see the beauty hidden within the numbers.\n\nDetermined to crack the riddle, Lila embarked on a journey through the kingdom of Numeria. She visited the ancient libraries, explored mystical caves, and spoke with wise mathematicians who had spent their lives delving into the secrets of numbers. One by one, Lila discovered the ways in which prime numbers interacted and revealed their intricate connections.\n\nDays turned into weeks, and weeks turned into months. Lila's dedication and passion for her quest burned brighter with each passing moment. Finally, after a year of tireless effort, she found her answers. The number of 3-tuples that satisfied the conditions in the kingdom of Numeria equaled 3355, while the corresponding number for 10-tuples was 2071632 modulo 1000000007.\n\nAs Lila rejoiced in her accomplishments, a new challenge presented itself \u2013 T(106,999983). It was a massive undertaking, but Lila knew that it was within her reach. She pondered the question deeply, combing through her knowledge of prime numbers, logical operations, and the intricacies of binary expansions.\n\nNow, dear reader, I ask you: What is T(106,999983)? Can you unravel the mysteries that lie within this enigma? The answer may be elusive, but the journey is certain to be as enchanting as the world of numbers itself."}, {"id": 738, "euler_id": 738, "title": "Counting Ordered Factorisations", "problem": "Define d(n,k) to be the number of ways to write n as a product of k ordered integers\nn=x1\u00d7x2\u00d7x3\u00d7\u2026\u00d7xk1\u2264x1\u2264x2\u2264\u2026\u2264xk\nFurther define D(N,K) to be the sum of d(n,k) for 1\u2264n\u2264N and 1\u2264k\u2264K.\nYou are given that D(10,10)=153 and D(100,100)=35384.\nFind D(1010,1010) giving your answer modulo 1000000007.", "solution": "143091030", "difficulty": 35, "story": "Once upon a time in the magical land of Numeria, there lived a gifted young girl named Leona. Leona had always been fascinated by numbers. Every day, she would explore the enchanting forest near her home, searching for patterns and equations hidden in the world around her.\n\nOne sunny afternoon, as Leona wandered deeper into the forest, she stumbled upon a peculiar cottage. The cottage was nestled amidst tall trees, its roof covered in vibrant moss. Curiosity piqued, Leona cautiously approached the door and knocked.\n\nTo her surprise, an old wizard with a long flowing white beard opened the door. \"Ah, young Leona,\" he greeted her with a smile. \"I've been expecting you. I am Professor Fibonacci, and I have a mathematical problem for you to solve.\"\n\nLeona's eyes sparkled with excitement. She loved a good challenge. \"I'm ready, Professor,\" she replied eagerly. \"What is the problem?\"\n\nProfessor Fibonacci led Leona to his study, where countless scrolls and dusty books covered the shelves. He began explaining his problem, the enigmatic nature of d(n,k) and the mysterious function D(N,K). Leona listened attentively, her mind swirling with magical formulas and possibilities.\n\n\"In simpler terms,\" Professor Fibonacci summarized, \"d(n,k) is the number of ways to write a given number, n, as a product of k ordered integers. And D(N,K) is the sum of d(n,k) for certain ranges of n and k.\"\n\nLeona's eyes widened as she realized the power behind this mathematical problem. The very foundations of Numeria seemed to depend on D(N,K). The professor explained further, recounting how he had calculated D(10,10) and D(100,100) using his vast knowledge and special algorithms.\n\n\"I've been trying to find the value of D(1010,1010), but the answer has eluded me,\" Professor Fibonacci admitted with a sigh. \"Leona, I believe you have the talent and determination to unravel this mystery. Will you accept this challenge?\"\n\nLeona's heart swelled with pride. To be entrusted with such a task was an honor beyond measure. She nodded with glee, ready to embark on her mathematical quest.\n\nLeona spent days and nights pouring over scrolls, meditating by moonlight, and tinkering with magical equations. As her understanding grew, so did her fascination with the enchanting power of numbers. She marveled at the elegance and complexity of d(n,k) and its profound impact on D(N,K).\n\nWith each passing day, Numeria's denizens noticed a change. The once vibrant kingdom now buzzed with an air of anticipation. Leona's quest had stirred a spirit of curiosity and determination among the people. The villagers organized gatherings, sharing their wisdom and insights into the magical realm of numbers.\n\nFinally, after weeks of tireless work, Leona's journey came to an end. Armed with newfound knowledge and a burning passion for mathematics, she stood before Professor Fibonacci.\n\n\"I've found it,\" Leona exclaimed, pride and triumph radiating from her. \"I have unraveled the mystery of D(1010,1010).\"\n\nProfessor Fibonacci's eyes lit up, mirroring Leona's excitement. \"Tell me, Leona,\" he eagerly inquired, \"what is the value of D(1010,1010)?\"\n\nBut before Leona could reveal her discovery, a thought crossed her mind. She realized the immense power of D(1010,1010). It held the key to shaping Numeria's destiny, unlocking doors to boundless possibilities. And thus, a question formed in Leona's mind, one that would test the imagination and determination of those who ventured into the world of mathematics.\n\nLeona turned to the reader, her eyes filled with anticipation. \"Now, my friend,\" she asked with a smile, \"can you find the value of D(1010,1010) for me? Solve the mystery and unlock the magic hidden within.\"\n\nAnd so, dear reader, the question remains. Can you discover the value of D(1010,1010), giving your answer modulo 1000000007? Let the adventure begin!"}, {"id": 744, "euler_id": 744, "title": "What? Where? When?", "problem": "\"What? Where? When?\" is a TV game show in which a team of experts attempt to answer questions. The following is a simplified version of the game.\nIt begins with 2n+1 envelopes. 2n of them contain a question and one contains a RED card.\nIn each round one of the remaining envelopes is randomly chosen. If the envelope contains the RED card the game ends. If the envelope contains a question the expert gives their answer. If their answer is correct they earn one point, otherwise the viewers earn one point. The game ends normally when either the expert obtains n points or the viewers obtain n points.\nAssuming that the expert provides the correct answer with a fixed probability p, let f(n,p) be the probability that the game ends normally (i.e. RED card never turns up).\nYou are given (rounded to 10 decimal places) that\nf(6,12)=0.2851562500,\nf(10,37)=0.2330040743,\nf(104,0.3)=0.2857499982.\n\nFind f(1011,0.4999). Give your answer rounded to 10 places behind the decimal point.", "solution": "0.0001999600", "difficulty": 35, "story": "Once upon a time, in a small town, there lived a renowned team of experts who had a tremendous passion for all things intellectual. Their fame often made rest on their shoulders, but they were always eager to accept a new challenge and show off their knowledge. As the town's favorite TV game show, \"What? Where? When?\" came back for another season, the experts were excited to participate and push the boundaries of their intellect once again.\n\nThe game show commenced with great enthusiasm, both from the experts and the viewers. The stage was set with 2n+1 envelopes, containing either a question or a dreaded RED card. The goal was clear - the experts had to accumulate n points before the viewers reached the same milestone. But unknown to them, a mathematical problem was lurking beneath the surface, waiting to unravel their fate.\n\nIn each round, the contestants would randomly choose one of the remaining envelopes. If it contained the RED card, the game came to a sudden end. However, if a question was discovered, the expert entrusted the responsibility of providing the correct answer to earn a point for their team. But therein lay the challenge - their accuracy was heavily reliant on a fixed probability, p. With each passing moment, the odds fluctuated between success and failure.\n\nAs the game intensified, the experts found their knowledge and intuition tested. The air buzzed with suspense as questions were answered swiftly, pushing the experts closer to victory. On the surface, it seemed like a mere trivia show, but the outcome lay precariously in f(n,p), the probability that the game would end normally, without the RED card ever making an appearance.\n\nFor days, weeks, and months, the game continued. The experts fought valiantly, gaining points while the viewers chipped away at their lead. Calculations and probabilities began to occupy their minds during every waking moment. They realized that their destiny hinged upon understanding the true nature of f(n,p) and its impact on their chances of triumph.\n\nWith every round completed, the experts witnessed the value of f(n,p) shaping the course of their game. They noticed patterns when the probability p leaned towards success, while in other scenarios, it plummeted miserably. The mathematical problem became an integral part of their narrative, guiding their decisions, and influencing their strategies. But at the same time, it haunted them, reminding them of the uncertainty that loomed over every envelope they chose.\n\nThe grueling battle between the experts and the viewers continued, drawing gasps of both admiration and anxiety from the spectators. Ultimately, the time came for their final challenge, their last attempt at securing victory in the game show. The experts found themselves yearning for the answer to f(1011,0.4999), meticulously calculating the probability while trying to stay focused amidst the mounting pressure.\n\nAnd now, dear reader, it falls upon you to solve the unanswered question that has remained hidden within the depths of the story: What is the value of f(1011,0.4999)? Can you calculate the probability in question, rounding your answer to ten places behind the decimal point? The fate of the experts, their victory or defeat, lies within your mathematical prowess."}, {"id": 746, "euler_id": 746, "title": "A Messy Dinner", "problem": "n families, each with four members, a father, a mother, a son and a daughter, were invited to a restaurant. They were all seated at a large circular table with 4n seats such that men and women alternate.\nLet M(n) be the number of ways the families can be seated such that none of the families were seated together. A family is considered to be seated together only when all the members of a family sit next to each other.\nFor example, M(1)=0, M(2)=896, M(3)=890880 and M(10)\u2261170717180(mod1000000007)\nLet S(n)=\u2211k=2nM(k)\nFor example, S(10)\u2261399291975(mod1000000007)\nFind S(2021). Give your answer modulo 1000000007.", "solution": "867150922", "difficulty": 35, "story": "Once upon a time in the small village of Mathlandia, there was an annual gathering of families. This special event took place at a local restaurant and brought together families from all across the village. The head of the village, Mr. Mathew, always made sure this event was a memorable one.\n\nThis year's gathering was no different. Mr. Mathew had arranged for a large circular table with 4n seats, beautifully decorated with flowers and candles. The families were excitedly making their way to the restaurant, dressed in their finest attire and looking forward to an evening of laughter and good food.\n\nAmong the families attending this event were the Cartwrights, the Parkers, and the Andersons. They were all close friends and always sat together whenever they could. But little did they know, this year, Mr. Mathew had decided to change things up. He wanted to see if he could create a configuration where no families would be seated together, just to make the event a little more interesting.\n\nAs the families entered the restaurant, the ma\u00eetre d' greeted them with warm smiles and led them to their seats. The Cartwrights, the Parkers, and the Andersons looked around in confusion. They couldn't find any vacant seats together. They realized that they would be split up and seated next to members of other families.\n\nThe Cartwrights were ushered to a table where Mrs. Cartwright was seated between Mr. Parker and Mr. Anderson, while their daughter Chloe sat between Mrs. Parker and Mrs. Anderson. At a neighboring table, Mr. Cartwright found himself seated between Mrs. Parker and Mrs. Anderson, with their son Ethan sitting between Mr. Parker and Mr. Anderson.\n\nAs they settled into their seats, they couldn't help but feel a sense of disappointment at being separated. They had looked forward to spending the evening together, sharing stories and laughter just like they always did. However, little did they know that their seating arrangement was no mere coincidence\u2014it was a carefully orchestrated plan to solve a mathematical problem.\n\nUnbeknownst to them, Mr. Mathew had been studying a mathematical problem called M(n). It captured his fascination, and he wanted to understand the ways in which families could be seated together or apart. He realized that finding a solution to this problem could be challenging, but he was determined to push the boundaries of his mathematical prowess.\n\nAs the evening progressed, Mr. Mathew observed the families from a distance, discreetly noting down the seating arrangements in his notebook. He wondered how many ways the families could be seated such that none of them were together. He called this number M(n).\n\nEach time the ma\u00eetre d' sat another family, Mr. Mathew's excitement grew. Every new seating arrangement brought him closer to solving the problem at hand. As the night went on, he noticed patterns and formed mathematical equations in his mind, hoping to find a formula that would yield the number of seating configurations.\n\nMeanwhile, the Cartwrights, the Parkers, and the Andersons were getting used to their new tablemates. At first, they felt a sense of unfamiliarity and discomfort, but as they engaged in conversations, they realized that getting to know new people brought a certain charm and diversity to their evening.\n\nAs the night drew to a close, with laughter and joy filling the air, Mr. Mathew couldn't shake off the excitement of what he had discovered. He had found a formula to calculate the sum of all possible seating arrangements, which he named S(n).\n\nBut the question that lingered in Mr. Mathew's mind was how to find the value of S(2021), which he desired to know modulo 1000000007. He had solved smaller values of n and witnessed the magic of the numbers firsthand, but this particular challenge seemed daunting.\n\nSo here lies the question that needs an answer: S(2021), what would be its value modulo 1000000007?\n\nThe families left the restaurant with smiles on their faces, unaware of the magical mathematical journey they had unknowingly embarked upon. As they dispersed into the night, Mr. Mathew continued his calculations, his mind racing with ideas and possibilities.\n\nWill you be the one to solve the puzzle and find the value of S(2021) modulo 1000000007?"}, {"id": 750, "euler_id": 750, "title": "Optimal Card Stacking", "problem": "\nCard Stacking is a game on a computer starting with an array of N cards labelled 1,2,\u2026,N.\nA stack of cards can be moved by dragging horizontally with the mouse to another stack but only when the resulting stack is in sequence. The goal of the game is to combine the cards into a single stack using minimal total drag distance.\n\n\n\n\nFor the given arrangement of 6 cards the minimum total distance is 1+3+1+1+2=8.\n\n\nFor N cards, the cards are arranged so that the card at position n is 3nmod(N+1),1\u2264n\u2264N.\n\n\nWe define G(N) to be the minimal total drag distance to arrange these cards into a single sequence.\nFor example, when N=6 we get the sequence 3,2,6,4,5,1 and G(6)=8.\nYou are given G(16)=47.\n\n\nFind G(976).\n\n\nNote: G(N) is not defined for all values of N.\n", "solution": "160640", "difficulty": 35, "story": "Once upon a time, in the small village of Numeria, there lived a gifted young mathematician named Ethan. Ethan was known throughout the land for his extraordinary mathematical abilities and his insatiable curiosity. He would spend hours solving complex equations and unraveling the secrets of numbers.\n\nOne day, while wandering through the village square, Ethan stumbled upon a group of villagers engrossed in an intense card-stacking game on their computers. They were huddled together, mumbling about the minimum total drag distance required to arrange the cards into a single sequence. Intrigued by the game and the mathematical puzzle it presented, Ethan couldn't resist investigating further.\n\nHe peered over the shoulder of a young boy who was fervently attempting to combine the cards. The boy explained the rules of the game to Ethan, detailing the specific movements allowed and the goal of achieving the minimal total drag distance. The cards were labeled from 1 to N, and the arrangement of the cards followed a specific pattern.\n\n\"The cards are arranged in such a way that the card at position n is 3n mod (N+1), with 1 \u2264 n \u2264 N,\" the boy explained. \"For example, with N equal to 6, the sequence becomes 3, 2, 6, 4, 5, 1, and the minimal distance required to combine them into a single sequence is 8.\"\n\nEthan listened intently, his mind buzzing with calculations and possibilities. He could see the underlying mathematics behind the game and understood how to approach finding the minimal total drag distance for any given arrangement of cards.\n\nDetermined to explore this problem further, Ethan left the village and embarked on a journey. He traveled far and wide, seeking out ancient scrolls and knowledgeable sages who possessed wisdom about intricate mathematical puzzles. After months of relentless searching, he stumbled upon an ancient library hidden deep within a forest.\n\nDelving into the library's vast collection, Ethan discovered a worn-out manuscript that hinted at the elusive answer he sought. The manuscript mentioned that G(16) equaled 47, implying that the solution to G(976) still lay hidden in the ancient texts.\n\nEthan's mathematical intuition sparked with excitement as he realized the significance of what he had found. The secret to unraveling G(976) was waiting to be unveiled, but where? Filled with purpose and determination, Ethan started studying the manuscript, deciphering its cryptic messages and uncovering hidden clues.\n\nAs Ethan tirelessly worked to solve the puzzle, a question began to form in his mind. What miraculous sequence would the cards follow when N was equal to 976? How would the cards need to be arranged, and what would be the minimal total drag distance required to combine them into a single sequence?\n\nThe village of Numeria eagerly awaited Ethan's return, his fellow villagers yearning for the answer to G(976). The young mathematician's quest had become entrenched in their hearts, his journey a symbol of hope and the power of knowledge.\n\nAnd so, the question remains: What is G(976)? Will Ethan unlock the secret, bring his wisdom back to Numeria, and elevate the village to a new era of mathematical enlightenment? Only time will tell, and with it, the unfolding of yet another numerical mystery."}, {"id": 760, "euler_id": 760, "title": "Sum over Bitwise Operators", "problem": "Define\ng(m,n)=(m\u2295n)+(m\u2228n)+(m\u2227n)\nwhere \u2295,\u2228,\u2227 are the bitwise XOR, OR and AND operator respectively.\nAlso set\nG(N)=\u2211n=0N\u2211k=0ng(k,n\u2212k)\nFor example, G(10)=754 and G(102)=583766.\nFind G(1018). Give your answer modulo 1000000007.", "solution": "172747503", "difficulty": 35, "story": "In the mystical kingdom of Mathsteria, there lived a young sorcerer named Magnus. Known for his unrivaled talent in magic, Magnus had always possessed a deep curiosity for the magical properties of numbers. He spent his days studying the intricacies of mathematical problems, seeking to uncover the secrets hidden within them. One fateful day, Magnus stumbled upon an ancient tome hidden within the depths of the Mathsteria Library, which contained a powerful enchantment known as the Problem of the Ancient Sorcerer.\n\nAs he read the spellbound pages, Mathsteria revealed its deep connection to the Problem of the Ancient Sorcerer. It stated that the kingdom could only thrive under the protection of an age-old enchantment, G(N), which must be continuously upheld. In order to maintain this enchantment, it was necessary to find G(1018), the summation of a complicated equation, and give the final answer modulo 1000000007. This number was the key to preserving the kingdom's prosperity, influencing everything from the harvests to the happiness of the people.\n\nEager and determined, Magnus dedicated his life to solving the riddle hidden within the mathematical problem. His expertise in magic made him the ideal candidate, and the Council of Elders entrusted him with the task of finding G(1018). The well-being of the kingdom now rested on Magnus' shoulders.\n\nMagnus traveled far and wide, seeking advice and guidance from the wise scholars and powerful sorcerers who inhabited distant lands. He came across scholars knowledgeable in both mathematics and magic, who explained the significance of the bitwise operators - XOR, OR, and AND - and how they intertwined with Mathsteria's ancient enchantment.\n\nAs Magnus dug deeper into the problem, he realized that the bitwise operators held a mysterious power to manipulate reality itself. The XOR operator could create an intricate dance of binary digits, the OR operator had the ability to merge paths together, and the AND operator provided stability to the foundation of all magical calculations. It was through these operators that Mathsteria's enchantment unfolded.\n\nSolving the mathematical problem became not just a quest for knowledge, but a journey of self-discovery. Magnus delved into the fundamental nature of Mathsteria, exploring its magical currents and deciphering the connection between the equations and the kingdom's prosperity. With each step, he unlocked the secrets of the ancient enchantment, peering into the depths of the mystical matrices that governed the lives of the Mathsterians.\n\nYet as Magnus delved deeper into the problem, he also began to question the reliance of an entire kingdom on a single mathematical equation. He wondered if there were alternative paths to protecting the realm, if there was an unconventional solution beyond the answer provided by the G(N) summation. Could there be a different approach to safeguarding Mathsteria's prosperity?\n\nWith all the knowledge he had acquired, Magnus faced a dilemma. Should he continue his quest to find the solution to G(1018) as the Council of Elders instructed, or should he follow his intuition and explore uncharted territories? Would undoing the spell and venturing into the unknown bring chaos or reveal a new path to Mathsteria's survival?\n\nAs Magnus weighed his options, he knew that his decision would shape not only his own future but also the destiny of the entire kingdom. Will he summon the courage to challenge conventional wisdom and forge a new path? Or will he embrace the tried and tested, following the footsteps of past sorcerers to find G(1018)? How might his choice impact the enchanted land of Mathsteria?\n\nAnd so, dear reader, I pose this question to you: Can you find the answer to G(1018)? Step into the magical realm of Mathsteria and unravel the mysteries that lie within. Have faith in your abilities and embark on the quest to preserve Mathsteria's prosperity. Only then, can the enchanted kingdom thrive under the power of mathematics and magic."}, {"id": 766, "euler_id": 766, "title": "Sliding Block Puzzle", "problem": "A sliding block puzzle is a puzzle where pieces are confined to a grid and by sliding the pieces a final configuration is reached. In this problem the pieces can only be slid in multiples of one unit in the directions up, down, left, right. \nA reachable configuration is any arrangement of the pieces that can be achieved by sliding the pieces from the initial configuration.\nTwo configurations are identical if the same shape pieces occupy the same position in the grid. So in the case below the red squares are indistinguishable. For this example the number of reachable configurations is 208.\n\n\nFind the number of reachable configurations for the puzzle below. Note that the red L-shaped pieces are considered different from the green L-shaped pieces.\n\n\n\n", "solution": "2613742", "difficulty": 35, "story": "Once upon a time in a quaint little village, there lived a young girl named Lily. Lily was an inquisitive child who loved solving puzzles and riddles. But there was one puzzle that had been bothering her for days\u2014the sliding block puzzle.\n\nOne sunny afternoon, Lily stumbled upon an old and dusty book in the attic. As she blew off the cobwebs, she discovered a page displaying an intriguing sliding block puzzle. It depicted a grid with colorful L-shaped pieces: red and green. The goal was to slide the pieces around and recreate a final configuration.\n\nLily's eyes sparkled with excitement as she decided to take on this mathematical challenge. She cleared a space on her bedroom floor and recreated the grid using red and green construction paper.\n\nWith a determined expression, Lily began sliding the pieces around, trying various configurations. Hours turned into days as she tirelessly moved the L-shaped blocks up, down, left, and right. She was thrilled whenever she discovered a new arrangement, but none of them matched the final configuration shown in the book.\n\nAs she continued her quest to solve the puzzle one evening, Lily's grandmother entered the room carrying a tray of freshly baked cookies. She observed Lily's furrowed brow and asked, \"My dear, what seems to be troubling you?\"\n\nWithout taking her eyes off the grid, Lily explained the challenge that had captured her attention. She described how the red and green L-shaped pieces could only be slid in multiples of one unit in four directions. Her grandmother listened attentively, intrigued by the mathematical problem.\n\n\"You know, Lily,\" her grandmother said, placing a warm cookie on the table next to Lily, \"mathematics can sometimes be fascinatingly beautiful and yet incredibly complex. But it's through perseverance and exploration that we unlock its secrets.\"\n\nWith renewed determination, Lily continued her quest to find the final configuration. Days turned into weeks, but the solution eluded her. Her parents and friends admired her determination but couldn't assist her further. It seemed as though Lily was about to give up.\n\nOne bright morning, as Lily stared at the unfinished puzzle, her grandmother appeared before her. She had a glimmer in her eyes that Lily had never seen before. \"Lily,\" she said, \"I believe I've discovered something about these sliding block puzzles.\"\n\nCuriosity ignited within Lily as she absorbed every word her grandmother spoke. Her grandmother explained that the number of reachable configurations for a sliding block puzzle could be mathematically determined\u2014a revelation that left Lily both awe-inspired and intrigued.\n\n\"You see, my dear,\" her grandmother continued, \"the puzzle you're trying to solve has a specific number of reachable configurations. It's a mind-boggling 208!\"\n\nLily's eyes widened in astonishment and excitement. She couldn't believe that the answer to her puzzle lay within the very book that had guided her on this journey.\n\n\"But why, grandmother?\" Lily questioned eagerly. \"Why are there exactly 208 reachable configurations for this puzzle?\"\n\nHer grandmother chuckled softly and replied, \"Ah, my dear Lily, that is a question for you to ponder. The answer lies within the intricate logic and patterns hidden in the sliding block puzzle. I have shared with you the number of configurations, but the why\u2014it's something you must discover on your own. Embrace the journey, my child, and let your curiosity guide you.\"\n\nLily's mind swirled with ideas and possibilities as she looked at the unfinished puzzle. Excitement and determination radiated from her as she thought about the mathematical problem her grandmother had unveiled.\n\nAnd now, dear reader, the question is passed on to you. Can you unveil the secret behind the number of reachable configurations for the sliding block puzzle? How can the placement and movement of the L-shaped pieces lead to exactly 208 different configurations? The answer awaits you as you embark on this mathematical adventure. Will you accept the challenge and discover the hidden patterns?"}, {"id": 794, "euler_id": 794, "title": "Seventeen Points", "problem": "This problem uses half open interval notation where [a,b) represents a\u2264x<b.\nA real number, x1, is chosen in the interval [0,1).\nA second real number, x2, is chosen such that each of [0,12) and [12,1) contains exactly one of (x1,x2).\nContinue such that on the n-th step a real number, xn, is chosen so that each of the intervals [k\u22121n,kn) for k\u2208{1,...,n} contains exactly one of (x1,x2,...,xn).\nDefine F(n) to be the minimal value of the sum x1+x2+...+xn of a tuple (x1,x2,...,xn) chosen by such a procedure. For example, F(4)=1.5 obtained with (x1,x2,x3,x4)=(0,0.75,0.5,0.25).\nSurprisingly, no more than 17 points can be chosen by this procedure. \nFind F(17) and give your answer rounded to 12 decimal places.", "solution": "8.146681749623", "difficulty": 35, "story": "Once upon a time in a quaint little town called Mathesis, lived a young and curious girl named Lily. She had just turned 12 and was eager to explore the world beyond her textbooks. Lily had always believed that there was a hidden significance to mathematics, and one day, she stumbled upon a mysterious riddle that piqued her interest.\n\nIt was a bright summer morning when Lily received an anonymous letter. In it, the writer proposed a peculiar problem - a conundrum that required mathematical prowess and a keen eye for patterns. Intrigued, Lily's mind swirled with anticipation as she read the words on the page.\n\nIn the letter, she learned of a unique procedure. It involved choosing real numbers in a specific way, ensuring that each interval contains only one of the chosen numbers. The goal was to minimize the sum of all the numbers selected using this method.\n\nLily's heart skipped a beat. The mathematical problem seemed to hold a secret, a key to unlock another world of knowledge. She felt a surge of determination and decided to embark on a journey to find the answer.\n\nWith her journal in hand, Lily began her quest for knowledge, wandering through the charming streets of Mathesis. She approached scholars and mathematicians, seeking guidance and insights into the problem at hand. Each conversation painted a piece of the puzzle, each piece bringing her closer to uncovering the truth.\n\nAs the days turned into weeks, Lily delved deeper into her pursuit of knowledge. She frequented libraries, losing herself in dusty volumes adorned with complex equations, determined to grasp the essence of the mathematical problem. Her every waking hour was consumed by thoughts of x1, x2, and F(n).\n\nOne evening, Lily stumbled upon an old bookstore tucked away in a hidden corner of the town. The shopkeeper, an elderly man named Mr. Archimedes, had a twinkle in his eyes as he greeted her. Sensing her passion for mathematics, he shared tales of great thinkers who had grappled with similar problems throughout history.\n\n\"Ah, the problem you seek is a fascinating one,\" Mr. Archimedes exclaimed. \"Legend has it that it holds the answer to life's mysteries, hidden within the depths of numbers.\"\n\nLily's eyes widened with excitement. She listened intently as Mr. Archimedes described the trials mathematicians had faced in their pursuit of the solution. The more she learned, the more she discovered the convergence of mathematics and life itself.\n\nDays turned into months, and Lily continued her quest undeterred. She met friends along the way, fellow enthusiasts who shared her passion for numbers. They formed a tight-knit group, supporting each other in unraveling the intricacies of the problem.\n\nTogether, they reached the outskirts of Mathesis, where an ancient forest lay. The mystical aura of the forest seemed to beckon them closer, whispering secrets only it held. Guided by their insatiable curiosity, the group ventured deeper into the heart of the woods.\n\nWithin the enchanted foliage, they discovered a glimmering pool. As Lily peered into its crystal-clear waters, she saw the answer beckoning her from below the surface. It appeared as a series of numbers, dancing and twirling in harmony, their meaning becoming clearer with every passing moment.\n\nSuddenly, a gust of wind swept through the forest, and the numbers vanished, leaving only one lingering question in Lily's mind. The answer was right there, teetering on the edge of her understanding.\n\nAs the group exited the woods, Lily turned to her companions, a spark of determination shining in her eyes. \"Do you see what I see? Do you feel what I feel?\" she asked with a grin. \"Together, we can solve this mathematical marvel.\"\n\nNow, dear reader, with Lily's adventure in mind, I ask you, can you solve the riddle that has captivated her heart? Can you find F(17) and reveal the hidden treasures these numbers hold? The answer awaits, just beyond your fingertips."}, {"id": 802, "euler_id": 802, "title": "Iterated Composition", "problem": "Let R2 be the set of pairs of real numbers (x,y). Let \u03c0=3.14159\u22ef\u00a0.\nConsider the function f from R2 to R2 defined by f(x,y)=(x2\u2212x\u2212y2,2xy\u2212y+\u03c0), and its n-th iterated composition f(n)(x,y)=f(f(\u22eff(x,y)\u22ef)). For example f(3)(x,y)=f(f(f(x,y))). A pair (x,y) is said to have period n if n is the smallest positive integer such that f(n)(x,y)=(x,y).\nLet P(n) denote the sum of x-coordinates of all points having period not exceeding n.\nInterestingly, P(n) is always an integer. For example, P(1)=2, P(2)=2, P(3)=4.\nFind P(107) and give your answer modulo 1020340567.", "solution": "973873727", "difficulty": 35, "story": "Once upon a time, in the vibrant kingdom of Mathlandia, there lived a young and curious mathematician named Lila. Ever since she was a child, Lila's mind had been enchanted by the wonders of numbers and mathematical puzzles. She saw beauty and elegance in every equation and sought to unravel the secrets of the world through her mathematical prowess.\n\nOne sunny morning, while Lila sat under the shade of her favorite apple tree, contemplating the mysteries of the universe, she stumbled upon an enigmatic problem. It was a mathematical conundrum that had perplexed mathematicians for years, known as the \"Iterated Composition Problem.\"\n\nDriven by her insatiable curiosity, Lila delved deep into the problem, fueled by her love for numbers and the quest for knowledge. She spent days and nights immersed in complex equations and intricate calculations, seeking the hidden patterns within the n-th iterated composition function. \n\nOne evening, as Lila's mind danced with hope and curiosity, a sudden realization struck her like a lightning bolt. She discovered that the iterated composition function could be represented by a captivating story, each iteration weaving a new chapter within it.\n\nThe story she crafted was a tale of two adventurers, Xavier and Yara, who set off on an extraordinary journey through the Kingdom of Algebraica. As they navigated through enchanted forests and conquered treacherous mountains, they encountered mysterious creatures and solved countless mathematical puzzles.\n\nTheir first encounter was with a mischievous gnome, who presented them with an equation that revealed the hidden door to the next level of their journey. Little did Xavier and Yara know that each equation held the key to unlocking the truth behind the iterated composition problem.\n\nAs the duo battled through the trials, they discovered that the equation given by the gnome represented the infamous function, f(x,y) = (x^2 - x - y^2, 2xy - y + \u03c0). It was a transformative function that changed their coordinates, marking their progress and challenging their spirits.\n\nAs Xavier and Yara continued their quest, they found that certain pairs of coordinates had a recurring pattern. These points would return to their original coordinates after a specific number of iterations, known as the period of the pair.\n\nDrawn deeper into the mystery, Xavier and Yara sought to understand the true essence of the iterated composition problem. They realized that by summing the x-coordinates of all the points with a period not exceeding a given number, they uncovered hidden gems of ancient knowledge. This sum, known as P(n), possessed a strange and fascinating property \u2014 it was always an integer.\n\nXavier and Yara became determined to uncover the hidden treasures concealed within the mathemagical journey they embarked upon. With every iteration, they grew more certain that these enigmatic coordinates held a secret that could change the very fabric of their universe.\n\nAnd so, with their hearts filled with a heady mix of excitement and trepidation, Xavier and Yara continued on their path, striving to solve the Iterated Composition Problem and unlock the mysteries of the universe.\n\nBut dear reader, the question remains \u2014 will they succeed in their quest? Can you, with your mathematical acumen, find P(107)? As the story of Xavier and Yara unfolds, can you decipher the code that the universe has laid before us? Can you unlock the secret concealed within the mathematical problem that has baffled generations of astute mathematicians?\n\nAs you embark on this journey of discovery, remember that the answers lie not only within the realms of algebra and numbers but also in the depth of your imagination. Can you fathom the depths of this enigma and reveal the secrets it guards?\n\nThe answer awaits you, dear reader. Can you solve the mathematical problem of P(107) and give it to us modulo 1020340567? The fate of Xavier and Yara's mathematical odyssey\u2014 and perhaps the destiny of Mathlandia itself\u2014 rests in your hands."}, {"id": 809, "euler_id": 809, "title": "Rational Recurrence Relation ", "problem": "\nThe following is a function defined for all positive rational values of x.\n\nf(x)={xx\u00a0is integralf(11\u2212x)x<1f(1\u2308x\u2309\u2212x\u22121+f(x\u22121))otherwise\n\nFor example, f(3/2)=3, f(1/6)=65533 and f(13/10)=7625597484985.\n\n\nFind f(22/7). Give your answer modulo 1015.\n", "solution": "75353432948733", "difficulty": 35, "story": "Once upon a time in a small town called Numerica, there lived a young mathematician named Alice. Alice had always been fascinated by numbers and equations. Her immense love for mathematics inspired her to solve complex equations, leaving her peers in awe.\n\nOne sunny day, as Alice was strolling through the town square, she noticed a peculiar notice posted on the community bulletin board. It read: \"Mathematical Challenge: The Unsolvable Function.\" Intrigued, Alice couldn't resist but take a closer look. The notice presented a mathematical problem that appeared to be unsolvable to all those who had attempted it before.\n\nDetermined to crack the code, Alice examined the problem that was written on the notice. It involved a function called \"f(x)\" that was defined for all positive rational values of x. As Alice read through the problem, her excitement grew with each passing sentence. She was certain that the answer to this challenge lay within her grasp.\n\nAs the days turned into weeks, Alice tirelessly delved into the depths of the mathematical problem. She spent countless hours poring over her books, solving equations, and exploring various possibilities. The town noticed her intense dedication, which only fueled her motivation.\n\nSitting in her study one evening, Alice had a breakthrough. She realized that the key to finding the solution was hidden within the pattern of the function. It was not just about finding the value of f(22/7), but also understanding the behavior of the function itself. With this newfound insight, Alice excitedly sprung into action.\n\nShe reached out to her friends and fellow mathematicians to discuss her discovery. They gathered in her study, examining the function and offering their insights. Together, they explored new approaches and contemplated theorems that might be applicable to this unique function. Hours turned into days, and soon enough, they were consumed by the mathematical riddle before them.\n\nAs the sun set over Numerica, hours of relentless brainstorming came to an end. The room was filled with anticipation. Alice stepped forward, her voice filled with confidence. \"I believe we have found the solution,\" she announced, her eyes sparkling with excitement.\n\nThrilled, her friends leaned in closer, eager to hear her revelation. Alice explained her calculations and revealed the answer modulo 10^15, but as she concluded, she paused. The expression on her face turned somber.\n\n\"However,\" Alice continued, \"this answer raises even more questions. How does this pattern arise? What is the significance of f(22/7) within the larger realm of mathematics? There is still much more to uncover.\"\n\nHer words hung in the air as the realization sank in. The mystery of the unsolvable function had been cracked, yet it remained enigmatic. Alice looked around at her friends, contemplating the magnitude of their discovery. They had arrived at a solution, but the journey had only just begun.\n\nAnd so, dear reader, the challenge passes on to you. Can you solve the mathematical problem that captivated Alice's attention and continues to baffle mathematicians worldwide? Can you find f(22/7) modulo 10^15? Can you unravel the intricacies of this formidable function?\n\nThe answer awaits, concealed within the layers of numerical complexity. Will you embark on this mathematical adventure and unlock the secrets hidden within the fabric of rational values? The choice is yours, dear reader. Will you unravel the mystery that has puzzled countless minds before you?"}]